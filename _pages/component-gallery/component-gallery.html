<link defer rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../bower_components/promise-polyfill/promise-polyfill-lite.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html" />

<link defer rel="import" href="../../bower_components/px-theme/px-theme-styles.html">
<link defer rel="import" href="../../css/component-gallery-styles.html" />
<link defer rel="import" href="../../bower_components/px-tile/px-tile.html">
<link async rel="import" href="../../bower_components/px-demo/px-demo-footer.html" />
<link defer rel="import" href="../../bower_components/px-dropdown/px-dropdown.html">
<link defer rel="import" href="../../bower_components/iron-list/iron-list.html">


<dom-module id="view-component-gallery">
  <template>
    <!-- Include the style modules in body to ensure they come after their imported code (which will be inlined at the end of <head> by vulcanize in production) -->
    <style include="px-theme-styles"></style>
    <style include="component-gallery-styles"></style>

    <iron-ajax auto url="tile-data.json" last-response="{{tileData}}" on-response="sortArray"></iron-ajax>

    <div class="page">

      <p class="heading--page u-m0">Component Gallery</p>
      <p class="u-mt0">The Predix UI library of components.</p>
      <hr class="hr">

      <div class="layout">
        <iron-list items="[[tileData]]" as="item" grid>
          <template>
            <a class="layout__item" href="#/components/{{item.name}}">
              <px-tile
                title="{{item.title}}"
                description="{{item.description}}"
                hoverable>
                <picture  slot="thumbnail">
                  <source srcset="{{item.imageUrl}}_light.webp" type="image/webp">
                  <img src="{{item.imageUrl}}_light.png" srcset="{{item.imageUrl}}_light@2x.png"  alt="{{item.imageAlt}}">
                </picture>
              </px-tile>
            </a>
          </template>
        </iron-list>
      </div>

    </div>
    <!-- Footer -->
    <px-demo-footer></px-demo-footer>
  </template>
  <script>
    Polymer({
      is: 'view-component-gallery',
      properties: {
        tileData: {
          type: Array
        }
      },
      sortArray: function(e) {
        this.tileData.sort(function(a,b) {
          return a.title > b.title ? 1 : -1;
        });
      }

    });
  </script>
</dom-module>
