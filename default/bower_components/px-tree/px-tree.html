<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-graph.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-selectable.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-activatable.html"><link rel="import" href="css/px-tree-styles.html"><link rel="import" href="px-tree-node.html"><link rel="import" href="px-tree-behavior.html"></head><body><dom-module id="px-tree"><template><style include="px-tree-styles"></style><ul><template is="dom-repeat" items="[[__rootItems]]"><px-tree-node label="[[_getItemProp(item, keys.label)]]" items="[[_getChildren(item, _assetGraph, _childrenUpdated)]]" item="[[item]]" keys="[[keys]]" is-active="[[_isItemActive(active, activeMeta, item, multiActivate, active.*)]]" is-selected="[[_isItemSelected(selected, item, multiSelect, selected.*)]]" active="[[active]]" active-meta="[[activeMeta]]" selected="[[selected]]" can-open="[[_hasChildren(item, _assetGraph, _childrenUpdated)]]" disable-branch-select="[[disableBranchSelect]]" multi-select="[[multiSelect]]" multi-activate="[[multiActivate]]" icon="[[_getItemProp(item, keys.icon)]]" children-updated="[[_childrenUpdated]]" asset-graph="[[_assetGraph]]"></px-tree-node></template></ul></template></dom-module><script>Polymer({is:'px-tree',behaviors:[PxAppBehavior.AssetGraph,PxAppBehavior.AssetSelectable,PxAppBehavior.AssetActivatable,PxTreeBehavior],listeners:{"px-tree-node-tapped":'_handleNodeTapped',"px-app-asset-children-updated":'_handleChildrenUpdated'},properties:{multiSelect:{type:Boolean,value:!1,observer:'_toggleMultiSelect'},multiActivate:{type:Boolean,value:!1,observer:'_toggleMultiActivate'},disableBranchSelect:{type:Boolean,value:!1},_childrenUpdated:{type:Boolean,value:null}},_handleChildrenUpdated:function(){this._childrenUpdated=!0,this._childrenUpdated=!1},_handleNodeTapped:function(a){const{shift:b,ctrl:c,item:d,isBranch:e,isActive:f,isSelected:g,isIcon:h}=a.detail;if(e&&!f&&this.activate(d),e&&f&&(this.multiActivate?this.deactivate(d):this.activate(this._assetGraph.getInfo(d).parent)),!(e&&this.disableBranchSelect||h||!this._assetGraph.isSelectable(d))){if(g&&(c||b))return void this.deselect(d);if(c||b||this.select(null),this.multiSelect&&b){var i=this._assetGraph.getInfo(d).siblings.indexOf(d),j=this._assetGraph.getInfo(d).siblings.indexOf(this._lastSelection.item);-1<j&&j<i?this._assetGraph.getInfo(d).siblings.slice(j+1,i+1).forEach(function(a){this.select(a)}.bind(this)):-1<j&&this._assetGraph.getInfo(d).siblings.slice(i,j).forEach(function(a){this.select(a)}.bind(this))}else this.select(d)}}});</script></body></html>