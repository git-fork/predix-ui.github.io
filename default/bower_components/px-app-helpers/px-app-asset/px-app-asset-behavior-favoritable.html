<html><head><script>(function(){'use strict';window.PxAppBehavior=window.PxAppBehavior||{},PxAppBehavior.AssetFavoritable={properties:{favorited:{type:Object,notify:!0,value:function(){return[]}},favoritedRoute:{type:Array,notify:!0,value:function(){return[]}},favoritedMeta:{type:Object,notify:!0,readOnly:!0,value:null,computed:'_getFavoritedMeta(favorited.*)'}},created(){this._lastFavorite={source:null,reason:null,item:null}},observers:['_favoritedChanged(favorited.*)','_favoritedRouteChanged(favoritedRoute.*)'],listeners:{"px-app-asset-graph-created":'__favoriteInitialAssets',"px-app-asset-should-be-favorited":'_assetFavoritedByEvent',"px-app-asset-should-be-defavorited":'_assetDefavoritedByEvent'},multiFavorite:!0,favorite(a,b='METHOD'){if(!this.multiFavorite&&null===a&&null!==this._lastFavorite.item||this.multiFavorite&&null===a&&this.favorited.length||this.multiFavorite&&Array.isArray(a)&&!a.length&&this.favorited.length)return this.defavorite(Array.isArray(this.favorited)?[...this.favorited]:this.favorited),this.favorited;if(!a||!this.multiFavorite&&a===this._lastFavorite.item||this.multiFavorite&&-1<this.favorited.indexOf(a))return this.favorited;if(this.multiFavorite&&Array.isArray(a)&&a.length){for(let c=0;c<a.length;c++)this.favorite(a[c],b);return this.favorited}if(this._assetGraph.hasNode(a))return this._favoriteAsset(a,b),this.favorited;throw new Error(`The following item could not be found in the items graph:
          ${JSON.stringify(a)}`)},defavorite(a,b='METHOD'){if(!this.multiFavorite&&(!a||this.favorited===a))return this._defavoriteAsset(this.favorited),this.favorited;if(this.multiFavorite&&!a)return this.defavorite([...this.favorited]),this.favorited;if(this.multiFavorite&&Array.isArray(a)&&this.favorited.length){for(let c=0;c<a.length;c++)this.defavorite(a[c],b);return this.favorited}return this.multiFavorite&&a&&-1<this.favorited.indexOf(a)?(this._defavoriteAsset(a),this.favorited):void 0},_getFavoritedMeta(a){if(a.base&&!Array.isArray(a.base)&&this._assetGraph&&this._assetGraph.hasNode(a.base)){const{path:b,route:c,parent:d,children:e,siblings:f}=this._assetGraph.getInfo(a.base,this.keys.id);return{item:a.base,path:b,route:c,parent:d,children:e,siblings:f}}return a.base&&Array.isArray(a.base)&&a.base.length?a.base.map((a)=>{const{path:b,route:c,parent:d,children:e,siblings:f}=this._assetGraph.getInfo(a,this.keys.id);return{item:a,path:b,route:c,parent:d,children:e,siblings:f}}):{item:null,path:null,route:null,parent:null,children:null,siblings:null}},_assetFavoritedByEvent(a){a.stopPropagation(),a.detail.item&&this.favorite(a.detail.item,'DOM_EVENT')},_assetDefavoritedByEvent(a){a.stopPropagation(),a.detail.item&&this.defavorite(a.detail.item,'DOM_EVENT')},_favoritedRouteChanged(a){a&&a.path&&this._assetGraph&&!this._squashFavoritedRouteChange&&(!this.multiFavorite&&'favoritedRoute'===a.path&&this._updateFavoritedFromRoute(a.base),this.multiFavorite&&('favoritedRoute'===a.path||'favoritedRoute.splices'==a.path)&&this._updateFavoritedFromRouteMulti(a.base))},_updateFavoritedFromRoute(a){if(this.favorited&&(null===a||Array.isArray(a)&&!a.length))return this._squashFavoritedChange=!0,this.defavorite(this.favorited,'ROUTE_CHANGED'),void(this._squashFavoritedChange=!1);const b=this._assetGraph.getNodeAtRoute(a);if(b!==this.favorited)if(b)this.favorite(b,'ROUTE_CHANGED');else throw new Error(`The route ${JSON.stringify(a)} could not be found in the items graph.`)},_updateFavoritedFromRouteMulti(a){if(this.favorited.length&&(null===a||Array.isArray(a)&&!a.length))return this._squashFavoritedChange=!0,this.defavorite(null,'ROUTE_CHANGED'),void(this._squashFavoritedChange=!1);if(Array.isArray(a))for(let b=0;b<a.length;b++)this._squashFavoritedChange=!0,this.favorited=a.map((a)=>{const b=this._assetGraph.getNodeAtRoute(a);if(!b)throw new Error(`The following item could not be found in the items graph:
                  ${JSON.stringify(b)}`);return b}),this._squashFavoritedChange=!1},_favoritedChanged(a){a&&a.path&&!this._squashFavoritedChange&&this._assetGraph&&(!this.multiFavorite&&'favorited'===a.path&&'undefined'!==typeof this.favoritedRoute&&this._updateFavoritedRoute(a.base),this.multiFavorite&&('favorited'===a.path||'favorited.splices'===a.path)&&'undefined'!==typeof this.favoritedRoute&&this._updateFavoritedRouteMulti(a.base))},_checkIfEmpty(a){return Array.isArray(a)?!!a.length:!!a},_updateFavoritedRoute(a){if(this._checkIfEmpty(a)){if(!this._assetGraph.hasNode(a)){throw new Error(`The following item could not be found in the items graph:
              ${JSON.stringify(a)}`)}const b=this._assetGraph.getRoute(a,this.keys.id);this._routeIsDifferent(b,this.favoritedRoute)&&(this._squashFavoritedRouteChange=!0,this.favoritedRoute=b,this._squashFavoritedRouteChange=!1)}else this._squashFavoritedRouteChange=!0,this.favoritedRoute=null,this._squashFavoritedRouteChange=!1},_updateFavoritedRouteMulti(a){a&&Array.isArray(a)&&a.length?(this._squashFavoritedRouteChange=!0,this.favoritedRoute=a.map((a)=>{if(!this._assetGraph.hasNode(a))throw new Error(`The following item could not be found in the items graph:
                ${JSON.stringify(a)}`);return this._assetGraph.getRoute(a,this.keys.id)}),this._squashFavoritedRouteChange=!1):(this._squashFavoritedRouteChange=!0,this.favoritedRoute=[],this._squashFavoritedRouteChange=!1)},__favoriteInitialAssets(){this.multiFavorite||!this.favorited||this.favoritedRoute?this.multiFavorite||this.favorited||!this.favoritedRoute?this.multiFavorite&&this.favorited.length&&!this.favoritedRoute.length?this._updateFavoritedRouteMulti(this.favorited):this.multiFavorite&&!this.favorited.length&&this.favoritedRoute.length&&this._updateFavoritedFromRouteMulti(this.favorited):this._updateFavoritedFromRoute(this.favoritedRoute):this._updateFavoritedRoute(this.favorited)},_routeIsDifferent(a,b){if(!a||!b)return!0;if(a.length!==b.length)return!0;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1},_favoriteAsset(a,b){const{route:c,path:d}=this._assetGraph.getInfo(a,this.keys.id);this._lastFavorite={item:a,source:b,route:c},this.multiFavorite||(this.favorited=a),this.multiFavorite&&this.push('favorited',a),this.fire('px-app-asset-favorited',{source:b,item:a,route:c,path:d})},_defavoriteAsset(a,b){const{route:c,path:d}=this._assetGraph.getInfo(a,this.keys.id);this._lastFavorite={item:null,source:null,route:null},this.multiFavorite||(this.set('favorited',null),this.fire('px-app-asset-defavorited',{source:b,item:a,route:c,path:d})),this.multiFavorite&&(this.splice('favorited',this.favorited.indexOf(a),1),this.fire('px-app-asset-defavorited',{source:b,item:a,route:c,path:d}))}}})();</script></head><body></body></html>