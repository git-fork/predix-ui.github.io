<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="css/px-heatmap-grid-styles.html"></head><body><dom-module id="px-heatmap-grid-scale"><template class="flex flex--col flex--left flex--justify flex--stretch"><style include="px-heatmap-grid-styles"></style><div class$="u-pl- u-pr- scale-container flex flex--row flex--left flex--top {{disabledHeader}}"><div class="scale-gradient"></div><div class="u-ml-- scale-values flex flex--col flex--justify"><div>{{computedScale.max}}</div><div>{{computedScale.mid}}</div><div>{{computedScale.min}}</div></div></div></template></dom-module><script>Polymer({is:'px-heatmap-grid-scale',properties:{scale:{type:Array,value:function(){return[0,100]},observer:'_scaleChanged'},computedScale:{type:Object,value:function(){return{min:0,mid:50,max:100}}},scaleColorFrom:{type:String,observer:'_scaleColorFromChanged'},scaleColorTo:{type:String,observer:'_scaleColorToChanged'},hideColHeader:{type:Boolean,value:!1,observer:'_hideColHeaderChanged'}},attached:function(){this._scaleChanged(this.scale,[]),this._lookupColors()},_scaleChanged:function(a,b){if(a!==b&&a&&2===a.length&&this.computedScale){var c={min:a[0],mid:Math.round((a[1]-a[0])/2)+ +a[0],max:a[1]};this.set('computedScale',c)}},_scaleColorFromChanged:function(a,b){if(a&&a!==b){var c=Polymer.dom(this.root).querySelector('.scale-gradient');c.style.background='linear-gradient(to top, '+a+', '+this.scaleColorTo+')',this._lookupColors()}},_scaleColorToChanged:function(a,b){if(a&&a!==b){var c=Polymer.dom(this.root).querySelector('.scale-gradient');c.style.background='linear-gradient(to top, '+this.scaleColorFrom+', '+a+')',this._lookupColors()}},_lookupColors:function(){for(var a,b=/rgb\(([0-9+,?\s?]+)\)/g,c=[],d=window.getComputedStyle(Polymer.dom(this.root).querySelector('.scale-gradient')).backgroundImage;null!==(a=b.exec(d));)c.push(a[1]);2>c.length&&console.warn('Invalid --px-heatmap-grid-start-color or --px-heatmap-grid-end-color detected. Did you specify it correctly? RGB notation is required for the heatmap to calculate the proper color of each cell based on value.'),this.scaleColorFrom='rgb('+c[0]+')',this.scaleColorTo='rgb('+c[1]+')',this.fire('scale-colors-changed',{from:this.scaleColorFrom,to:this.scaleColorTo})},_hideColHeaderChanged:function(a,b){a!==void 0&&a!==b&&(!1===a?this.disabledHeader='':this.disabledHeader='disable-col-header')}});</script></body></html>