<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="css/px-context-browser-columns-styles.html"><link rel="import" href="css/px-context-browser-animations-styles.html"></head><body><dom-module id="px-context-browser-columns"><template><style include="px-context-browser-columns-styles"></style><style include="px-context-browser-animations-styles"></style><div id="columns" class="column-animation"><slot name="columns"></slot></div></template></dom-module><script>Polymer({is:'px-context-browser-columns',properties:{active:{type:Number,observer:'_activeChanged'},_activeEl:{type:HTMLElement,observer:'_activeElChanged'},_animateInEl:{type:HTMLElement,observer:'_animateInElChanged'},_animateOutEl:{type:HTMLElement,observer:'_animateOutElChanged'}},created:function(){this._onAnimateInEnd=null,this._onAnimateOutEnd=null,this._animateClassNames={FADE_IN_RIGHT:'fade-in-right',FADE_IN_LEFT:'fade-in-left',FADE_OUT_RIGHT:'fade-out-right',FADE_OUT_LEFT:'fade-out-left'}},attached:function(){this._observer=Polymer.dom(this.$.columns).observeNodes(function(){'number'!==typeof this.active||this._activeEl||this._activeChanged(this.active)}.bind(this))},detached:function(){Polymer.dom(this.$.columns).unobserveNodes(this._observer)},_activeChanged:function(a,b){var c=Polymer.dom(this).querySelector('[column="'+a+'"]');'number'===typeof a&&a!==this._activeEl&&(this._animateInClassName=a>(b||0)?this._animateClassNames.FADE_IN_LEFT:this._animateClassNames.FADE_IN_RIGHT,this._animateOutClassName=a>(b||0)?this._animateClassNames.FADE_OUT_LEFT:this._animateClassNames.FADE_OUT_RIGHT,this._activeEl=c)},_activeElChanged:function(a,b){b&&b!==this._animateOutEl&&(this._animateOutEl=b),a&&a!==this._animateInEl&&(this._animateInEl=a)},_animateInElChanged:function(a,b){return b?void(this._onAnimateInEnd&&b&&this._onAnimateInEnd(),this._onAnimateInEnd=this._setupAnimateIn(a,this._animateInClassName)):void a.classList.add('active')},_animateOutElChanged:function(a,b){this._onAnimateOutEnd&&b&&this._onAnimateOutEnd(),this._onAnimateOutEnd=this._setupAnimateOut(a,this._animateOutClassName)},_setupAnimateIn:function(a,b){var c=this._teardownAnimateIn.bind(this,a,b);return a.addEventListener('animationend',c),a.classList.contains('animating')||a.classList.add('animating'),a.classList.contains(b)||a.classList.add(b),c},_setupAnimateOut:function(a,b){var c=this._teardownAnimateOut.bind(this,a,b);return a.addEventListener('animationend',c),a.classList.contains('animating')||a.classList.add('animating'),a.classList.contains('active')&&a.classList.remove('active'),a.classList.contains(b)||a.classList.add(b),c},_teardownAnimateIn:function(a,b){a.classList.contains('active')||a.classList.add('active'),a.classList.contains('animating')&&a.classList.remove('animating'),a.classList.contains(b)&&a.classList.remove(b),a.removeEventListener('animationend',this._onAnimateInEnd),this._onAnimateInEnd=null},_teardownAnimateOut:function(a,b){a.classList.contains('active')&&a.classList.remove('active'),a.classList.contains('animating')&&a.classList.remove('animating'),a.classList.contains(b)&&a.classList.remove(b),a.removeEventListener('animationend',this._onAnimateOutEnd),this._onAnimateOutEnd=null}});</script></body></html>