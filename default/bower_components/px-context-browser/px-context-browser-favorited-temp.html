<html><head><link rel="import" href="../polymer/polymer.html"><script>(()=>{Polymer({is:'px-context-browser-favorited-temp',properties:{favoritedBehaviorElement:HTMLElement,favorited:Array,opened:Boolean,favoritedOpened:Boolean,_itemsToRemove:{type:Array,value:()=>[]},currentFavorited:{type:Array,value:()=>[],notify:!0,readOnly:!0}},observers:['_handleOpenedChanged(opened, favoritedOpened)','_computeCurrentFavorited(favorited, _itemsToRemove, favorited.*)'],created(){this._flushFavoritedChangesTask=null},ready(){this.currentFavorited=this._computeCurrentFavorited(this.favorited,this._itemsToRemove)},handleItemTapped(a){this.favoritedOpened||(-1===this.currentFavorited.indexOf(a)?this.favoritedBehaviorElement.favorite(a):this.favoritedBehaviorElement.defavorite(a)),this.favoritedOpened&&(-1===this._itemsToRemove.indexOf(a)?this._itemsToRemove=this._itemsToRemove.concat([a]):this._itemsToRemove=this._itemsToRemove.filter((b)=>b!==a))},flushFavoritedChanges(){this._itemsToRemove.forEach((a)=>{this.favoritedBehaviorElement.defavorite(a)}),this._itemsToRemove=[]},_computeCurrentFavorited(a,b){this.debounce('compute-current-favorited',()=>{Array.isArray(a)&&Array.isArray(b)&&this._setCurrentFavorited(a.filter((a)=>-1===b.indexOf(a)))})},_handleOpenedChanged(a,b){this._flushFavoritedChangesTask&&(this.cancelAsync(this._flushFavoritedChangesTask),this._flushFavoritedChangesTask=null),a&&this.flushFavoritedChanges(),a||b||(this._flushFavoritedChangesTask=this.async(this.flushFavoritedChanges.bind(this),5e3))}})})();</script></head><body></body></html>