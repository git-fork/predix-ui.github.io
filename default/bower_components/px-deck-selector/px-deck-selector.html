<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-icon-set/px-icon-set.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="css/px-deck-selector-styles.html"></head><body><dom-module id="px-deck-selector"><template><style include="px-deck-selector-styles"></style><div id="trigger" class$="dropdown-text actionable actionable--action [[_hideChevronIfNoDecks(decks)]]" on-tap="_handleTriggerTapped"><span class="truncate" title="{{selectedDeck.name}}">{{selectedDeck.name}}</span><px-icon icon="px-utl:chevron"></px-icon></div><ul id="dropdown" class$="dropdown-menu list-bare [[_getDropdownClassName(_isDropdownOpen)]]"><template is="dom-repeat" items="{{decks}}" as="deck"><li on-tap="_handleDeckTapped" class$="dropdown-menu__item [[_isDeckSelected(deck,selectedDeck)]]"><span class="truncate" title="{{deck.name}}">{{deck.name}}</span></li></template><template is="dom-if" if="{{configOptions.edit}}"><li on-tap="_handleDeckEventTapped" class="dropdown-menu__item dropdown-menu__item--deck-editor"><span class="truncate" title="{{configOptions.actionType}}">{{configOptions.actionType}}</span></li></template></ul></template></dom-module><script>Polymer({is:'px-deck-selector',properties:{decks:{type:Array,value:function(){return[]},observer:'_selectFirstDeck'},selectedDeck:{type:Object,value:function(){return{}},notify:!0},_isDropdownOpen:{type:Boolean,value:!1,observer:'_handleDropdownOpenedChanged'},configOptions:{type:Object,value:function(){return{}},notify:!0}},created:function(){this._handleDocumentTapped=this._handleDocumentTapped.bind(this)},_selectFirstDeck:function(a){Array.isArray(a)&&0<a.length&&(this.selectedDeck=a[0])},_handleDropdownOpenedChanged:function(a){a?document.addEventListener('click',this._handleDocumentClicked,!1):document.removeEventListener('click',this._handleDocumentClicked)},_handleDocumentTapped:function(a){const b=Polymer.dom(a).path,c=this.$.trigger,d=0<b.filter((a)=>a===c).length;d||(this._isDropdownOpen=!1)},_handleTriggerTapped:function(){this._isDropdownOpen=!this._isDropdownOpen},_handleDeckTapped:function(a){this.set('selectedDeck',a.model.deck),this._isDropdownOpen=!1},_handleDeckEventTapped:function(a){this.fire('deckEvent',a.model.configOptions.eventType),this._isDropdownOpen=!1},_hideChevronIfNoDecks:function(a){if(!Array.isArray(a)||0===a.length)return'visuallyhidden'},_isDeckSelected:function(a,b){return a.name===b.name?'selected':''},_getDropdownClassName:function(a){return a?'':'visuallyhidden'}});</script></body></html>