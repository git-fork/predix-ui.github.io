<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="css/px-simple-area-chart-styles.html"><link rel="import" href="../px-vis/px-vis-behavior-common.html"><link rel="import" href="../px-vis/px-vis-behavior-d3.html"><link rel="import" href="../px-vis/px-vis-behavior-chart.html"><link rel="import" href="../px-vis/px-vis-scale.html"><link rel="import" href="../px-vis/px-vis-svg.html"><link rel="import" href="../px-vis/px-vis-register.html"><link rel="import" href="../px-vis/px-vis-interaction-space.html"><link rel="import" href="../px-vis/px-vis-cursor.html"><link rel="import" href="../px-vis/px-vis-area-svg.html"></head><body><dom-module id="px-simple-area-chart"><template><style include="px-simple-area-chart-styles"></style><div id="wrapper" class="flex wrapper flex--left safari-flex-fix"><div class="flex flex--col"><px-vis-register id="register" height="50" chart-width="[[width]]" margin="[[margin]]" units="[[units]]" tooltip-data="[[tooltipData]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" type="horizontal" x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]" disable-click=""></px-vis-register><px-vis-svg width="[[width]]" height="[[height]]" margin="[[margin]]" svg="{{svg}}"></px-vis-svg><px-vis-scale x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]" complete-series-config="[[completeSeriesConfig]]" data-extents="[[_dataExtents]]" width="[[width]]" height="[[height]]" margin="[[margin]]" chart-data="{{chartData}}" x="{{x}}" y="{{y}}" domain-changed="{{domainChanged}}"></px-vis-scale><px-vis-area-svg svg="[[layer.0]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[_stackedChartData]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]"></px-vis-area-svg><px-vis-interaction-space svg="[[layer.2]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" x-axis-type="[[xAxisType]]" series-keys="[[_seriesKeys]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" selection-type="{{selectionType}}" mouse-rect="{{mouseRect}}" tooltip-data="{{tooltipData}}" interaction-svg="{{interactionSvg}}" extents-data="{{extentsData}}" action-config="[[actionConfig]]" show-tooltip="{{_computedShowTooltip}}"></px-vis-interaction-space><px-vis-cursor id="cursor" svg="[[layer.1]]" width="[[width]]" height="[[height]]" margin="[[margin]]" horizontal-line="none" circle-point="no" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" tooltip-data="[[tooltipData]]"></px-vis-cursor></div></div></template></dom-module><script>Polymer({is:'px-simple-area-chart',behaviors:[PxVisBehavior.baseSize,PxVisBehavior.margins,PxVisBehavior.dataset,PxVisBehavior.axisTypes,PxVisBehaviorD3.axes,PxVisBehaviorD3.domainUpdate,PxVisBehavior.chartExtents,PxVisBehavior.dataExtents,PxVisBehaviorD3.svg,PxVisBehavior.commonMethods,PxVisBehavior.tooltipData,PxVisBehaviorChart.registerConfigs,PxVisBehaviorChart.registerPositioning,PxVisBehaviorChart.chartAutoResize,PxColorsBehavior.dataVisColorTheming,PxVisBehaviorChart.layers,PxVisBehaviorChart.chartCommon,PxVisBehaviorChart.subConfiguration],properties:{_stackedChartData:{type:Array,computed:'_computeStack(chartData.*, completeSeriesConfig.*)'},_dataExtents:{type:Object,computed:'_computeDataExt(dataExtents, completeSeriesConfig.*)'}},listeners:{"iron-resize":'_onIronResize'},observers:['_registerConfigChanged(registerConfig.*)'],ready:function(){this.set('numberOfLayers',3),this.includeAllSeries=!0},_onIronResize:function(){var a=Math.max;this.preventResize||this.debounce('ironresize',function(){var b=this.$.wrapper.getBoundingClientRect(),c=this.$.register.getBoundingClientRect(),d=0;d+=c.height,this.set('width',a(b.width-0,0)),this.set('height',a(b.height-d,0))},50)},_registerConfigChanged:function(a){a&&this._applyConfigToElement(this.registerConfig,this.$.register)},_computeStack:function(){if(this._doesObjHaveValues(this.completeSeriesConfig)&&this._doesObjHaveValues(this.chartData)){for(var a,b=Px.d3.stack(),c=Object.keys(this.completeSeriesConfig),d=[],e=0;e<c.length;e++)a=c[e],d.push(this.completeSeriesConfig[a].y);return b.keys(d),b(this.chartData)}},_computeDataExt:function(){if(this.completeSeriesConfig&&this._doesObjHaveValues(this.dataExtents)){var a=1;keys=Object.keys(this.completeSeriesConfig);for(var b,c=0;c<this.chartData.length;c++){b=0;for(var d=0;d<keys.length;d++){var e=keys[d],f=this.completeSeriesConfig[e].y,g=this.chartData[c][f]?this.chartData[c][f]:0;b+=g}a=Math.max(b,a)}return{x:[this.dataExtents.x[0],this.dataExtents.x[1]],y:[0,a]}}}});</script></body></html>