<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-highlight-point"><template><style include="px-vis-styles"></style></template></dom-module><script>Polymer({is:'px-vis-highlight-point',behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.sizing,PxVisBehaviorD3.svg,PxVisBehaviorD3.axes,PxVisBehavior.dataset,PxVisBehavior.commonMethods,PxVisBehavior.crosshairData,PxVisBehaviorD3.clipPath,PxVisBehavior.mutedCompleteSeriesConfig,PxVisBehavior.dynamicConfigProperties,PxVisBehavior.highlightSvgShared,PxVisBehaviorD3.radialPixelCalc,PxVisBehavior.interactionSpaceShared,PxVisBehavior.tooltipData,PxVisBehavior.seriesKeys],properties:{_highlightData:{type:Object},_cursor:{type:Object},_circles:{type:Object},radial:{type:Boolean,value:!1}},observers:['drawElement(svg, crosshairData.timeStamps.*, _mutedCompleteSeriesConfig.*, drawWithLocalCrosshairData, differentDataset, domainChanged, x, y, fuzz)','_updateTooltipData(domainChanged)'],detached:function(){this._circles&&(this._circles.remove(),this._circles=null)},drawElement:function(){this.hasUndefinedArguments(arguments)||this.debounce('draw',function(){if(!(this.generatingCrosshairData&&!this.drawWithLocalCrosshairData&&0<this.crosshairData.rawData.length)){var a,b=this,c=this._getXKey(),d=this.differentDataset?this._calcDataset():this.crosshairData.rawData;this._muteDataSeries(d),a=this.svg.selectAll('g.highlightPoint').data(d,function(a){return a[c]}.bind(this)),a.exit().remove(),a.enter().append('g').attr('class','highlightPoint').merge(a).each(function(a){b._createCircles(a,this)}),this._circles=this.svg.selectAll('circle.highlightPoint'),this._addClipPath(),this.showTooltipData&&(this._setTooltipData(d),this._resetTooltipData()),this._highlightData=d}}.bind(this),10)},_createCircles:function(a,b){var d=Px.d3.select(b).selectAll('circle.highlightPoint').data(Object.keys(this._mutedCompleteSeriesConfig));d.exit().remove(),d.enter().append('circle').attr('class','highlightPoint').attr('r',3).attr('stroke-width',12).attr('stroke-opacity',0.3).merge(d).attr('fill',function(a){return this._mutedCompleteSeriesConfig[a].color}.bind(this)).attr('stroke',function(a){return this._mutedCompleteSeriesConfig[a].color}.bind(this)).attr('cx',function(b){if(isNaN(a[this._mutedCompleteSeriesConfig[b].x])||isNaN(a[this._mutedCompleteSeriesConfig[b].y]))return null;if(this.radial){var c=a[this._mutedCompleteSeriesConfig[b].x],d=a[this._mutedCompleteSeriesConfig[b].y],e=this.y.range()[1]-this.y.range()[0];return this.calcPixelCoordForRadial(c,d,e,this.y.domain(),'x')}return this.x(a[this._mutedCompleteSeriesConfig[b].x])}.bind(this)).attr('cy',function(b){if(isNaN(a[this._mutedCompleteSeriesConfig[b].x])||isNaN(a[this._mutedCompleteSeriesConfig[b].y]))return null;if(this.radial){var c=a[this._mutedCompleteSeriesConfig[b].x],d=a[this._mutedCompleteSeriesConfig[b].y],e=this.y.range()[1]-this.y.range()[0];return this.calcPixelCoordForRadial(c,d,e,this.y.domain(),'y')}return'function'===typeof this.y?this.y(a[this._mutedCompleteSeriesConfig[b].y]):this.y[this._mutedCompleteSeriesConfig[b].axis.id](a[this._mutedCompleteSeriesConfig[b].y])}.bind(this)).style('display',function(b){return isNaN(a[this._mutedCompleteSeriesConfig[b].x])||isNaN(a[this._mutedCompleteSeriesConfig[b].y])?'none':null}.bind(this))},_addClipPath:function(){this.clipPath&&this._doesD3HaveValues(this._circles)&&this.addClipPath(this._circles)},_updateTooltipData:function(){this.hasUndefinedArguments(arguments)||this.defaultEmptyData&&this._setTooltipData(this._highlightData)},_getXKey:function(){var a=Object.keys(this.completeSeriesConfig);return this.completeSeriesConfig[a[0]].x}});</script></body></html>