<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="px-vis-behavior-datetime.html"><link rel="import" href="../px-icon-set/px-icon-set-utility.html"><link rel="import" href="css/px-vis-markers-tooltip-content-styles.html"></head><body><dom-module id="px-vis-markers-tooltip-content"><template><style include="px-vis-markers-tooltip-content-styles"></style><div class="flex flex--middle"><template is="dom-if" if="[[_multipleTooltips]]"><button class$="btn btn--bare button--nav-left [[_leftDisabled(_currentTooltipIndex)]]" on-click="_previousTooltip"><px-icon icon="px-utl:chevron-left"></px-icon></button></template><div><b>[[localize("Event")]]</b>: [[_eventType]]<br><b>[[localize("Timestamp")]]</b>: [[_value]]<br><template id="infoTemplate" is="dom-repeat" items="[[_additionalInfo]]" as="info"><b>[[info.key]]</b>: [[info.value]]<br></template></div><template is="dom-if" if="[[_multipleTooltips]]"><button class$="btn btn--bare button--nav-right [[_rightDisabled(_currentTooltipIndex)]]" on-click="_nextTooltip"><px-icon icon="px-utl:chevron-right"></px-icon></button></template></div></template></dom-module><script>Polymer({is:'px-vis-markers-tooltip-content',behaviors:[PxVisBehavior.observerCheck,Polymer.AppLocalizeBehavior,PxVisBehaviorTime.datetime],properties:{markerData:{type:Object},markerConfig:{type:Object},markerTypes:{type:Array},resources:{type:Object,value:function(){return{en:{Event:'Event',Timestamp:'Timestamp'}}}},language:{type:String,value:'en'},useKeyIfMissing:{type:Boolean,value:!0},_eventType:{type:String},_value:{type:String},_additionalInfo:{type:Array},tooltipDataResult:{type:Array},_multipleTooltips:{type:Boolean,computed:'_computeMultipleTooltips(tooltipDataResult)'},_currentTooltipIndex:{type:Number}},observers:['_dataChanged(tooltipDataResult)','_updateTooltipInfo(_currentTooltipIndex, tooltipDataResult, markerData, markerConfig, markerTypes)'],_dataChanged:function(){this.hasUndefinedArguments(arguments)||(this._currentTooltipIndex=0)},_computeMultipleTooltips:function(){return this.hasUndefinedArguments(arguments)?void 0:1<this.tooltipDataResult.length},_findMarkerType:function(a){for(var b,c=Object.keys(a),d=0;d<c.length;d++)if(-1!==this.markerTypes.indexOf(c[d])){b=c[d];break}return b},_updateTooltipInfo:function(){this.hasUndefinedArguments(arguments)||this.debounce('updateInfo',function(){var a,b,c,d=this.tooltipDataResult[this._currentTooltipIndex],e=this.markerData[d.originIndex];e&&(a=Object.keys(e),b=[],c=this._findMarkerType(d),a.forEach(function(a){'time'!==a&&'label'!==a&&b.push({key:a,value:e[a]})}),this.set('_additionalInfo',b),this.set('_value',this._formatTimestampForType(d,c)),this.set('_eventType',this.markerConfig[c].tooltipLabel))}.bind(this),5)},_previousTooltip:function(){this._updateTooltipInfo(this.tooltipDataResult[this._currentTooltipIndex--])},_nextTooltip:function(){this._updateTooltipInfo(this.tooltipDataResult[this._currentTooltipIndex++])},_formatTimestampForType:function(a,b){var c=this.markerConfig[b];return this.formatTimestamp(a.x,c.timezone,c.firstDateTimeFormat)+' '+c.separator+' '+this.formatTimestamp(a.x,c.timezone,c.secondDateTimeFormat)},_leftDisabled:function(){return 0===this._currentTooltipIndex?'btn--disabled':''},_rightDisabled:function(){return this._currentTooltipIndex===this.tooltipDataResult.length-1?'btn--disabled':''}});</script></body></html>