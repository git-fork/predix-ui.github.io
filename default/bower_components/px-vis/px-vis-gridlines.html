<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-gridlines"><template><style include="px-vis-styles"></style></template></dom-module><script>Polymer({is:'px-vis-gridlines',behaviors:[PxVisBehavior.observerCheck,PxVisBehaviorD3.svg,PxVisBehavior.sizing,PxVisBehavior.commonMethods,PxVisBehaviorD3.axis,PxVisBehaviorD3.axisConfig,PxVisBehaviorD3.domainUpdate,PxVisBehavior.updateStylesOverride],properties:{_grid:{type:Object,notify:!0},_gridGroup:{type:Object,value:function(){return{}}},gridId:{type:String,value:''},translateAmt:{type:Array,value:function(){return[0,0]}},_drawGrid:{type:Boolean,value:!0},_isDirty:{type:Boolean,value:!1}},observers:['drawElement(domainChanged,axis,margin.*,length,svg)','_setLineStyles(_stylesUpdated)'],ready:function(){this.gridId||this.set('gridId',this.generateRandomID('grid_'))},attached:function(){this._drawGrid=!0,this._isDirty&&(this.drawElement(),this._isDirty=!1)},detached:function(){this._doesObjHaveValues(this._gridGroup)&&(this._gridGroup.remove(),this._gridGroup=null),this._drawGrid=!1,this._isDirty=!0},defineGrid:function(){switch(this.orientation){case'bottom':this._grid=Px.d3.axisBottom(this.axis);break;case'top':this._grid=Px.d3.axisTop(this.axis);break;case'right':this._grid=Px.d3.axisRight(this.axis);break;default:this._grid=Px.d3.axisLeft(this.axis);}this.tickValues&&0<this.tickValues.length&&!isNaN(this.axis.domain()[0])&&!isNaN(this.axis.domain()[1])&&this._grid.tickValues(this.tickValues),'bottom'===this.orientation?this._grid.tickSizeInner(+this.margin.top+ +this.margin.bottom-this.length):'left'===this.orientation&&this._grid.tickSizeInner(+this.margin.left+ +this.margin.right-this.length)},drawElement:function(){this.hasUndefinedArguments(arguments)||this.debounce('draw_grid',function(){if(this._drawGrid&&this.axis&&this.axis.domain()){if(this.defineGrid(),'bottom'===this.orientation){var a=Px.d3.select(this.svg.node().ownerSVGElement).attr('height')-+this.margin.bottom-+this.margin.top;this.translateAmt=[0,a]}else'left'===this.orientation&&(this.translateAmt=[0,0]);this._isObjEmpty(this._gridGroup)?(this._gridGroup=this.svg.append('g').attr('class','grid').attr('grid-id',this.gridId).attr('transform','translate('+this.translateAmt.join(',')+')').call(this._grid),this._removeUncessaryElems(this._gridGroup),this._setLineStyles()):(this._gridGroup.attr('transform','translate('+this.translateAmt.join(',')+')').call(this._grid),this._removeUncessaryElems(this._gridGroup),this._setLineStyles())}},5)},_removeUncessaryElems:function(a){a.selectAll('text').remove(),a.selectAll('path').remove()},_setLineStyles:function(){this.hasUndefinedArguments(arguments)||this._doesD3HaveValues(this._gridGroup)&&this._gridGroup.selectAll('line').attr('fill','none').attr('stroke',this._checkThemeVariable('--px-vis-gridlines-color','rgb(125,125,125)')).attr('shape-rendering','crispEdges')}});</script></body></html>