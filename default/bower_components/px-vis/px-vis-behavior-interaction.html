<html><head><script>var PxVisBehaviorInteraction=PxVisBehaviorInteraction||{};PxVisBehaviorInteraction.lasso=[{properties:{_isLassoing:{type:Boolean,value:!1},_lassoDrawing:{type:Object},_lassoGroup:{type:Object},_lassoCoords:{type:Object,value:function(){return[]}},_lassoCrosshairData:{type:Object,value:function(){return{rawData:[],timeStamps:[]}}},_lassoGenerator:{type:Object},resetLassoData:{type:Boolean,value:!1,observer:'_resetLasso'}},_resetLasso:function(){this.hasUndefinedArguments(arguments)||(this._lassoCrosshairData={rawData:[],timeStamps:[]})},_startLasso:function(){if(0===Px.d3.event.button){this._calcCrosshair=!0,this._isLassoing=!0,Px.d3.select(document).on('mouseup.action',this._stopLasso.bind(this)),Px.d3.select(document).on('mousemove.action',this._updateLasso.bind(this));var a=Px.d3.mouse(this._rect.node());if(this._lassoGenerator=Px.d3.line().x(function(a){return a[0]}).y(function(a){return a[1]}),this._lassoGroup=this.svg.append('g').attr('class','lasso-group'),'time'===this.xAxisType||'timeLocal'===this.xAxisType){var b=Math.max(this.height-this.margin.bottom-this.margin.top,0);this._lassoCoords.push([a[0],0],[a[0],b],[a[0],0],[a[0],b],[a[0],0])}else this._lassoCoords.push([a[0],a[1]],[a[0],a[1]]);this._lassoGroup.append('path').attr('class','lasso-line').attr('fill',this._checkThemeVariable('--px-vis-zoom-brush-fill-color','rgb(0,0,0)')).attr('fill-opacity',this._checkThemeVariable('--px-vis-zoom-brush-fill-opacity',0.5)).attr('stroke',this._checkThemeVariable('--px-vis-zoom-brush-outline-color','rgb(0,0,0)')),this._calcData()}},_updateLasso:function(){if(this._isLassoing){var a=Px.d3.mouse(this._rect.node());'time'===this.xAxisType||'timeLocal'===this.xAxisType?this._updateCoordsTS(a):this.radial?this._updateCoordsRadial(a):this._updateCoordsCartesian(a),this._lassoGroup.selectAll('path.lasso-line').attr('d',this._lassoGenerator(this._lassoCoords)),this._calcData()}},_updateCoordsCartesian:function(a){var b=a,c=Math.max(this.height-this.margin.bottom-this.margin.top,0),d=this._lassoCoords.pop();b[0]=this._constrainOnWidth(a[0]),b[1]=0>a[1]?0:a[1],b[1]=b[1]>c?c:b[1],this._lassoCoords.push(b),this._lassoCoords.push(d)},_updateCoordsRadial:function(a){var b,c=a,d=a[0]*a[0]+a[1]*a[1],e=this._lassoCoords.pop();d>this.width*this.width&&(b=this.width/Math.sqrt(d),c[0]=a[0]*b,c[1]=a[1]*b),this._lassoCoords.push(c),this._lassoCoords.push(e)},_updateCoordsTS:function(a){var b=Math.max(this.height-this.margin.bottom-this.margin.top,0),c=this._constrainOnWidth(a[0]),d=this._lassoCoords.pop();this._lassoCoords.pop(),this._lassoCoords.pop(),this._lassoCoords.push([c,this._height]),this._lassoCoords.push([c,0]),this._lassoCoords.push(d)},_constrainOnWidth:function(a){var b,c=Math.max(this.width-this.margin.left-this.margin.right,0);return b=0>a?0:a,b=b>c?c:b,b},_stopLasso:function(){this._lassoGroup.remove(),this._lassoCoords=[],this._isLassoing=!1,this._lassoCrosshairData=this.crosshairData}},PxVisBehavior.observerCheck];</script></head><body></body></html>