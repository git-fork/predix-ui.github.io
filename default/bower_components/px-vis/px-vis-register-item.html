<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-register.html"><link rel="import" href="px-vis-dynamic-menu.html"><link rel="import" href="../px-number-formatter/px-number-formatter.html"><link rel="import" href="css/px-vis-register-styles.html"></head><body><dom-module id="px-vis-register-item"><template><style include="px-vis-register-styles"></style><style>:host{flex-shrink:0;}</style><span class$="[[_baseClasses]] register-item--min-width" name$="R[[item.name]]" id="regItem"><span class$="flex [[_itemMutedToStart]]" on-tap="_seriesClicked" id="regWithoutMenu"><span class="seriesMarker flex"><span class="seriesMarkerIcon" style$="[[_calcDashPattern(_itemColor,_dashPattern)]];" name$="R{{item.name}}">&nbsp;</span> </span><span class$="[[_wrapperClass]]"><div class="seriesName flex__item--msfix" name$="R[[item.name]]">[[_truncatedName]]&nbsp;<template is="dom-if" if="[[_didTruncate]]"><px-tooltip delay="500">[[_configName]]</px-tooltip></template></div><div class="seriesData flex__item--msfix" name$="R{{item.name}}"><template is="dom-if" if="[[_checkLinearType(xAxisType)]]" on-dom-change="_xFormatterChanged" strip-whitespace=""><px-number-formatter id="xFormatter" class$="[[_ttStyle]]" format="[[numberFormat]]" culture="[[numberFormatCulture]]" currency$="[[numberFormatIsCurrency]]" default-currency-format="[[numberFormatCurrency]]" zero-format="[[numberFormatZero]]">&nbsp;</px-number-formatter>[[_xUnit]][[_slash]]</template><template is="dom-if" if="[[_isOfType(xAxisType, 'ordinal')]]" on-dom-change="_xSpanChanged" strip-whitespace=""><span id="xSpan">[[_itemX]]</span>[[_xUnit]][[_slash]]&nbsp;</template><template is="dom-if" if="[[_checkLinearType(yAxisType)]]" on-dom-change="_yFormatterChanged" strip-whitespace=""><px-number-formatter id="yFormatter" class$="[[_ttStyle]]" format="[[numberFormat]]" culture="[[numberFormatCulture]]" currency$="[[numberFormatIsCurrency]]" default-currency-format="[[numberFormatCurrency]]" zero-format="[[numberFormatZero]]">&nbsp;</px-number-formatter></template><template is="dom-if" if="[[_isOfType(yAxisType, 'ordinal')]]" on-dom-change="_ySpanChanged" strip-whitespace=""><span id="ySpan">[[_itemY]]</span></template>[[_yUnit]]</div></span></span><template id="menuTemplate" is="dom-if" if="[[_hasDynamicMenu]]"><px-vis-dynamic-menu id="menu" class$="[[_getDynamicMenuClass(type)]]" style="display: none" additional-detail="[[item]]" dynamic-menu-config="[[dynamicMenuConfig]]"></px-vis-dynamic-menu></template></span></template></dom-module><script>Polymer({is:'px-vis-register-item',behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.formatting,PxVisBehavior.completeSeriesConfig,PxVisBehavior.truncating,PxVisBehavior.mutedSeries,PxVisBehavior.axisTypes,PxVisBehaviorRegister.register,PxVisBehaviorRegister.itemShared,PxVisBehaviorRegister.generalItem,PxVisBehaviorRegister.disableClick],properties:{_xUnit:{type:String},_yUnit:{type:String},_itemX:{type:Number,notify:!1},_slash:{type:String},_itemY:{type:Number,notify:!1},_ttStyle:{type:String}},observers:['_toggleSeries(item,mutedSeries.*)','_disableClickFunc(disableClick)','_computeItem(item, completeSeriesConfig.*)'],_xFormatterChanged:function(){this.$.xFormatter=Polymer.dom(this.root).querySelector('#xFormatter'),this._computeItem(this.item,this.completeSeriesConfig)},_yFormatterChanged:function(){this.$.yFormatter=Polymer.dom(this.root).querySelector('#yFormatter'),this._computeItem(this.item,this.completeSeriesConfig)},_xSpanChanged:function(){this.$.xSpan=Polymer.dom(this.root).querySelector('#xSpan'),this._computeItem(this.item,this.completeSeriesConfig)},_ySpanChanged:function(){this.$.ySpan=Polymer.dom(this.root).querySelector('#ySpan'),this._computeItem(this.item,this.completeSeriesConfig)},_computeItem:function(a){this.hasUndefinedArguments(arguments)||this.debounce('numberFormatterValues',function(){if(this.completeSeriesConfig&&this.completeSeriesConfig[a.name]){var b=this.completeSeriesConfig[a.name].x,c=this.completeSeriesConfig[a.name].y;a.value&&(a.value[b]||0===a.value[b])?(this.$.xFormatter?this.$.xFormatter.set('value',a.value[b]):this.$.xSpan&&(this.$.xSpan.textContent=a.value[b]),this.set('_slash',' / '),this.set('_xUnit',this.completeSeriesConfig[a.name].xAxisUnit)):(this.$.xFormatter?this.$.xFormatter.set('value',null):this.$.xSpan&&(this.$.xSpan.textContent=null),this.set('_slash',''),this.set('_xUnit','')),a.value&&(a.value[c]||0===a.value[c])?(this.$.yFormatter?this.$.yFormatter.set('value',a.value[c]):this.$.ySpan&&(this.$.ySpan.textContent=a.value[c]),this.set('_yUnit',this.completeSeriesConfig[a.name].yAxisUnit)):(this.$.yFormatter?this.$.yFormatter.set('value',null):this.$.ySpan&&(this.$.ySpan.textContent=null),this.set('_yUnit',''))}},10)},_disableClickFunc:function(a){this.hasUndefinedArguments(arguments)||a&&this.unlisten(this.$.regWithoutMenu,'tap','_seriesClicked')},_calcDashPattern:function(a,b){if(!this.hasUndefinedArguments(arguments)){var c=b.split(',');if(!c||2>c.length)return'background-color:'+a;for(var d='to bottom',e=0;e<25;)for(var f=0;f<c.length;f++){var g=c[f],h=f%2?'transparent':a;d+=', '+h+' '+e+'px',e+=parseInt(g,10),d+=', '+h+' '+e+'px'}return'background:linear-gradient('+d+'); border-bottom: 1px solid '+a}},_checkLinearType:function(a){return this._isOfType(a,['linear','log'])}});</script></body></html>