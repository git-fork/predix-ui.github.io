<html><head><link rel="import" href="../px-moment-imports/px-moment-imports.html"><link rel="import" href="../app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-timeline-node-main.html"><link rel="import" href="css/px-timeline-styles.html"></head><body><dom-module id="px-timeline-node"><template><style include="px-timeline-styles"></style><div id="node-box" class="node flex flex--start flex--col"><template is="dom-if" if="{{showTimeGroups}}"><template is="dom-if" if="{{showDates}}"><div class="node__head flex flex--start"><div class$="node__head__icon flex flex--col flex--middle {{_getClass(enhanced)}}"><div class="node__head__icon__date flex"><span>[[_dateTitle]]</span></div><div class="node__head__icon__line--date"></div></div><div class="node__head__title flex flex--col flex--justify"></div></div></template></template><px-timeline-node-main id="node-head-icons" timeline-content="{{timelineContent}}" timeline-metadata="{{timelineMetadata}}" enhanced="{{enhanced}}" show-node-content="{{showNodeContent}}" show-line="{{showLine}}" show-content="{{showContent}}" hide-content="{{hideContent}}" formatted-editted-date="{{formattedEdittedDate}}" compact-editor-info="[[compactEditorInfo]]"></px-timeline-node-main></div></template></dom-module><script>Polymer({is:'px-timeline-node',behaviors:[Polymer.AppLocalizeBehavior],properties:{timelineMetadata:{type:Object,value:function(){return{}}},timelineContent:{type:Object,value:function(){return{}}},showNodeContent:{type:Boolean},showTimeGroups:{type:Boolean},nodeCount:{type:Number},showLine:{type:Boolean,value:!0},enhanced:{type:Boolean},dateFormat:{type:String,value:'hh:mm a, MMM D'},_dateTitle:{type:String},language:{type:String,value:'en'},timeZone:{type:String},useKeyIfMissing:{type:Boolean,value:!0},compactEditorInfo:{type:Boolean,value:!1},timeGroupsUsed:{type:Object}},observers:['_formatDate(dateFormat, timelineMetadata, timeZone)','_getDateTitle(timelineMetadata, localize, timeZone, showTimeGroups)'],_formatDate:function(){this.set('formattedEdittedDate',Px.moment.tz(this.timelineMetadata.editedDate,this.timeZone).format(this.dateFormat).toUpperCase())},_getDateTitle:function(a,b,c,d){if(a!==void 0&&b!==void 0&&c!==void 0&&d!==void 0){var e=Px.moment.tz(this.timelineMetadata.editedDate,this.timeZone),f=Px.moment.tz(this.timeZone),g=!1;f.isSame(e,'day')?!this.timeGroupsUsed.today&&(this.set('_dateTitle',this.localize('TODAY')),this.fire('px-timeline-timegroup-used-update',{key:'today'}),g=!0):f.isSame(e,'week')?!this.timeGroupsUsed.thisWeek&&(this.set('_dateTitle',this.localize('THIS WEEK')),this.fire('px-timeline-timegroup-used-update',{key:'thisWeek'}),g=!0):f.isSame(e,'month')?!this.timeGroupsUsed.thisMonth&&(this.set('_dateTitle',this.localize('THIS MONTH')),this.fire('px-timeline-timegroup-used-update',{key:'thisMonth'}),g=!0):f.isSame(e,'year')?!this.timeGroupsUsed.thisYear&&(this.set('_dateTitle',this.localize('THIS YEAR')),this.fire('px-timeline-timegroup-used-update',{key:'thisYear'}),g=!0):!this.timeGroupsUsed.lastYear&&(this.set('_dateTitle',this.localize('LAST YEAR')),this.fire('px-timeline-timegroup-used-update',{key:'lastYear'}),g=!0),this.set('showDates',g)}},ready:function(){this.timelineIndex===this.nodeCount-1&&(this.showLine=!1)},_getClass:function(){return this.enhanced?'enhanced':'simple'}});</script></body></html>