<html><head><link defer="" rel="import" href="../../bower_components/polymer/polymer.html"><link async="" rel="import" href="../../bower_components/promise-polyfill/promise-polyfill-lite.html"><script>(function(){'use strict';Polymer({is:'px-catalog-router',properties:{rawRoute:{type:Object,value:function(){return{}}},rawPath:{type:String,notify:!0,observer:'_cleanRawPath'},appPath:{type:Object,value:function(){return{}},notify:!0},appTail:{type:String,value:'',notify:!0},queryParams:{type:Object,notify:!0,value:function(){return{}}},activeName:{type:String,value:'',notify:!0},activeType:{type:String,value:'',notify:!0},frameUrl:{type:String,notify:!0},navJson:{type:Object,value:function(){return{}}},darkTheme:{type:Boolean}},observers:['_redirectOldQueryURLs(queryParams, queryParams.*)','_redirectModulePathURLs(appPath, appPath.*)','_handleActiveChange(activeName)','_updateFrameUrl(appPath, queryParams, appPath.*, queryParams.*, darkTheme)','_syncPathToActiveAttrs(appPath, appPath.*)'],attached:function(){this.async(function(){var a=this.rawPath||'';a.length||this.set('rawPath','/home/')},10)},_syncPathToActiveAttrs:function(a){a&&'object'===typeof a&&Object.keys(a).length&&this.debounce('sync-path-to-active-attrs',function(){var b=this.activeName||'',c=this.activeType||'';(a.name&&a.name!==b||a.type&&a.type!==c)&&(this.set('activeName',a.name),this.set('activeType',a.type))},10)},_handleActiveChange:function(){this.activeName&&this.activeName.length&&this.async(function(){var a=this.activeName,b=this.activeType,c=this.appPath.name||'',d=this.appPath.type||'';(a!==c||b!==d)&&this.set('appPath',{type:b,name:a})},10)},_findUrlByNameAndType:function(a,b,c,d){var e;if(a&&''!==a){e={elements:function(a){return'bower_components/'+a+'/demo/'+a+'-demo.html'},css:function(a){return'bower_components/'+a+'/demo/'+a+'-demo.html'},about:function(a){return'pages/about/'+a+'.html'},guides:function(a){return'pages/guides/'+a+'.html'},migration:function(a){return'pages/migration/'+a+'.html'},tools:function(a){return'pages/tools/'+a+'.html'},guidelines:function(a){return'pages/guidelines/'+a+'.html'},home:function(){return'pages/home.html'},external:function(a){return'https://github.com/predixdev/'+a}};var f=Object.keys(e);if(-1!==f.indexOf(a)){var g=e[a](b);return d&&'components'===a&&'px-vis'===b.slice(0,7)&&(g=g.slice(0,-5)+'-dark-theme.html'),g}}return e.home()},_updateFrameUrl:function(){this.debounce('update-frame-url',function(){var a,b=this.appPath||{},c=this.appTail||'',d=this.queryParams||{},e=b.type,f=b.name,g='/'===c.substring(0,1)?c.substring(1):c,h=this.darkTheme;(e||f)&&(a=this._findUrlByNameAndType(e,f,g,h),this.set('frameUrl',a))},10)},_extractQueryParamsFromHash:function(a){return new Promise(function(b){for(var c,d=a.split('/').filter(function(a){return a.length}),e=[],f=[],g=0;g<d.length;g++)if(c=d[g].indexOf('?'),-1<c){var h=d[g].substring(c+1),i=d[g].substring(0,c);i.length&&e.push(i),h.length&&f.push(h)}else e.push(d[g]);return b({path:e.join('/'),query:f.join('&')})}.bind(this))},_ensureHasSlashes:function(a){return a='/'===a.substring(0,1)?a:'/'+a,a='/'!==a.slice(-1)&&'.html'!==a.slice(-5)?a+'/':a,a},_parseQueryString:function(a){var b={};a=(a||'').replace(/\+/g,'%20');for(var c,d=a.split('&'),e=0;e<d.length;e++)c=d[e].split('='),c[0]&&(b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]||''));return b},_cleanRawPath:function(){this.debounce('clean-raw-path',function(){var a=this.rawPath||'',b=this._cleaningRawPath||!1;a.length&&!this.cleaning&&(this.set('_cleaningRawPath',!0),this._extractQueryParamsFromHash(a).then(function(a){var b=this._ensureHasSlashes(a.path);this.set('rawPath',b);var c=a.query.length?this._parseQueryString(a.query):{},d=this.queryParams||{},e=Object.assign({},c,d);Object.keys(e).length&&this.set('queryParams',e),this.set('_cleaningRawPath',!1)}.bind(this)))},100)},_redirectModulePathURLs:function(a){a&&'object'===typeof a&&Object.keys(a).length&&this.debounce('redirect-module-path-URLs',function(){var b=a.type||'',c=a.name||'';if('modules'===b){var d=this._searchNavForTypeByName(c);d&&this.set('appPath',{type:d,name:c})}else'components'===b&&this.set('appPath',{type:'elements',name:c})},1e3)},_redirectOldQueryURLs:function(a){a&&'object'===typeof a&&Object.keys(a).length&&this.debounce('redirect-old-query-URLs',function(){var b,c;a.type&&a.type.length&&(b=a.type),a.show&&a.show.length&&(c=a.show),b&&c&&('home'===b||'landing_page'===c)&&(b='home',c=''),b&&c&&'local'===b&&(c=c.replace(/_/g,'-'));var d={"what-is-predix-ui":'about',"getting-started":'guides',"use-css":'guides',"use-seed":'guides',"use-component-generator":'guides'},e=Object.keys(d);b&&c&&-1!==e.indexOf(c)&&(b=d[c]),b&&'component'===b&&(b='components'),(b||c)&&(this.set('queryParams',{}),this.set('appPath',{}),this.set('rawPath','/'+b+'/'+c))},100)},_searchNavForTypeByName:function(a){if(this.navJson&&'object'===typeof this.navJson&&Object.keys(this.navJson).length){var b,c=this.navJson,d=function(c){for(var e=Object.keys(c),f=0;f<e.length;f++)c[e[f]].repoName===a&&(b=c[e[f]]),c[e[f]].links&&c[e[f]].links.length&&d(c[e[f]].links)};return d(c),b?b.dataType:null}}})})();</script></head><body></body></html>