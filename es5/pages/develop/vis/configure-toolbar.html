<html><head><link defer="" rel="import" href="../../../bower_components/polymer/polymer.html"><link defer="" rel="import" href="../../../bower_components/px-demo/px-demo-footer.html"><link defer="" rel="import" href="../../../bower_components/px-demo/px-demo-footer.html"><link defer="" rel="import" href="../../../elements/px-catalog-page/px-catalog-page-behavior.html"><link defer="" rel="import" href="../../../elements/px-catalog-page/px-catalog-page-elements.html"><link defer="" rel="import" href="../../../css/px-catalog-page-styles.html"><link defer="" rel="import" href="../../../css/px-catalog-theme-styles.html"><link defer="" rel="import" href="../../../css/px-catalog-code-styles.html"><link defer="" rel="import" href="../../../bower_components/px-vis-timeseries/px-vis-timeseries.html"><link defer="" rel="import" href="../../../bower_components/px-modal/px-modal.html"><link defer="" rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html"></head><body><dom-module id="view-develop-vis-configure-toolbar"><template><style include="px-catalog-page-styles"></style><style include="px-catalog-code-styles"></style><style include="px-catalog-theme-styles"></style><div class="page"><div class="page-anchors" id="toc"><ul class="toc"><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#introduction', activeAnchor)]]" href="#" anchor="#introduction" on-tap="_handleAnchorTapped">Introduction</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#general-concept', activeAnchor)]]" href="#" anchor="#general-concept" on-tap="_handleAnchorTapped">General Concept</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#actionconfig', activeAnchor)]]" href="#" anchor="#actionconfig" on-tap="_handleAnchorTapped">actionConfig</a><ul class="toc"><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#predefined-actions', activeAnchor)]]" href="#" anchor="#predefined-actions" on-tap="_handleAnchorTapped">Predefined actions</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#custom-functions', activeAnchor)]]" href="#" anchor="#custom-functions" on-tap="_handleAnchorTapped">Custom functions</a></li></ul></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#toolbar-configurationcustomization', activeAnchor)]]" href="#" anchor="#toolbar-configurationcustomization" on-tap="_handleAnchorTapped">Toolbar Configuration/Customization</a><ul class="toc"><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#predefined-configurations', activeAnchor)]]" href="#" anchor="#predefined-configurations" on-tap="_handleAnchorTapped">Predefined configurations</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#predefined-configurations-2', activeAnchor)]]" href="#" anchor="#predefined-configurations-2" on-tap="_handleAnchorTapped">Predefined configurations</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#custom-configurations', activeAnchor)]]" href="#" anchor="#custom-configurations" on-tap="_handleAnchorTapped">Custom configurations</a></li></ul></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#examples', activeAnchor)]]" href="#" anchor="#examples" on-tap="_handleAnchorTapped">Examples</a><ul class="toc"><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#define-a-custom-toolbar-for-movign-a-chart-in-a-modal', activeAnchor)]]" href="#" anchor="#define-a-custom-toolbar-for-movign-a-chart-in-a-modal" on-tap="_handleAnchorTapped">Define a custom toolbar for movign a chart in a modal</a></li><li class="toc__item"><a class$="toc__item__link [[_getTocLinkClassName('#define-a-global-toolbar-driving-several-charts', activeAnchor)]]" href="#" anchor="#define-a-global-toolbar-driving-several-charts" on-tap="_handleAnchorTapped">Define a global toolbar driving several charts</a></li></ul></li></ul></div><div class="page-content"><h2 class="page-title">Using and configuring the toolbar</h2><h3 id="introduction">Introduction</h3><p>Each chart can embed a toolbar element which consists of a main row of items and an optional subrow of items. The subrow usually represents a context of an item of the main row, i.e clicking an item of the main row brings more options.</p><p><catalog-picture img-src="../../img/guidelines/dev/vis/configure-toolbar/toolbar" img-alt="toolbar subpart" style="border:none;" caption="Toolbar with the 'zoom' main item selected"></catalog-picture></p><p>In the picture above we can see a main row consisting of a "zoom" and "pan" items. The "zoom" item has been selected, hence displaying the associated subrow presenting a set of zooming options.</p><p>In general the toolbar is a highly customizable element aiming at providing ways for the user to drive the interaction on a chart. More abstractly it should be used to define actions relating to the whole context of a chart as opposed to a single series: zooming, panning, fetching new data, exporting as an image... The possibilities are endless.</p><p>If you are trying to provide your user with interaction and/or configuration relating more specifically to a single series please see the article on how to configure the registers dynamic menus.</p><h3 id="general-concept">General Concept</h3><p>Although the learning curve for configuring advanced features in the toolbar can be a bit steep the general concept is relatively simple: the toolbar defines an <code class="code code--inline">actionConfig</code> which is passed to the chart, which then passes it to the component handling user interaction on the chart. This component then uses this <code class="code code--inline">actionConfig</code> to defines what should happen on click, hover, mouseLeave... This user interaction component is:</p><ul><li>px-vis-interaction-space for Timeseries, XY and Polar</li><li>px-vis-axis-interaction-space for Parallel Coordinates and Radar (the <code class="code code--inline">actionConfig</code> will automatically trickle down through the multi axis and interactive axis element in this case)</li></ul><p>This also means that user interactions in Timeseries, XY and Polar can happen anywhere on the chart while it is limited to axes on Parallel Coordinates and Radar. The <code class="code code--inline">actionConfig</code> could also be passed directly to the chart rather than coming internally from the toolbar (see Global Toolbar further down in this article)</p><h3 id="actionconfig">actionConfig</h3><p><code class="code code--inline">actionConfig</code> is a core principle of how the interactions are going to be defined. It is an object where each key represents a user defined event to handle (on the appropriate interaction space) and each value either a string representing a predefined action or the custom function that should be run for that event.</p><h4 id="predefined-actions">Predefined actions</h4><p>The predefined actions available depend on the type of interaction space the chart is using. It can be found in the 'actionMapping' of the appropriate interaction space,</p><p>Predefined actions available in all interactions spaces:</p><ul><li><code class="code code--inline">calcTooltipData</code>: calculates tooltipData for the current cursor position, based on the type</li><li><code class="code code--inline">calcCrosshairData</code>: similar to calcTooltipData but for the crosshairData</li><li><code class="code code--inline">calcTooltipAndCrosshairData</code>: calcTooltipData + calcCrosshairData</li><li><code class="code code--inline">resetTooltipAndCrosshairData</code>: resets both the tooltipData and crosshairData to an empty object</li><li><code class="code code--inline">resetTooltip</code>: resets the tooltipData to an empty object</li><li><code class="code code--inline">resetCrosshair</code>: resets the crosshairData to an empty object</li></ul><p>Predefined actions only available in px-vis-interaction-space:</p><ul><li><code class="code code--inline">startZooming</code>: starts drawing the zooming box</li><li><code class="code code--inline">stopZooming</code>: stops drawing the zooming box and calculate the new extents based on the box (effectively zooming)</li><li><code class="code code--inline">startPanning</code>: starts panning, while automatically binding a panning update on mouse move</li><li><code class="code code--inline">stopPanning</code>: stops panning and removes the panning update binding on mousemove</li><li><code class="code code--inline">reportMouseCoords</code>: fires a <code class="code code--inline">px-vis-interaction-space-mouse-coords</code> event with the current mouse coordinates</li></ul><p>Predefined actions only available in px-vis-axis-interaction-space:</p><ul><li><code class="code code--inline">callAxisBrush</code>: toggles brushing process on an axis, automatically updating the brush on mousemove. Typically called on both mousedown and mouseup to start/stop the brushing process</li><li><code class="code code--inline">callAxisDrag</code>: toggles dragging process on an axis, automatically updating the drag on mousemove. Typically called on both mousedown and mouseup to start/stop dragging and axis.</li></ul><p>For example given those actions the default <code class="code code--inline">actionConfig</code> for px-vis-interaction-space is:</p><pre class="code-block"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token string">'mousedown'</span><span class="token punctuation">:</span> <span class="token string">'startZooming'</span><span class="token punctuation">,</span>
  <span class="token string">'mouseup'</span><span class="token punctuation">:</span> <span class="token string">'stopZooming'</span><span class="token punctuation">,</span>
  <span class="token string">'mouseout'</span><span class="token punctuation">:</span> <span class="token string">'resetTooltip'</span><span class="token punctuation">,</span>
  <span class="token string">'mousemove'</span><span class="token punctuation">:</span> <span class="token string">'calcTooltipData'</span>
<span class="token punctuation">}</span>
</code></pre><p>This means that by default the interaction is the zoom box on click and calculating the tooltipData when moving the cursor over the chart. We reset the tooltipData when the mouse leaves the chart so that the register becomes empty instead of showing the last value.</p><h4 id="custom-functions">Custom functions</h4><p>When running a custom function this function will be executed in the context of the chart: in your handler <code class="code code--inline">this</code> will be the chart. The handler will have one parameter which currently is an array holding the X and Y mouse coordinates relative to the interaction space target: the whole drawing space for px-vis-interaction-space and a specific axis for px-vis-axis-interaction-space.</p><p>In the latest release (vis 2.1 at this time) this parameter is an object with two keys:</p><ul><li><code class="code code--inline">mouseCoords</code>: holds the same value as in the previous version.</li><li><code class="code code--inline">target</code>: holds the element against which the the mouse coordinates are expressed.</li></ul><p>Using this two values it is possible to retrieve the data values of a click rather than the pixel values, for example a click handler for px-vis-interaction-space could look like:</p><pre class="code-block"><code class="language-js">handler<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//using the X scale of the chart to convert pixel values to</span>
  xValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>mouseCoords<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Assuming there's only 1 Y axis and we are in XY or timeseries. Otherwise you'll have to decide</span>
  <span class="token comment">//against which axis this value should be calculated</span>
  yValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">[</span><span class="token string">'defaultAxis'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>mouseCoords<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="toolbar-configurationcustomization">Toolbar Configuration/Customization</h3><p>The toolbar configuration dictates what items are present in the main row, what subrow is defined for each main item and what happens when clicking on a main item or a sub item. It can be passed at the chart level through the 'config' key in 'toolbarConfig':</p><pre class="code-block"><code class="language-js">toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'config'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Each key of this 'config' object represents a new main item with each value being the configuration for this item (including the related subrow and subitems).</p><h4 id="predefined-configurations">Predefined configurations</h4><p>A set of predefined main items already exists in the toolbar and can be used by passing those as keys with a value of 'true':</p><ul><li><code class="code code--inline">axisBrush</code>: single main item allowing brushing on axis (parallel coordinates and radar)</li><li><code class="code code--inline">axisDrag</code>: single main item allowing dragging an axis (parallel coordinates and radar)</li><li><code class="code code--inline">crosshair</code>: single main item enabling the crosshair search on the chart</li><li><code class="code code--inline">crosshairWithOptions</code>: main item enabling the crosshair search on the chart. Defines a subrow with different options for crosshair search: closest point, point per series and points in area. Also includes two buttons to increase and decrease the search radius</li><li><code class="code code--inline">tooltip</code>: single main item enabling the tooltip search as well as ensuring an internal flag for showing tooltip is on (other predefined configurations automatically turn off that flag so that only this items allows the tooltip to show, but other configurations can still allow for tooltipData to be calculated for register use)</li><li><code class="code code--inline">pan</code>: main item enabling panning on the chart. Also defines a single sub row item that resets the chart extents to fir the current dataset</li><li><code class="code code--inline">zoom</code>: main item enabling zooming on the chart. Also defines the following subrow items: zoom in, zoom out, undo last zoom and reset zoom</li><li><code class="code code--inline">advancedZoom</code>: same config as 'zoom' plus the following subrow items: zoom only on X, zoom only on Y, zoom on both X and Y</li><li><code class="code code--inline">stripe</code>: main item enabling striping feature. Also defines four sub row items: inclusion and exclusion striping type + add and remove</li></ul><h4 id="predefined-configurations-2">Predefined configurations</h4><p>A predefined configuration can be extended if needed by using one of the predefined configuration key and passing extra configuration as the value (see Custom configurations for more info on what configuration can be added). This way it is possible to add more buttons to an existing predefined configuration.</p><h4 id="custom-configurations">Custom configurations</h4><p>When using a custom configuration make sure each key of your 'config' object is unique and different from the one used in the predefined configurations.</p><ul><li><code class="code code--inline">icon</code>: font awesome icon to display to represent the item</li><li><code class="code code--inline">title</code>: text representing the item, usually use this or the 'icon' property</li><li><code class="code code--inline">cursorIcon</code>: font awesome icon to display next to the cursor when hovering the interaction space target</li><li><code class="code code--inline">tooltipLabel</code>: text in the tooltip when hovering the item</li><li><code class="code code--inline">selectable</code>: whether this item is selectable, meaning that it will turn blue when clicked on. Usually used to indicate that some kind of mode has been enabled (i.e zoom only on Y) as opposed to a one time action (i.e zoom in)</li><li><code class="code code--inline">selected</code>: if selectable whether the item should be selected at first</li><li><code class="code code--inline">buttonGroup</code>: number, mandatory when selectable. In each row all items with the same buttonGroup are "mutually exclusive" in terms of selection, so only the last item selected for a buttonGroup will be selected, the other ones will be automatically deselected</li><li><code class="code code--inline">onClick</code>: function to run when clicking this item. The function will be run in the context of the chart unless 'onClickContext' is set to "toolbar". It will have one parameter containing the configuration relating to this item</li><li><code class="code code--inline">onClickContext</code>: can be set to "toolbar" to run the 'onClick' function in the context of the toolbar instead of the chart</li><li><code class="code code--inline">eventName</code>: if set an event named with this string will be fired when clicking this item. It will contain the configuration for this item</li><li><code class="code code--inline">actionConfig</code>: the action config to set on the interaction space when clicking this item. Don't forget that you might want to reset some handlers that might have been set by another item (set them to null)</li></ul><p>In addition a main item may have a 'subConfig' object defining all the sub items configurations, the global structure of the 'config' object becoming:</p><pre class="code-block"><code class="language-js">config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'yourMainItem1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//set of properties you set for your item</span>
    <span class="token string">'subConfig'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'yourSubItem1'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//set of properties for sub item 1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">'yourSubItem2'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//set of properties for sub item 2</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>the predefined configurations use the exact same pattern, the following code illustrates how the advancedZoom predefined configuration is defined internally:</p><pre class="code-block"><code class="language-json">'advancedZoom'<span class="token operator">:</span> <span class="token punctuation">{</span>
  'tooltipLabel'<span class="token operator">:</span> 'Zoom'<span class="token punctuation">,</span>
  'icon'<span class="token operator">:</span> 'px-nav<span class="token operator">:</span>search'<span class="token punctuation">,</span>
  'cursorIcon'<span class="token operator">:</span> 'px-nav<span class="token operator">:</span>search'<span class="token punctuation">,</span>
  'buttonGroup'<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  'selectable'<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  'onClick'<span class="token operator">:</span> 'function(<span class="token punctuation">)</span> <span class="token punctuation">{</span>this.set(<span class="token string">"_internalShowTooltip"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> this.set(<span class="token string">"extentsAction"</span><span class="token punctuation">,</span> <span class="token string">"zoom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>'<span class="token punctuation">,</span>
  'actionConfig'<span class="token operator">:</span> <span class="token punctuation">{</span>
    'mousedown'<span class="token operator">:</span> 'startZooming'<span class="token punctuation">,</span>
    'mouseup'<span class="token operator">:</span> 'stopZooming'
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  'subConfig'<span class="token operator">:</span> <span class="token punctuation">{</span>
    'x'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'title'<span class="token operator">:</span> 'X'<span class="token punctuation">,</span>
      'buttonGroup'<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Zoom on X axis only'<span class="token punctuation">,</span>
      'eventName'<span class="token operator">:</span> 'my-custom-click'<span class="token punctuation">,</span>
      'selectable'<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      'onClick'<span class="token operator">:</span> 'function(<span class="token punctuation">)</span> <span class="token punctuation">{</span> this.set(<span class="token string">"selectionType"</span><span class="token punctuation">,</span> <span class="token string">"xAxis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'y'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'title'<span class="token operator">:</span> 'Y'<span class="token punctuation">,</span>
      'buttonGroup'<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Zoom on Y axis only'<span class="token punctuation">,</span>
      'selectable'<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      'onClick'<span class="token operator">:</span> 'function(<span class="token punctuation">)</span> <span class="token punctuation">{</span> this.set(<span class="token string">"selectionType"</span><span class="token punctuation">,</span> <span class="token string">"yAxis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'xy'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'title'<span class="token operator">:</span> 'XY'<span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Zoom on X and Y axis'<span class="token punctuation">,</span>
      'buttonGroup'<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      'selectable'<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      'onClick'<span class="token operator">:</span> 'function(<span class="token punctuation">)</span> <span class="token punctuation">{</span> this.set(<span class="token string">"selectionType"</span><span class="token punctuation">,</span> <span class="token string">"xy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'zoomIn'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'icon'<span class="token operator">:</span> 'px-utl<span class="token operator">:</span>add'<span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Zoom in'<span class="token punctuation">,</span>
      'eventName'<span class="token operator">:</span> 'px-vis-toolbar-zoom-in'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'zoomOut'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'icon'<span class="token operator">:</span> 'px-utl<span class="token operator">:</span>remove'<span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Zoom out'<span class="token punctuation">,</span>
      'eventName'<span class="token operator">:</span> 'px-vis-toolbar-zoom-out'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'undoZoom'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'icon'<span class="token operator">:</span> 'px-utl<span class="token operator">:</span>reply'<span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Undo zoom'<span class="token punctuation">,</span>
      'eventName'<span class="token operator">:</span> 'px-vis-toolbar-undo-zoom'
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    'resetZoom'<span class="token operator">:</span> <span class="token punctuation">{</span>
      'icon'<span class="token operator">:</span> 'px-nav<span class="token operator">:</span>expand'<span class="token punctuation">,</span>
      'tooltipLabel'<span class="token operator">:</span> 'Reset zoom'<span class="token punctuation">,</span>
      'eventName'<span class="token operator">:</span> 'px-vis-toolbar-reset-zoom'
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="examples">Examples</h3><h4 id="define-a-custom-toolbar-for-movign-a-chart-in-a-modal">Define a custom toolbar for movign a chart in a modal</h4><p>Scenario: you have a set of small non interactive charts in your app so that your user can quickly parse a lot of information. Once the user decides to investigate a chart it should be maximized and interaction allowed.</p><p>For this scenario we'll use px-modal and two toolbar configuration. The idea is that when the chart is in "small mode" it will use a toolbar configuration with just one button. When this button is clicked the chart will be moved into the px-modal and get a new toolbar configuration with different interactions:</p><pre class="code-block"><code class="language-js">smallModallModeConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"config"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"expand"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"icon"</span><span class="token punctuation">:</span> <span class="token string">"px-nav:expand"</span><span class="token punctuation">,</span>
      <span class="token string">"onClick"</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//remove chart from current page, holder is the current parent of the chart</span>
        holder<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//set new toolbar config for interaction</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'toolbarConfig'</span><span class="token punctuation">,</span> modalConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//make the chart bigger and adjust given this website left and top menu/banner</span>
        <span class="token keyword">var</span> w <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> h <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> w <span class="token operator">-</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> h <span class="token operator">-</span> <span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//append chart in modal</span>
        Polymer<span class="token punctuation">.</span><span class="token function">dom</span><span class="token punctuation">(</span>modal<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//open modal</span>
        modal<span class="token punctuation">.</span><span class="token function">modalButtonClicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><pre class="code-block"><code class="language-js">modalConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"config"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"advancedZoom"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">"pan"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">"tooltip"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>We then listen on the px-modal for a close event and move back the chart where it initially was and restore the toolbar to the one item configuration:</p><pre class="code-block"><code class="language-js">modal<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'btnModalNegativeClicked'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//remove chart from modal</span>
  Polymer<span class="token punctuation">.</span><span class="token function">dom</span><span class="token punctuation">(</span>modal<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//restore "small mode" toolbar config</span>
  chart<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'toolbarConfig'</span><span class="token punctuation">,</span> smallModeConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//restore chart size</span>
  chart<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">550</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//ensure we "clean" the sub row</span>
  chart<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'toolbarSubConfig'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//move chart back to the page</span>
  holder<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This example is implemented below. We try to fit the modal in the available space, this is a crude approach and a lot more could be done.</p><div><iron-ajax url="[[importPath]]configure-toolbar_data.json" handle-as="json" auto="" last-response="{{data}}"></iron-ajax><px-modal id="modal" btn-modal-negative="Cancel"></px-modal><div id="holder"><px-vis-timeseries id="chart" width="550" height="200" chart-data="[[data]]" series-config="{
        &quot;y0&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y0&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y1&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y1&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y2&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y2&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y3&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y3&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1}}" margin="{&quot;left&quot;:0,&quot;right&quot;:0,&quot;top&quot;:0,&quot;bottom&quot;:0}" x-axis-config="{&quot;ticks&quot;:3}" navigator-config="{&quot;xAxisConfig&quot;:{&quot;ticks&quot;:3}}"></px-vis-timeseries></div></div><h4 id="define-a-global-toolbar-driving-several-charts">Define a global toolbar driving several charts</h4><p>Scenario: have a single place that defines what interaction should be currently used on a set of charts.</p><p>In this scenario we will use a px-vis-toolbar outside of the charts. This toolbar will define an <code class="code code--inline">actionConfig</code> as well as a <code class="code code--inline">toolbarSubConfig</code> which will be passed to each chart. The action config will define the interaction and the secondary toolbar will dictate what what secondary toolbar to show: for example when clicking the zoom main item on the global toolbar then it can pass down the set of zooming options to each chart so that each chart would be in zoom mode but the user can still independently choose which zooming options to use on each chart.</p><p>The external toolbar code is:</p><pre class="code-block"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>px-vis-toolbar</span>
  <span class="token attr-name">current-sub-config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<span></span>{toolbarSubConfig}<span></span>}<span class="token punctuation">"</span></span>
  <span class="token attr-name">action-config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<span></span>{actionConfig}<span></span>}<span class="token punctuation">"</span></span>
  <span class="token attr-name">horizontal-alignment</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>toolbar<span class="token punctuation">"</span></span>
  <span class="token attr-name">config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>{
    <span class="token punctuation">"</span>advancedZoom<span class="token punctuation">"</span>: true,
    <span class="token punctuation">"</span>pan<span class="token punctuation">"</span>: true,
    <span class="token punctuation">"</span>tooltip<span class="token punctuation">"</span>: true
  }<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>px-vis-toolbar</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>And all the two charts needs in terms of extra attributes are:</p><pre class="code-block"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>px-vis-...</span>
  <span class="token attr-name">toolbar-config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>{ <span class="token punctuation">"</span>config<span class="token punctuation">"</span>: {} }<span class="token punctuation">'</span></span>
  <span class="token attr-name">toolbar-sub-config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>[<span></span>[toolbarSubConfig]<span></span>]<span class="token punctuation">"</span></span>
  <span class="token attr-name">action-config</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>[<span></span>[actionConfig]<span></span>]<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>px-vis-...</span><span class="token punctuation">&gt;</span></span>
</code></pre><div><px-vis-toolbar current-sub-config="{{toolbarSubConfig}}" action-config="{{actionConfig}}" horizontal-alignment="left" id="toolbar" config="{
      &quot;advancedZoom&quot;: true,
      &quot;pan&quot;: true,
      &quot;tooltip&quot;: true
    }"></px-vis-toolbar><div id="holder"><px-vis-timeseries id="chart2" class="flex__item" chart-data="[[data]]" height="200" toolbar-config="{ &quot;config&quot;: {}}" toolbar-sub-config="[[toolbarSubConfig]]" action-config="[[actionConfig]]" register-config="{ &quot;type&quot;: &quot;horizontal&quot;}" render-to-canvas="" series-config="{
        &quot;y0&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y0&quot;,&quot;type&quot;:&quot;scatter&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y1&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y1&quot;,&quot;type&quot;:&quot;scatter&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;square&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y2&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y2&quot;,&quot;type&quot;:&quot;scatter&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;diamond&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
        &quot;y3&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y3&quot;,&quot;type&quot;:&quot;scatter&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;wye&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1}}" margin="{&quot;left&quot;:0,&quot;right&quot;:0,&quot;top&quot;:0,&quot;bottom&quot;:0}" x-axis-config="{&quot;ticks&quot;:3}" navigator-config="{&quot;xAxisConfig&quot;:{&quot;ticks&quot;:3}, &quot;height&quot;:75}"></px-vis-timeseries><div style="margin-top: 20px;"><px-vis-timeseries id="chart3" class="flex__item" chart-data="[[data]]" height="200" toolbar-config="{ &quot;config&quot;: {}}" toolbar-sub-config="[[toolbarSubConfig]]" action-config="[[actionConfig]]" register-config="{ &quot;type&quot;: &quot;horizontal&quot;}" render-to-canvas="" series-config="{
          &quot;y0&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y0&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
          &quot;y1&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y1&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
          &quot;y2&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y2&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1},
          &quot;y3&quot;:{&quot;x&quot;:&quot;timeStamp&quot;,&quot;y&quot;:&quot;y3&quot;,&quot;type&quot;:&quot;line&quot;,&quot;yAxisUnit&quot;:&quot;u&quot;,&quot;xAxisUnit&quot;:&quot;u&quot;,&quot;markerSize&quot;:64,&quot;markerSymbol&quot;:&quot;circle&quot;,&quot;markerScale&quot;:1,&quot;markerFillOpacity&quot;:0.6,&quot;markerStrokeOpacity&quot;:1}}" margin="{&quot;left&quot;:0,&quot;right&quot;:0,&quot;top&quot;:0,&quot;bottom&quot;:0}" x-axis-config="{&quot;ticks&quot;:3}" navigator-config="{&quot;xAxisConfig&quot;:{&quot;ticks&quot;:3}, &quot;height&quot;:75}"></px-vis-timeseries></div></div></div></div></div><px-demo-footer></px-demo-footer></template><script>Polymer({is:'view-develop-vis-configure-toolbar',behaviors:[PxCatalogBehavior.Page],_dynamicTheme:!0,ready:function(){this._dynamicTheme&&this.setAttribute('dynamic-theme','');var a=Polymer.dom(this.root).querySelector('#modal'),b=Polymer.dom(this.root).querySelector('#holder'),c=Polymer.dom(this.root).querySelector('#chart'),d={config:{advancedZoom:!0,pan:!0,tooltip:!0}},e={config:{expand:{icon:'px-nav:expand',onClick:function(){var c=Math.max;b.removeChild(this),this.set('toolbarConfig',d);var e=c(document.documentElement.clientWidth,window.innerWidth||0),f=c(document.documentElement.clientHeight,window.innerHeight||0);this.set('width',e-360),this.set('height',f-350),Polymer.dom(a).appendChild(this),a.modalButtonClicked()}}}};c.set('toolbarConfig',e),a.addEventListener('btnModalNegativeClicked',function(){Polymer.dom(a).removeChild(c),c.set('toolbarConfig',e),c.set('width',550),c.set('height',200),c.set('toolbarSubConfig',[]),b.appendChild(c)})}});</script></dom-module></body></html>