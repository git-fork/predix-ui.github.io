<html><head><link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../../bower_components/promise-polyfill/promise-polyfill-lite.html"><link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../../bower_components/iron-doc-viewer/iron-doc-property.html"><link rel="import" href="../../bower_components/iron-doc-viewer/iron-doc-function.html"><link rel="import" href="../../css/px-catalog-page-styles.html"><link rel="import" href="../../css/px-catalog-api-search-styles.html"><script src="lunr.js"></script></head><body><dom-module id="px-catalog-api-search"><template><style include="px-catalog-page-styles"></style><style include="px-catalog-api-search-styles"></style><style>.api-results__element{margin-top:4rem;padding-top:.5rem;}.api-results__element:first-of-type{margin-top:2rem;}</style><iron-ajax id="lunrIndexAjax" url="[[rootPath]]/data/lunr-index.json" last-response="{{lunrIndex}}"></iron-ajax><iron-ajax id="lunrSourceAjax" url="[[rootPath]]/data/lunr-source.json" last-response="{{lunrSource}}"></iron-ajax><div class="beta-banner">This tool is currently in beta. The results might not include all documented APIs. Check the component page if you can't find something you're looking for.</div><section class="page"><h2 class="selected">API Search</h2><input type="text" class="text-input" placeholder="Enter a property, method, or event to search all APIs..." value="{{_searchTerm::input}}"><div class="api-results"><template is="dom-if" if="[[_results]]"><p class="api-results__count">Found [[_results.entriesCount]] matches in [[_results.elementsCount]] components.</p></template><template is="dom-repeat" items="[[_results.elements]]" as="element"><div class="api-results__element"><p class="api-results__element__name heading--section">[[element.name]]</p><template is="dom-if" if="[[_any(element.property)]]"><p class="heading--subsection">Properties</p><template is="dom-repeat" items="[[element.property]]" as="property"><iron-doc-property descriptor="[[property.descriptor]]"></iron-doc-property></template></template><template is="dom-if" if="[[_any(element.method)]]"><p class="heading--subsection">Methods</p><template is="dom-repeat" items="[[element.method]]" as="method"><iron-doc-function descriptor="[[method.descriptor]]"></iron-doc-function></template></template><template is="dom-if" if="[[_any(element.event)]]"><p class="heading--subsection">Events</p><template is="dom-repeat" items="[[element.event]]" as="event"><iron-doc-property descriptor="[[event.descriptor]]"></iron-doc-property></template></template></div></template></div></section></template><script>Polymer({is:'px-catalog-api-search',properties:{lunrIndex:{type:Object,observer:'_handleLunrIndexLoaded'},_lunr:{type:Object},lunrSource:{type:Object},_searchTerm:{type:String,value:''},_results:{type:Array}},observers:['_findMatches(_lunr, lunrSource, _searchTerm)'],attached:function(){this.$.lunrIndexAjax.generateRequest(),this.$.lunrSourceAjax.generateRequest()},_handleLunrIndexLoaded:function(a){a&&(this._lunr=lunr.Index.load(a))},_findMatches:function(a,b,c){a===void 0||b===void 0||c===void 0||this.debounce('find-matches',function(){var d=a.search(c).slice(0,100),e=d.map(function(a){return b.documents[b.index[a.ref]]});this._results=this._groupByElement(e)},100)},_itIs:function(c,a){return c===a},_any:function(a){return Array.isArray(a)&&0<a.length},_groupByElement:function(a){var b=a.reduce(function(a,b){var c=a.index[b.component];if('number'===typeof c)return a.elements[c][b.type].push(b),a;var d=a.elements.push({name:b.component,method:[],property:[],event:[]}),e=a.index[b.component]=d-1;return a.elements[e][b.type].push(b),a},{elements:[],index:{}});return b.elementsCount=b.elements.length,b.entriesCount=a.length,b}});</script></dom-module></body></html>