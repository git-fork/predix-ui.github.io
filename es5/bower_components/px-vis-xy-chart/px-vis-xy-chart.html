<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-vis/px-vis-behavior-common.html"><link rel="import" href="../px-vis/px-vis-behavior-d3.html"><link rel="import" href="../px-vis/px-vis-behavior-renderer.html"><link rel="import" href="../px-vis/px-vis-behavior-chart.html"><link rel="import" href="../px-vis/px-vis-behavior-scale.html"><link rel="import" href="../px-vis/px-vis-svg-canvas.html"><link rel="import" href="../px-vis/px-vis-scatter.html"><link rel="import" href="../px-vis/px-vis-scatter-canvas.html"><link rel="import" href="../px-vis/px-vis-line-canvas.html"><link rel="import" href="../px-vis/px-vis-line-svg.html"><link rel="import" href="../px-vis/px-vis-axis.html"><link rel="import" href="../px-vis/px-vis-multi-axis.html"><link rel="import" href="../px-vis/px-vis-tooltip.html"><link rel="import" href="../px-vis/px-vis-interaction-space.html"><link rel="import" href="../px-vis/px-vis-register.html"><link rel="import" href="../px-vis/px-vis-cursor.html"><link rel="import" href="../px-vis/px-vis-clip-path.html"><link rel="import" href="../px-vis/px-vis-event.html"><link rel="import" href="../px-vis/px-vis-gridlines.html"><link rel="import" href="../px-vis/px-vis-toolbar.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../px-vis/px-vis-highlight-point.html"><link rel="import" href="../px-vis/px-vis-highlight-point-canvas.html"><link rel="import" href="../px-vis/px-vis-annotations.html"><link rel="import" href="css/px-vis-xy-chart-styles.html"></head><body><dom-module id="px-vis-xy-chart"><template><style include="px-vis-xy-chart-styles"></style><div id="wrapper" class$="{{_chartWrapperClass}}"><div class$="{{_registerWrapperClass}} safari-flex-fix"><px-vis-register id="register" class$="{{_getHideClass(hideRegister)}}" height="[[_verticalRegisterHeight]]" dynamic-menu-config="[[dynamicMenuConfig]]" tooltip-data="[[tooltipData]]" chart-data="[[_filteredData]]" complete-series-config="[[completeSeriesConfig]]" muted-series="{{mutedSeries}}" type="{{_registerType}}" x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]"></px-vis-register><div id="drawingWrapper" class="flex--col inline--flex"><px-vis-toolbar id="toolbar" current-sub-config="[[toolbarSubConfig]]" action-config="{{actionConfig}}" within-chart="" chart-margin="[[_internalMargin]]" show-tooltip="{{_internalShowTooltip}}" config="{&quot;zoom&quot;: true, &quot;pan&quot;: true, &quot;tooltip&quot;: true}"></px-vis-toolbar><px-vis-tooltip id="tooltip" tooltip-data="[[tooltipData]]" chart-data="[[_filteredData]]" muted-series="[[mutedSeries]]" x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]" complete-series-config="[[completeSeriesConfig]]" mouse-position="[[mousePosition]]" hover-target="[[mouseRect]]" tooltip-style="light" hard-mute="[[hardMute]]" series-keys="[[_seriesKeys]]"></px-vis-tooltip><px-vis-svg-canvas class="inline--flex" id="svg" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" canvas-context="{{canvasContext}}" canvas-layers="{{canvasLayers}}" canvas-layers-config="[[canvasLayersConfig]]" svg="{{svg}}" px-svg-elem="{{pxSvgElem}}" svg-lower="{{svgLower}}" px-svg-elem-lower="{{pxSvgElemLower}}"><px-vis-annotations slot="4" svg="[[svg]]" x="[[x]]" y="[[y]]" margin="[[_internalMargin]]" domain-changed="[[domainChanged]]" complete-series-config="[[completeSeriesConfig]]" annotation-data="[[annotationData]]" show-strong-icon="[[showStrongIcon]]"></px-vis-annotations></px-vis-svg-canvas></div><px-vis-clip-path svg="[[layer.1]]" x="[[x]]" y="[[y]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" clip-path="{{clipPath}}" series-clip-path-y-offset="-5" series-clip-path="{{seriesClipPath}}"></px-vis-clip-path><template is="dom-repeat" items="[[_seriesKeys]]"><template is="dom-if" if="[[_chartTypeScatter(item, completeSeriesConfig)]]" restamp=""><template is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-scatter-canvas canvas-context="[[canvasContext]]" series-id="[[item]]" chart-data="[[_filteredData]]" renderer-type="filteredChartData" complete-series-config="[[completeSeriesConfig]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" clip-path="" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-scatter-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-scatter svg="[[layer.1]]" series-id="[[item]]" chart-data="[[_filteredData]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]" clip-path="[[seriesClipPath]]" complete-series-config="[[completeSeriesConfig]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-scatter></template></template><template is="dom-if" if="[[_chartTypeLine(item, completeSeriesConfig)]]" restamp=""><template is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-line-canvas id="lineCanvas" canvas-context="[[canvasContext]]" renderer-type="filteredChartData" series-id="[[item]]" chart-data="[[_filteredData]]" complete-series-config="[[completeSeriesConfig]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" domain-changed="[[domainChanged]]" show-gaps="[[showGaps]]" muted-series="[[mutedSeries]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" clip-path="" interpolation-function="[[interpolationFunction]]" stroke-width="[[_returnStrokeWidth(item, completeSeriesConfig)]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-line-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-line-svg svg="[[layer.1]]" series-id="[[item]]" chart-data="[[_filteredData]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" show-gaps="[[showGaps]]" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]" clip-path="[[seriesClipPath]]" complete-series-config="[[completeSeriesConfig]]" interpolation-function="[[interpolationFunction]]" stroke-width="[[_returnStrokeWidth(item, completeSeriesConfig)]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-line-svg></template></template></template><px-vis-cursor id="cursor" svg="[[layer.2]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" chart-data="[[_filteredData]]" tooltip-data="[[tooltipData]]" complete-series-config="[[completeSeriesConfig]]" clip-path="[[seriesClipPath]]" muted-series="[[mutedSeries]]" hard-mute="[[hardMute]]" series-keys="[[_seriesKeys]]"></px-vis-cursor></div><px-vis-axis id="xAxis" svg="[[layer.0]]" axis-type="[[xAxisType]]" axis="[[x]]" height="[[height]]" width="[[width]]" margin="[[_internalMargin]]" orientation="bottom" complete-series-config="[[completeSeriesConfig]]" prevent-series-bar="" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]"></px-vis-axis><px-vis-multi-axis id="yAxes" svg="[[layer.0]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" left-axis-size="[[leftAxisSize]]" right-axis-size="[[rightAxisSize]]" x="[[_axisX]]" y="[[y]]" domain-changed="[[_bothDomainsSet(_axisDomainChanged, domainChanged)]]" complete-series-config="[[_multiAxisSeriesConfig]]" chart-data="[[chartData]]" dimensions="[[dimensions]]" axes="[[axes]]" axis-config="[[yAxisConfig]]" append-unit-in-title="" orientation-from-dimensions="" disable-brush="" cartesian-drag-behavior="" allow-empty-title="" series-to-axes="[[seriesToAxes]]" muted-series="[[mutedSeries]]" action-config="[[_axisActionConfig]]"></px-vis-multi-axis><template is="dom-if" if="[[!hideGridlinesX]]" restamp=""><px-vis-gridlines svg="[[svgLower]]" axis="[[x]]" margin="[[_internalMargin]]" length="[[height]]" orientation="bottom" domain-changed="[[domainChanged]]"></px-vis-gridlines></template><template is="dom-if" if="[[_showHorizontalGrid(hideGridlinesY, axes, y, matchTicks)]]" restamp=""><px-vis-gridlines svg="[[svgLower]]" axis="[[_returnGridAxis(domainChanged)]]" margin="[[_internalMargin]]" length="[[width]]" orientation="left" domain-changed="[[domainChanged]]"></px-vis-gridlines></template><px-vis-interaction-space id="interactionSpace" svg="[[layer.3]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" use-quadtree="" series-keys="[[_seriesKeys]]" chart-data="[[_filteredData]]" chart-id="[[chartId]]" tooltip-data="{{tooltipData}}" crosshair-data="{{crosshairData}}" default-empty-data="[[defaultEmptyData]]" generating-crosshair-data="{{generatingCrosshairData}}" extents-data="{{extentsData}}" x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]" complete-series-config="[[completeSeriesConfig]]" mouse-rect="{{mouseRect}}" time-data="[[timeData]]" action-config="{{actionConfig}}" show-tooltip="{{_computedShowTooltip}}" selection-type="[[selectionType]]" prevent-web-worker-synchronization="[[preventWebWorkerSynchronization]]" ww-data-sync-counter="[[wwDataSyncCounter]]" extents-action="{{extentsAction}}" hard-mute="[[hardMute]]" muted-series="[[mutedSeries]]" log-base="[[logBase]]"></px-vis-interaction-space><template is="dom-repeat" items="[[eventData]]"><px-vis-event svg="[[layer.0]]" event-id="[[item.id]]" event-data="[[item]]" height="[[height]]" margin="[[_internalMargin]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" event-config="[[eventConfig]]" clip-path="[[clipPath]]" resources="[[resources]]" language="[[language]]" formats="[[formats]]"></px-vis-event></template></div><template id="highlighterDomIf" is="dom-if" if="[[renderToCanvas]]" restamp="" on-dom-change="_highlighterConfigChanged"><px-vis-highlight-point-canvas id="highlighterCanvas" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" canvas-context="[[canvasLayers.highlighter]]" canvas-layers-config="{{canvasLayersConfig}}" layers-to-mask="[[canvasContext]]" clip-path="" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" time-data="[[timeData]]" complete-series-config="[[completeSeriesConfig]]" series-keys="[[_seriesKeys]]" chart-data="[[chartData]]" generating-crosshair-data="[[generatingCrosshairData]]" default-empty-data="{{defaultEmptyData}}" crosshair-data="[[crosshairData]]" tooltip-data="{{tooltipData}}" hard-mute="[[hardMute]]" muted-series="[[mutedSeries]]"></px-vis-highlight-point-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp="" on-dom-change="_highlighterConfigChanged"><px-vis-highlight-point id="highlighter" svg="[[layer.2]]" layers-to-mask="[[layer.1]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" time-data="[[timeData]]" series-keys="[[_seriesKeys]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" generating-crosshair-data="[[generatingCrosshairData]]" crosshair-data="[[crosshairData]]" default-empty-data="{{defaultEmptyData}}" tooltip-data="{{tooltipData}}" clip-path="[[seriesClipPath]]" hard-mute="[[hardMute]]" muted-series="[[mutedSeries]]"></px-vis-highlight-point></template></template></dom-module><script>Polymer({is:'px-vis-xy-chart',behaviors:[PxVisBehavior.observerCheck,PxVisBehaviorScale.scale,PxVisBehaviorD3.svg,PxVisBehaviorD3.axes,PxVisBehaviorD3.selectedDomain,PxVisBehaviorD3.clipPath,PxVisBehavior.dataset,PxVisBehavior.mutedSeries,PxVisBehavior.sizing,PxVisBehavior.tooltipData,PxVisBehavior.extentsData,PxVisBehavior.chartExtents,PxVisBehavior.axisTypes,PxVisBehavior.events,PxVisBehavior.completeSeriesConfig,PxVisBehaviorChart.chartCommon,PxVisBehaviorChart.saveImage,PxVisBehaviorChart.subConfiguration,PxVisBehaviorChart.timeFiltering,PxVisBehaviorD3.domainUpdate,PxVisBehaviorChart.registerPositioning,PxVisBehaviorChart.chartAutoResize,PxVisBehaviorChart.layers,PxColorsBehavior.dataVisColorTheming,PxVisBehavior.serieToRedrawOnTop,PxVisBehavior.dynamicMenuConfig,PxVisBehavior.actionConfig,PxVisBehaviorChart.zooming,PxVisBehaviorChart.actionRequest,PxVisBehaviorChart.toolbarSubConfig,PxVisBehaviorChart.noDebounceOnPanning,PxVisBehaviorChart.chartToolbarConfig,PxVisBehaviorChart.multiAxis,PxVisBehaviorD3.lineGaps,PxVisBehaviorChart.showTooltip,PxVisBehavior.muteUnmuteSeries,PxVisBehaviorChart.sizeVerticalRegister,PxVisBehavior.zoomSelection,PxVisBehaviorChart.tooltipFollowMouseCalculation,PxVisBehavior.selectionType,PxVisBehaviorD3.canvasContext,PxVisBehaviorD3.renderToCanvas,PxVisBehaviorChart.highlighterConfigs,PxVisBehaviorChart.mouseCusorConfig,PxVisBehavior.crosshairData,PxVisBehaviorChart.webWorkerSynchronization,Polymer.AppLocalizeBehavior,PxVisBehaviorRenderer.base,PxVisBehavior.annotationData],properties:{xAxisConfig:{type:Object},yAxisConfig:{type:Object},tooltipConfig:{type:Object},registerConfig:{type:Object},mouseRect:{type:Object},hideGridlinesX:{type:Boolean,value:!1},hideGridlinesY:{type:Boolean,value:!1},_internalMargin:{type:Object,notify:!0},matchTicks:{type:Boolean,value:!1},_axisActionConfig:{type:Object,notify:!0,computed:'_computeAxisActionConfig(dimensions.*, _isAttached)'},resources:{type:Object},language:{type:String,value:'en'},useKeyIfMissing:{type:Boolean,value:!0}},observers:['_xAxisConfigChanged(xAxisConfig.*)','_toolbarConfigChanged(toolbarConfig.*)','_createLayersOnce(svg, numberOfLayers)','_highlighterConfigChanged(highlighterConfig.*)','_mouseCursorConfigChanged(mouseCursorConfig.*)','_cursorConfigChanged(cursorConfig.*)','_interactionSpaceConfigChanged(interactionSpaceConfig.*)','_registerConfigChanged(registerConfig.*)','_tooltipConfigChanged(tooltipConfig.*)','_calcAxes(completeSeriesConfig.*)','_calcAxes(leftAxisSize, rightAxisSize)','_calcMargins(margin.*, numRightAxes, numLeftAxes)','_setXScale(width, _internalMargin)','_setMultiYScale(height, _internalMargin, axes.*)','_setDomainCaller(wwDataSyncCounter, x, y, dataExtents, seriesToAxes.*)','_setDomainCaller(x, y, dataExtents, seriesToAxes.*)','_setDomainCaller(x, y, chartExtents, dataExtents)','_updateDomain(selectedDomain)','_keepDataInSync(_filteredData.*, chartId)','_seriesKeysChanged(_seriesKeys.*)','_langChanged(language)','_mutedChanged(mutedSeries.*, hardMute)','_renderFilteredChartData(domainChanged, canvasContext, _filteredData.*, completeSeriesConfig.*, preventInitialDrawing, renderToCanvas)','_renderOnMute(mutedSeries.*)','_renderHighlight(domainChanged, canvasLayers.highlighter, completeSeriesConfig.*, preventInitialDrawing)','_renderSeriesOnTop(serieToRedrawOnTop)'],listeners:{"iron-resize":'_onIronResize'},created:function(){this._tooltipCalcHoverTargetId='wrapper',this._wwSyncDataPropName='_filteredData',this.set('_verticalRegisterDrawingCanvasId','svg'),this.set('_verticalRegisterHeightDeductions',['toolbar'])},ready:function(){this.set('numberOfLayers',4)},attached:function(){this._isAttached=!0},_xAxisConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.xAxisConfig,this.$.xAxis)},_tooltipConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.tooltipConfig,this.$.tooltip)},_registerConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.registerConfig,this.$.register)},_toolbarConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.toolbarConfig,this.$.toolbar)},_interactionSpaceConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.interactionSpaceConfig,this.$.interactionSpace)},_highlighterConfigChanged:function(){var a=this.renderToCanvas?this.$$('#highlighterCanvas'):this.$$('#highlighter');a&&this._doesObjHaveValues(this.highlighterConfig)&&this._applyConfigToElement(this.highlighterConfig,a)},_cursorConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.cursorConfig,this.$.cursor)},_mouseCursorConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.mouseCursorConfig,this.$.mouseCursor)},_seriesKeysChanged:function(){this.hasUndefinedArguments(arguments)||this.renderToCanvas&&this.canvasContext&&this.canvasContext.pxClearCanvas&&this.canvasContext.pxClearCanvas()},_onIronResize:function(){this.preventResize||this.debounce('ironresize',function(){var a=Math.max;if(!this.preventResize){var b=this.$.wrapper.getBoundingClientRect(),c=this.$.register.getBoundingClientRect(),d=this.$.toolbar.getBoundingClientRect(),e=0,f=0;'horizontal'===this.$.register.type?e+=c.height:f+=c.width,e+=d.height,this.set('width',a(b.width-f,0)),this.set('height',a(b.height-e,0)),this._computeVerticalRegisterHeight([d.height])}},this.debounceResizeTiming)},_calcMargins:function(){this.hasUndefinedArguments(arguments)||this.debounce('_calcMargin',function(){var a,b=25,c=10,d=10,e=10;JSON.stringify(this._defaultMargin)===JSON.stringify(this.margin)?('bottom'===this.xAxisLocation?d=40:'top'===this.xAxisLocation&&(b=40),'left'===this.yAxisLocation?e=50:'right'===this.yAxisLocation&&(c=50),a={top:b,right:c,bottom:d,left:e},this._calcMultiMargins(a,50,50)):(a={top:+this.margin.top||0===+this.margin.top?+this.margin.top:b,right:+this.margin.right||0===+this.margin.right?+this.margin.right:c,bottom:+this.margin.bottom||0===+this.margin.bottom?+this.margin.bottom:d,left:+this.margin.left||0===+this.margin.left?+this.margin.left:e},this._calcMultiMargins(a,a.left,a.right)),this.set('_internalMargin',a)},5)},_showHorizontalGrid:function(a,b,c,d){return this.hasUndefinedArguments(arguments)?void 0:!a&&(1<this.axes.length&&!d?!1:!0)},_returnGridAxis:function(){return this.hasUndefinedArguments(arguments)?void 0:this.y[this.axes[0]]},_returnXDomain:function(){if(null!==this.domainChanged)return this.x.domain()},_mutedChanged:function(){this.hasUndefinedArguments(arguments)||!0===this.hardMute&&this._setDomainCaller()},_setDomainCaller:function(){this.hasUndefinedArguments(arguments)||this._doesObjHaveValues(this.seriesToAxes)&&this._setDomain()},_bothDomainsSet:function(){return this.hasUndefinedArguments(arguments)?void 0:null!==this.domainChanged&null!==this._axisDomainChanged?!this.$.yAxes.domainChanged:void 0},_renderOnMute:function(){return null!==this.domainChanged&&this.canvasContext?this.hardMute?void this.canvasContext.pxClearCanvas():void this._renderFilteredChartData():void 0},_computeAxisActionConfig:function(){if(!this.hasUndefinedArguments(arguments)){var a;return a=2<this.dimensions.length?{mouseout:null,mousemove:null,mousedown:'callAxisDrag',mouseup:'callAxisDrag'}:{mouseout:null,mousemove:null,mousedown:null,mouseup:null},a}},_langChanged:function(){this.hasUndefinedArguments(arguments)||this._recreateScales(this.width,this.height,this._internalMargin)}});</script></body></html>