<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-simple-chart-common-behavior/px-simple-chart-common-behavior.html"><link rel="import" href="css/px-simple-win-loss-chart-styles.html"></head><body><dom-module id="px-simple-win-loss-chart"><script type="text/javascript" src="../es6-promise/es6-promise.min.js"></script><script type="text/javascript" src="../d3/d3.js"></script><template><style include="px-simple-win-loss-chart-styles"></style><svg class="px-simple-win-loss-chart-svg"></svg></template></dom-module><script>Polymer({is:"px-simple-win-loss-chart",behaviors:[PxSimpleChartCommonBehavior.common],properties:{width:{type:String,value:"300"},height:{type:String,value:"50"},chartData:{type:Array,observer:"_drawChart",value:function(){return[2,6,-5,4,-3,2,7]}}},_drawChartDebounced:function(){var a=this;if(this.chartData&&0<this.chartData.length){this._clearSVG(this.svg),this._setDimensions();var b=this._getSetSizesPromise();b.then(function(){a._setScales(),a._drawBars(),a._addStyleScope(a.svg)})}else setTimeout(function(){a._drawChartDebounced()},100)},_getSetSizesPromise:function(){var a=this;return new Promise(function(b){a.gridColumns=2*a.chartData.length-1,a.gridWidth=Math.round(a.widthValue/a.gridColumns),a.chartWidth=a.gridWidth*a.gridColumns,a.widthRemainder=a.widthValue%a.gridWidth,a.chartHeight=a.heightValue,a.svg.attr("width",a.chartWidth).attr("height",a.heightValue),b(!0)})},_setScales:function(){this.yScale=d3.scale.linear().domain([0<d3.min(this.chartData)?0:d3.min(this.chartData),d3.max(this.chartData)]).range([this.chartHeight,0])},_drawBars:function(){var a=this;this.chartData.forEach(function(b,c){var d=2*a.gridWidth*c,e=0>b?a.yScale(0):a.yScale(b),f=Math.abs(a.yScale(b)-a.yScale(0)),g=0>b?"px-negative-fill":"px-positive-fill";a._drawBar(d,e,a.gridWidth,f,g)}),this.svg.append("line").attr("class","px-simple-win-loss-chart bar-chart-bottom-line").attr("x1",0).attr("y1",this.yScale(0)).attr("x2",this.chartWidth).attr("y2",this.yScale(0))},_drawBar:function(a,b,c,d,e){this.svg.append("rect").attr("class","bar "+e).attr("x",a).attr("y",b).attr("width",c).attr("height",d)}});</script></body></html>