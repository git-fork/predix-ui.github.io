<html><head><link rel="import" href="../polymer/polymer.html"><script>(function(){Polymer({is:'px-context-browser-favorited-temp',properties:{favoritedBehaviorElement:HTMLElement,favorited:Array,opened:Boolean,favoritedOpened:Boolean,_itemsToRemove:{type:Array,value:function(){return[]}},currentFavorited:{type:Array,value:function(){return[]},notify:!0,readOnly:!0}},observers:['_handleOpenedChanged(opened, favoritedOpened)','_computeCurrentFavorited(favorited, _itemsToRemove, favorited.*)'],created:function(){this._flushFavoritedChangesTask=null},ready:function(){this.currentFavorited=this._computeCurrentFavorited(this.favorited,this._itemsToRemove)},handleItemTapped:function(a){this.favoritedOpened||(-1===this.currentFavorited.indexOf(a)?this.favoritedBehaviorElement.favorite(a):this.favoritedBehaviorElement.defavorite(a)),this.favoritedOpened&&(-1===this._itemsToRemove.indexOf(a)?this._itemsToRemove=this._itemsToRemove.concat([a]):this._itemsToRemove=this._itemsToRemove.filter(function(b){return b!==a}))},flushFavoritedChanges:function(){var a=this;this._itemsToRemove.forEach(function(b){a.favoritedBehaviorElement.defavorite(b)}),this._itemsToRemove=[]},_computeCurrentFavorited:function(a,b){var c=this;this.debounce('compute-current-favorited',function(){Array.isArray(a)&&Array.isArray(b)&&c._setCurrentFavorited(a.filter(function(a){return-1===b.indexOf(a)}))})},_handleOpenedChanged:function(a,b){this._flushFavoritedChangesTask&&(this.cancelAsync(this._flushFavoritedChangesTask),this._flushFavoritedChangesTask=null),a&&this.flushFavoritedChanges(),a||b||(this._flushFavoritedChangesTask=this.async(this.flushFavoritedChanges.bind(this),5e3))}})})();</script></head><body></body></html>