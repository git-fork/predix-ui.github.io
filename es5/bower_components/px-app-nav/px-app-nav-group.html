<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-dropdown/iron-dropdown.html"><link rel="import" href="../neon-animation/neon-animations.html"><link rel="import" href="../neon-animation/neon-animation-behavior.html"><link rel="import" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="import" href="../web-animations-js/web-animations-next-lite.min.html"><link rel="import" href="px-app-nav-item.html"><link rel="import" href="css/px-app-nav-group-styles.html"></head><body><dom-module id="px-app-nav-group"><template><style include="px-app-nav-group-styles"></style><px-app-nav-item id="itemButton" cancel-select="" icon="{{icon}}" label="{{label}}" dropdown="{{!hideDropdownIcon}}" selected$="{{_isGroupSelected(selected, noHighlight)}}" overflowed$="{{overflowed}}" empty-icon="{{emptyIcon}}" empty-label="{{emptyLabel}}" collapsed$="{{collapsed}}"></px-app-nav-item><div class="app-nav-group__target" id="grouptarget"></div><iron-dropdown id="group" horizontal-align="left" vertical-align="top" dynamic-align="" vertical-offset="{{_offsetHeight}}" opened="{{_opened}}" position-target="[[_getPositionTarget()]]" fit-into="[[fitInto]]" on-iron-overlay-canceled="_handleGroupCanceled" open-animation-config="{{_openAnimation}}" close-animation-config="{{_closeAnimation}}"><div slot="dropdown-content" class="dropdown-content app-nav-group__dropdown" id="groupcontainer"><div class="app-nav-group__dropdown__content" id="groupcontent"><slot></slot></div></div></iron-dropdown></template></dom-module><script>(function(){function a(a){return 1e3*a/800}Polymer({is:'px-app-nav-group',behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{selected:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,observer:'_handleSelectedChanged'},item:{type:Object},label:{type:String},icon:{type:String},opened:{type:Boolean,notify:!0,observer:'_openedChangedFromOutside'},_opened:{type:Boolean,observer:'_openedChangedFromInside'},fixedWidth:{type:Number},hideDropdownIcon:{type:Boolean,value:!1},overflowed:{type:Boolean,value:!1},noHighlight:{type:Boolean,value:!1},emptyIcon:{type:Boolean,value:!1},emptyLabel:{type:Boolean,value:!1},cancelSelect:{type:Boolean,value:!1},fitInto:{type:HTMLElement},collapsed:{type:Boolean,value:!1},_openAnimation:{type:Object},_closeAnimation:{type:Object},_offsetHeight:{type:Number}},attached:function(){this.listen(this.$.itemButton,'tap','_handleSelfTapped'),this.listen(this.$.groupcontainer,'tap','_handleGroupContainerTapped'),this.listen(this.$.group,'iron-overlay-opened','_handleDropdownOpened'),this.listen(this.$.group,'iron-overlay-closed','_handleDropdownClosed'),this.listen(this,'px-app-nav-item-tapped','_handleItemSelected'),this.set('_offsetHeight',this._getVerticalOffset()),this._openAnimation||(this._openAnimation={name:'expand-animation',timing:{easing:'ease-in'},endHeightNode:this.$.groupcontent}),this._closeAnimation||(this._closeAnimation={name:'contract-animation',timing:{easing:'ease-out'},startHeightNode:this.$.groupcontent})},detached:function(){this.unlisten(this.$.itemButton,'tap','_handleSelfTapped'),this.unlisten(this.$.groupcontainer,'tap','_handleGroupContainerTapped'),this.unlisten(this.$.group,'iron-overlay-opened','_handleDropdownOpened'),this.unlisten(this.$.group,'iron-overlay-closed','_handleDropdownClosed'),this.unlisten(this,'px-app-nav-item-tapped','_handleItemSelected')},_openedChangedFromOutside:function(a){!0===a&&!0!==this._opened&&this.openGroup(),!1===a&&!1!==this._opened&&this.closeGroup()},_openedChangedFromInside:function(a){!0===a&&!0!==this.opened&&this.set('opened',!0),!1===a&&!1!==this.opened&&this.set('opened',!1)},_handleDropdownOpened:function(a){a.preventDefault(),a.stopPropagation(),this.fire('px-app-nav-group-opened',{item:this.item})},_handleDropdownClosed:function(a){a.preventDefault(),a.stopPropagation(),this.fire('px-app-nav-group-closed',{item:this.item})},_toggleGroup:function(){this.opened&&this.async(function(){this.closeGroup()}),this.opened||this.openGroup()},openGroup:function(){var a=this.$.group;if(a){var b=this.$.itemButton,c=this.$.groupcontainer,d=this.$.groupcontent,e=b.getBoundingClientRect().width+'px';d.style.minWidth===e||'number'===typeof this.fixedWidth||(c.style.minWidth=e),'number'===typeof this.fixedWidth&&(d.style.width=this.fixedWidth+'px'),a.open()}},closeGroup:function(){var a=this.$.group;a&&a.close()},refitGroup:function(){if(!this.__group){var a=this.$.group;if(!a)return;this.__group=a}window.requestAnimationFrame(function(){this.__group.refit()}.bind(this))},_handleSelfTapped:function(){this._toggleGroup()},_handleGroupContainerTapped:function(a){var b=Polymer.dom(a).path,c=Polymer.dom(this.root).querySelector('#groupcontent');-1===b.indexOf(c)&&this.closeGroup()},_handleGroupCanceled:function(a){var b=a.detail,c=Polymer.dom(b).rootTarget,d=this,e=Polymer.dom(b).path;-1<e.indexOf(d)&&a.preventDefault()},_handleSelectedChanged:function(a,b){a!==b&&this.opened&&this.closeGroup()},_handleItemSelected:function(){this.opened&&this.closeGroup()},_getPositionTarget:function(){return this.$.itemButton},_getVerticalOffset:function(){return this.getBoundingClientRect().height},_isGroupSelected:function(a,b){return a&&!b}}),Polymer({is:'expand-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(b){var c=b.node,d=b.endHeightNode,e=d.getBoundingClientRect().height,f=Object.assign({},this.timingFromConfig(b),{duration:a(e)});return this._effect=new KeyframeEffect(c,[{height:'0px'},{height:e+'px'}],f),this._effect}}),Polymer({is:'contract-animation',behaviors:[Polymer.NeonAnimationBehavior],configure:function(b){var c=b.node,d=b.startHeightNode,e=d.getBoundingClientRect().height,f=Object.assign({},this.timingFromConfig(b),{duration:a(e)});return this._effect=new KeyframeEffect(c,[{height:e+'px'},{height:'0px'}],f),this._effect}})})();</script></body></html>