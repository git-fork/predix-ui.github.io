<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-graph.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-selectable.html"><link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-activatable.html"><link rel="import" href="css/px-tree-styles.html"><link rel="import" href="px-tree-node.html"><link rel="import" href="px-tree-behavior.html"></head><body><dom-module id="px-tree"><template><style include="px-tree-styles"></style><ul><template is="dom-repeat" items="[[__rootItems]]"><px-tree-node label="[[_getItemProp(item, keys.label)]]" items="[[_getChildren(item, _assetGraph, _childrenUpdated)]]" item="[[item]]" keys="[[keys]]" is-active="[[_isItemActive(active, activeMeta, item, multiActivate, active.*)]]" is-selected="[[_isItemSelected(selected, item, multiSelect, selected.*)]]" active="[[active]]" active-meta="[[activeMeta]]" selected="[[selected]]" can-open="[[_hasChildren(item, _assetGraph, _childrenUpdated)]]" disable-branch-select="[[disableBranchSelect]]" multi-select="[[multiSelect]]" multi-activate="[[multiActivate]]" icon="[[_getItemProp(item, keys.icon)]]" children-updated="[[_childrenUpdated]]" asset-graph="[[_assetGraph]]"></px-tree-node></template></ul></template></dom-module><script>Polymer({is:'px-tree',behaviors:[PxAppBehavior.AssetGraph,PxAppBehavior.AssetSelectable,PxAppBehavior.AssetActivatable,PxTreeBehavior],listeners:{"px-tree-node-tapped":'_handleNodeTapped',"px-app-asset-children-updated":'_handleChildrenUpdated'},properties:{multiSelect:{type:Boolean,value:!1,observer:'_toggleMultiSelect'},multiActivate:{type:Boolean,value:!1,observer:'_toggleMultiActivate'},disableBranchSelect:{type:Boolean,value:!1},_childrenUpdated:{type:Boolean,value:null}},_handleChildrenUpdated:function(){this._childrenUpdated=!0,this._childrenUpdated=!1},_handleNodeTapped:function(a){var b=a.detail,c=b.shift,d=b.ctrl,e=b.item,f=b.isBranch,g=b.isActive,h=b.isSelected,i=b.isIcon;if(f&&!g&&this.activate(e),f&&g&&(this.multiActivate?this.deactivate(e):this.activate(this._assetGraph.getInfo(e).parent)),!(f&&this.disableBranchSelect||i||!this._assetGraph.isSelectable(e))){if(h&&(d||c))return void this.deselect(e);if(d||c||this.select(null),this.multiSelect&&c){var j=this._assetGraph.getInfo(e).siblings.indexOf(e),k=this._assetGraph.getInfo(e).siblings.indexOf(this._lastSelection.item);-1<k&&k<j?this._assetGraph.getInfo(e).siblings.slice(k+1,j+1).forEach(function(a){this.select(a)}.bind(this)):-1<k&&this._assetGraph.getInfo(e).siblings.slice(j,k).forEach(function(a){this.select(a)}.bind(this))}else this.select(e)}}});</script></body></html>