<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-tooltip/px-tooltip.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-register.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="px-vis-behavior-datetime.html"><link rel="import" href="px-vis-register.html"><link rel="import" href="css/px-vis-tooltip-styles.html"></head><body><dom-module id="px-vis-tooltip"><template><style include="px-vis-tooltip-styles"></style><template id="template" is="dom-if" if="[[!_internalHidden]]"><px-tooltip id="tooltip" tooltip-style="[[tooltipStyle]]" for="[[hoverTarget]]" delay="50" orientation="[[orientation]]" smart-orientation="" follow-mouse="" mouse-coords="[[mousePosition]]"><px-vis-register id="register" tooltip-style="[[tooltipStyle]]" truncation-length="100" groupings="[[_groupings]]" force-date-time-display="[[forceDateTimeDisplay]]" chart-data="[[chartData]]" x-axis-type="[[xAxisType]]" y-axis-type="[[yAxisType]]" complete-series-config="[[_mutedCompleteSeriesConfig]]" muted-series="[[mutedSeries]]" number-format="[[numberFormat]]" number-format-culture="[[numberFormatCulture]]" number-format-is-currency$="[[numberFormatIsCurrency]]" number-format-currency="[[numberFormatCurrency]]" number-format-zero="[[numberFormatZero]]" first-date-time-format="[[firstDateTimeFormat]]" second-date-time-format="[[secondDateTimeFormat]]" separator="[[separator]]" timezone="[[timezone]]" prevent-min-size=""></px-vis-register></px-tooltip></template></template></dom-module><script>Polymer({is:"px-vis-tooltip",behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.dataset,PxVisBehavior.tooltipData,PxVisBehavior.axisTypes,PxVisBehavior.mutedCompleteSeriesConfig,PxVisBehavior.formatting,PxVisBehaviorTime.datetime,PxVisBehavior.forceDateTimeDisplay,PxVisBehaviorRegister.groupings,PxVisBehavior.commonMethods],properties:{hoverTarget:{type:Object},mousePosition:{type:Array},tooltipStyle:{type:String,value:"dark"},orientation:{type:String,value:"right"},_groupings:{type:Number,value:1,computed:"_checkGroups(_mutedTooltipData.*, groupings)"},hide:{type:Boolean,value:!1},_internalHidden:{type:Boolean,value:!1},_tooltipElem:{type:HTMLElement},_registerElem:{type:HTMLElement},_mutedTooltipData:{type:Object,computed:"_computeMutedData(tooltipData.*, mutedSeries, hardMute)"}},observers:["_computeInternalHidden(hide, _mutedTooltipData)"],attached:function(){this.set("_tooltipElem",this.$$("px-tooltip")),this.set("_registerElem",this.$$("px-vis-register"))},forceShow:function(a){this._tooltipElem&&this._tooltipElem.set("opened",!0),a&&this._tooltipElem.notifyResize()},forceHide:function(){this._tooltipElem&&this._tooltipElem.set("opened",!1)},_checkGroups:function(){return this.hasUndefinedArguments(arguments)?void 0:this.groupings&&1<this.groupings?this.groupings:16>this._mutedTooltipData.series.length?1:24>this._mutedTooltipData.series.length?2:3},_computeInternalHidden:function(){if(!this.hasUndefinedArguments(arguments)&&this._mutedTooltipData){var a=this._internalHidden,b=this._mutedTooltipData.hidden||this.hide||0===this._mutedTooltipData.series.length;if(this.set("_internalHidden",b),this._tooltipElem||this._internalHidden||(this.$.template.render(),this.set("_tooltipElem",this.$$("px-tooltip")),this.set("_registerElem",this.$$("px-vis-register"))),this._tooltipElem)if(b)a||this.forceHide();else{var c=!1;this._registerElem.tooltipData&&this._registerElem.tooltipData.series.length!==this._mutedTooltipData.series.length&&(c=!0),this._registerElem.set("tooltipData",this._mutedTooltipData),this.forceShow(c)}}},_computeMutedData:function(){if(!this.hasUndefinedArguments(arguments)&&void 0!==this.tooltipData&&void 0!==this.hardMute&&void 0!==this.mutedSeries){if(!this.hardMute||this._isObjEmpty(this.mutedSeries))return this.tooltipData;for(var a=this.clone(this.tooltipData),b=[],c=0;c<this.tooltipData.series.length;c++)!0!==this.mutedSeries[this.tooltipData.series[c].name]&&b.push(this.tooltipData.series[c]);return a.series=b,a}}});</script></body></html>