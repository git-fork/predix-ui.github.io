<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../web-animations-js/web-animations-next-lite.min.html"><link rel="import" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="import" href="../neon-animation/animations/fade-in-animation.html"><link rel="import" href="../neon-animation/animations/fade-out-animation.html"><link rel="import" href="../iron-dropdown/iron-dropdown.html"><link rel="import" href="../px-icon-set/px-icon-set.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="css/px-vis-dynamic-menu-styles.html"></head><body><dom-module id="px-vis-dynamic-menu"><template><style include="px-vis-dynamic-menu-styles"></style><span id="button" slot="dropdown-trigger" on-tap="_buttonClicked"><px-icon icon="px-utl:app-settings" class="icon"></px-icon></span><iron-dropdown id="dropdown" opened="[[_opened]]" always-on-top="" no-animations="" dynamic-align="" allow-outside-scroll="" no-overlap=""><div slot="dropdown-content" class="menu-wrapper"><ul class="menu-list"><template is="dom-repeat" items="{{dynamicMenuConfig}}"><li class="menu-wrapper--item u-p--" on-tap="_clickItem" value="[[index]]"><px-icon class="u-mr--" value="[[index]]" icon="[[item.icon]]"></px-icon><span>{{item.name}}</span></li></template></ul></div></iron-dropdown></template></dom-module><script>Polymer({is:'px-vis-dynamic-menu',behaviors:[Polymer.NeonAnimationRunnerBehavior,PxVisBehavior.dynamicMenuConfig],properties:{_shown:{type:Boolean,value:!1},_opened:{type:Boolean,value:!1},displayClass:{type:String,value:'inline-block'},additionalDetail:{type:Object},animationConfig:{type:Object,value:function(){return{fadeIn:{name:'fade-in-animation',node:this,timing:{delay:0,duration:250}},fadeOut:{name:'fade-out-animation',node:this,timing:{delay:0,duration:250}}}}}},observers:[],listeners:{"neon-animation-finish":'_onNeonAnimationFinish'},attached:function(){this.$.dropdown.set('positionTarget',this.$.button)},fadeIn:function(){!this._shown&&this.dynamicMenuConfig&&0<this.dynamicMenuConfig.length&&(this._shown=!0,this.cancelAnimation(),this.style.display=this.displayClass,this.playAnimation('fadeIn'))},fadeOut:function(){this._shown&&(this._shown=!1,this.cancelAnimation(),this.playAnimation('fadeOut'))},_onNeonAnimationFinish:function(){this._shown||(this.style.display='none',this.set('_opened',!1))},_buttonClicked:function(){this.set('_opened',!this._opened)},_clickItem:function(a,b){var c=a.currentTarget,d=this.dynamicMenuConfig[c.value];if(d.action){var e=d.action;if('string'===typeof d.action){var f=eval('var f = function() { return '+e+';}; f();');d.action=f}if(d.actionContext){var g=d.action.bind(d.actionContext);g({menuItem:d,additionalDetail:this.additionalDetail})}else this.fire('px-vis-action-request',{function:d.action,data:{menuItem:d,additionalDetail:this.additionalDetail}})}if(d.eventName){var h={};h.menuItem=d,h.additionalDetail=this.additionalDetail,this.fire('px-vis-event-request',{eventName:d.eventName,data:h})}this.set('_opened',!1)}});</script></body></html>