<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-icon-set/px-icon-set.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-interaction.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-interaction-space"><template><style include="px-vis-styles"></style></template></dom-module><script>Polymer({is:'px-vis-interaction-space',behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.sizing,PxVisBehaviorD3.svg,PxVisBehaviorD3.axes,PxVisBehavior.dataset,PxVisBehavior.tooltipData,PxVisBehavior.mutedSeries,PxVisBehavior.crosshairData,PxVisBehavior.extentsData,PxVisBehavior.commonMethods,PxVisBehavior.axisTypes,PxVisBehavior.completeSeriesConfig,PxVisBehavior.zoomSelection,PxVisBehavior.seriesKeys,PxVisBehavior.selectionType,PxVisBehavior.polarData,PxVisBehavior.applyActionConfig,PxVisBehavior.interactionSpaceShared,PxVisBehavior.preventWebWorkerSynchronization,PxVisBehavior.wwDataSyncCounter,PxVisBehaviorD3.cursorIcon,PxVisBehaviorInteraction.lasso],properties:{_rect:{type:Object},_actionArea:{type:Object,value:function(){return{}}},mouseRect:{type:Object,notify:!0},timeData:{type:String,value:'Timestamp'},actionMapping:{type:Object,readOnly:!0,value:{startZooming:'_startZooming',stopZooming:'_finishActionBox',startStriping:'_startStriping',stopStriping:'_finishActionBox',calcTooltipData:'_calcTooltipData',calcCrosshairData:'_calcCrosshairData',calcTooltipAndCrosshairData:'_calcTooltipAndCrosshairData',resetTooltipAndCrosshairData:'_resetTooltipAndCrosshairData',resetTooltip:'_resetTooltipData',resetCrosshair:'_resetCrosshairData',startPanning:'_startPanning',stopPanning:'_stopPanning',reportMouseCoords:'_reportMouseCoords',startLasso:'_startLasso',stopLasso:'_stopLasso'}},actionConfig:{type:Object,notify:!0,value:function(){return{mousedown:'startZooming',mouseup:'stopZooming',mouseout:'resetTooltip',mousemove:'calcTooltipData'}}},_panningStartVal:{type:Array,value:function(){return[]}},showTooltip:{type:Boolean,value:!0},_calculatingData:{type:Boolean,value:!1},radial:{type:Boolean,value:!1},_calcTooltip:{type:Boolean,value:!1},_calcCrosshair:{type:Boolean,value:!1},searchRadius:{type:Number},chartId:{type:String},searchType:{type:String,value:'closestPoint'},searchFor:{type:String,value:'timestamp'},_cursor:{type:Object},_icon:{type:Object},_cursorGroup:{type:Object},_lastIcon:{type:String,value:'none'},_lastCursor:{type:String,value:'none'},iconType:{type:String,value:'none'},cursorType:{type:String,value:'none'},useQuadtree:{type:Boolean,value:!1},_originalBoxCoords:{type:Object,value:function(){return{x:null,y:null,ox:null,oy:null,width:null,height:null}}},_height:Number,_width:Number},observers:['drawElement(domainChanged, chartData.*, svg, width, height, completeSeriesConfig, offset.*)','_drawCursorIcon(_cursorGroup, iconType)','_drawCursor(_icon, cursorType)','_updateRadius(searchRadius)','_setupActions(actionConfig.*)','_resetTooltipDataLegacy(completeSeriesConfig.*)','_resetTooltipData(seriesKeys.*, defaultEmptyData.*)','_createQuadtreeData(wwDataSyncCounter, width, height, margin.*, domainChanged, searchType, useQuadtree, counterClockwise, xAxisType, preventWebWorkerSynchronization)','_callCreateQuadtreeData(mutedSeries)'],attached:function(){this._doesObjHaveValues(this.tooltipData)&&this.fire('px-vis-tooltip-updated',{dataVar:'tooltipData',data:this.tooltipData,method:'set'}),this._doesObjHaveValues(this.mouseRect)&&this.fire('px-vis-mouse-rect-updated',{data:this.mouseRect,dataVar:'mouseRect',method:'set'})},drawElement:function(){var a=Math.max;this.hasUndefinedArguments(arguments)||(this._rect?this.radial?this._rect.attr('r',a(this.width,0)):(this._width=a(this.width-this.margin.left-this.margin.right,0),this._height=a(this.height-this.margin.bottom-this.margin.top,0),this._rect.attr('width',this._width).attr('height',this._height)):(this.radial?this._rect=this.svg.append('circle').attr('id','mouseCapture').attr('r',a(this.width,0)).attr('cx',0).attr('cy',0).attr('fill','none').attr('pointer-events','all').style('cursor','crosshair'):(this._width=a(this.width-this.margin.left-this.margin.right,0),this._height=a(this.height-this.margin.bottom-this.margin.top,0),this._rect=this.svg.append('rect').attr('id','mouseCapture').attr('width',this._width).attr('height',this._height).attr('fill','none').attr('pointer-events','all').style('cursor','crosshair')),this._rect.on('mousemove.cursor',this._updateCursor.bind(this)),this._rect.on('mouseout.cursor',this._hideCursor.bind(this)),this._drawCursorGroup(),this.actionConfig&&this._setupActions(),this.set('mouseRect',this._rect.node()),this.fire('px-vis-mouse-rect-updated',{data:this.mouseRect,dataVar:'mouseRect',method:'set'})))},_startStriping:function(){this.set('extentsAction','stripe'),this._drawActionBox()},_startZooming:function(){this.set('extentsAction','zoom'),this._drawActionBox()},_drawCursorGroup:function(){this._cursorGroup||(this._cursorGroup=this.svg.append('g').attr('display','none').attr('pointer-events','none'))},_drawCursor:function(){this.hasUndefinedArguments(arguments)||(this._doesD3HaveValues(this._cursor)&&this._cursor.remove(),'circle'===this.cursorType&&this._cursorGroup.insert('circle',':first-child').attr('class','mouseCursor').attr('fill',this._checkThemeVariable('--px-vis-zoom-brush-fill-color','rgb(0,0,0)')).attr('fill-opacity',this._checkThemeVariable('--px-vis-zoom-brush-fill-opacity',0.15)).attr('stroke',this._checkThemeVariable('--px-vis-zoom-brush-outline-color','rgb(0,0,0)')).attr('r',this.searchRadius).attr('cx',0).attr('cy',0).attr('pointer-events','none'),'crosshair'===this.cursorType&&(this._cursorGroup.insert('line',':first-child').attr('class','mouseCursor').attr('stroke',this._checkThemeVariable('--px-vis-cursor-line-color','rgb(0,0,0)')).attr('stroke-width',2).attr('opacity',1).attr('x1',0).attr('x2',0).attr('y1',0).attr('y2',0).attr('pointer-events','none'),this._cursorGroup.insert('line',':first-child').attr('class','mouseCursor').attr('stroke',this._checkThemeVariable('--px-vis-cursor-line-color','rgb(0,0,0)')).attr('stroke-width',2).attr('opacity',1).attr('x1',0).attr('x2',0).attr('y1',0).attr('y2',0).attr('pointer-events','none')),this._cursor=this._cursorGroup.selectAll('.mouseCursor'),this._addClipPath(this._cursor))},_updateRadius:function(){this.hasUndefinedArguments(arguments)||('circle'!==this.cursorType&&(this.cursorType='circle',this._drawCursor()),this._cursor.attr('r',this.searchRadius))},_addClipPath:function(a){this.clipPath&&this.addClipPath(a)},_updateCursor:function(){if(!(this._isD3Empty(this._cursorGroup)||this._isD3Empty(this._icon))){var a=Px.d3.mouse(this._rect.node());this._cursorGroup.attr('display',null),this._positionCursorIcon(a),'circle'===this.cursorType&&this._cursor.attr('cx',a[0]).attr('cy',a[1])}},_hideCursor:function(){this._cursorGroup.attr('display','none')},_setupActions:function(){this.hasUndefinedArguments(arguments)||this._rect&&this._setupRegularActions(this._rect,this._rect.node(),!1)},_resetTooltipDataLegacy:function(){this.hasUndefinedArguments(arguments)||!this.seriesKeys&&this._resetTooltipData()},_resetTooltipAndCrosshairData:function(){this._resetTooltipData(),this._resetCrosshairData()},_resetCrosshairData:function(){this.set('_calculatingData',!1);var a={rawData:[],timeStamps:[]};this.set('crosshairData',a),this.set('_lassoCrosshairData',a),this.generatingCrosshairData=!1},_calcTooltipAndCrosshairData:function(){this._calcTooltip=!0,this._calcCrosshair=!0,this._calcData()},_calcTooltipData:function(){this._calcTooltip=!0,this._calcCrosshair=!1,this._calcData()},_calcCrosshairData:function(){this._calcTooltip=!1,this._calcCrosshair=!0,this._calcData()},_calcData:function(){if(('lasso'!==this.searchType||this._isLassoing)&&(this.set('_calculatingData',!0),!this.mouseDown&&0<this.chartData.length&&this.y)){var a=Px.d3.mouse(this._rect.node());this.debounce('move',function(){this._getDataForAllSeries(a)},10)}},_calcDataFinished:function(a){if(this._calculatingData){if(this._calcCrosshair){if(this.generatingCrosshairData=!0,'lasso'===this.searchType&&this.crosshairData){var b;b=this._lassoCrosshairData?{rawData:this._lassoCrosshairData.rawData||[],timeStamps:this._lassoCrosshairData.timeStamps||[]}:{rawData:[],timeStamps:[]},b.rawData=b.rawData.concat(a.rawData),b.timeStamps=b.timeStamps.concat(a.timeStamps),this.set('crosshairData',b)}else this.set('crosshairData',{rawData:a.rawData,timeStamps:a.timeStamps});this.fire('px-vis-crosshair-data-generated',{crosshairData:this.crosshairData})}delete a.timeStampsTracker,this._calcTooltip&&(delete a.rawData,delete a.timeStamps,this.set('tooltipData',a),this.fire('px-vis-tooltip-updated',{dataVar:'tooltipData',data:a,method:'set'})),this.set('_calculatingData',!1)}},_getDataForAllSeries:function(a){var b='ordinal'!==this.xAxisType&&'scaleBand'!==this.xAxisType?this.x.invert(a[0]):null,c=this._returnTooltipDataStub(a);return this.preventWebWorkerSynchronization||'ordinal'===this.xAxisType||'scaleBand'===this.xAxisType?void this._searchLocally(a,c,b):('time'===this.xAxisType||'timeLocal'===this.xAxisType)&&'point'!==this.searchFor?(c.time=b,void this._searchLocally(a,c,b)):void this._searchOnWebWorker(a,c)},_searchOnWebWorker:function(a,b){var c={};c.action='findQuadtreePoints',c.originatorName=this.nodeName,c.chartId=this.chartId,c.data=this._createBaseDataObjForWebWorker(),c.data.mousePos=a,c.data.calcCrosshair=this._calcCrosshair,c.data.radius=this.searchRadius,c.data.searchType=this.searchType,c.data.searchFor=this.searchFor,c.data.polygon=this._lassoCoords,c.data.mutedSeries=this.mutedSeries,c.data.hardMute=this.hardMute,c.successCallback=function(a){a.data&&(b.series=a.data.series,b.rawData=a.data.rawData,b.timeStamps=a.data.timeStamps,b.time=a.data.time?a.data.time:b.time,b.timeSeriesKey=a.data.timeSeriesKey?a.data.timeSeriesKey:b.timeSeriesKey,b.additionalPoints=a.data.additionalPoints,this._calcDataFinished(b))}.bind(this),Px.vis.scheduler.process(c)},_returnTooltipDataStub:function(a){return this._createTooltipDataStub(a,null,!this.showTooltip)},_searchLocally:function(a,b,c){for(var d=this.seriesKeys&&this.seriesKeys.length?this.seriesKeys:Object.keys(this.completeSeriesConfig),e={distance:Number.MAX_VALUE,time:null},f=null===b.time&&!!this.chartData[0][this.timeData],g=0;g<d.length&&!!this._calculatingData;g++)this.hardMute&&this.mutedSeries[d[g]]?b.series.push({name:d[g],value:null,coord:[]}):this._calcSerieData(b,f,e,c,d[g],a);f&&(b.time=e.time),this._calcDataFinished(b)},_calcSerieData:function(a,b,c,d,e,f){var g,h=this.completeSeriesConfig[e].y,i=this.completeSeriesConfig[e].x,j=this.completeSeriesConfig[e].axis&&this.completeSeriesConfig[e].axis.id?this.completeSeriesConfig[e].axis.id:null,l={series:{}},m=!1;'ordinal'===this.xAxisType||'scaleBand'===this.xAxisType?(l.series[i]=this._getOrdinalValue(!0,f[0],j),'ordinal'===this.yAxisType||'scaleBand'===this.yAxisType?l.series[h]=this._getOrdinalValue(!1,f[1],j):(g=this.isMultiY?this.y[j].invert(f[1]):this.y.invert(f[1]),l.series[h]=this._getClosestValue(!1,g,this.chartData,i,h,l.series[i]))):'ordinal'===this.yAxisType||'scaleBand'===this.yAxisType?(l.series[h]=this._getOrdinalValue(!1,f[1],j),l.series[i]=this._getClosestValue(!0,d,this.chartData,i,h,l.series[h])):'time'===this.xAxisType||'timeLocal'===this.xAxisType?(l=this._searchTimeData(d,e,i,h,a),a.time=l.series[i]):(l=this._searchContinuousData(b,c,f,i,h,j,a),m=!0),m||(l.coords=[this.x(l.series[i]),this.isMultiY?this.y[j](l.series[h]):this.y(l.series[h])],a.xArr.push(l.coords[0]),a.yArr.push(l.coords[1])),a.series.push({name:e,value:l.series,coord:l.coords}),a.rawData=l.rawData,a.timeStamps=l.timeStamps},_searchTimeData:function(a,b,c,d,e){var f,g,h,i,j=Px.d3.bisector(function(a){return a[this.completeSeriesConfig[b].x]}.bind(this)).left,k={series:{},rawData:e.rawData,timeStamps:e.timeStamps,timeStampsTracker:e.timeStampsTracker};if('lasso'===this.searchType){var l,m=d3.extent(this._lassoCoords,function(a){return a[0]}),n=!0;m[0]=+this.x.invert(m[0]),m[1]=+this.x.invert(m[1]),f=j(this.chartData,m[0],1);do l=this.chartData[f][c],l<m[1]?([].push(this.chartData[f]),!k.timeStampsTracker[l]&&(k.rawData.push(this.chartData[f]),k.timeStamps.push(l),k.timeStampsTracker[l]=!0),f++):n=!1;while(n)}else f=j(this.chartData,a,1),g=this.chartData[f-1],h=this.chartData[f]?this.chartData[f]:this.chartData[f-1],i=a-g[c]>h[c]-a?h:g,k.series[c]=i[c],k.series[d]=i[d],k.timeStampsTracker[i[c]]||(k.rawData.push(i),k.timeStamps.push(i[c]),k.timeStampsTracker[i[c]]=!0);return k},_searchContinuousData:function(a,b,c,e,f,g,h){for(var j,k,l,m,n,o,p,q,d=this.x.domain(),r=this.isMultiY?this.y[g].domain():this.y.domain(),s=r[1]-r[0],t=this.isMultiY?this.y[g].range()[1]-this.y[g].range()[0]:this.y.range()[1]-this.y.range()[0],u=[],v=this.searchRadius?this.searchRadius:Number.MAX_VALUE,w={series:{},rawData:h.rawData,timeStamps:h.timeStamps,timeStampsTracker:h.timeStampsTracker},x=0;x<this.chartData.length;x++)if(j=this.chartData[x][e],k=this.chartData[x][f],j>=d[0]&&j<=d[1]&&k>=r[0]&&k<=r[1]){if(this.radial){var i=this._getPixelCoordForRadialData(j,k,t,r,s);l=i[0],m=i[1]}else l=this.x(j),m=this.isMultiY?this.y[g](k):this.y(k);n=l,o=m,q=Math.sqrt((l-=c[0])*l+(m-=c[1])*m),this._calcTooltip||this._calcCrosshair&&0===this.crosshairPixelSearch?q<v?(v=q,u=[],u.push(x),p=x,w.series[e]=j,w.series[f]=k,w.coords=[n,o]):q===v&&u.push(x):this._calcCrosshair&&(q<v?(u=[],u.push(x),p=x):q===this.crosshairPixelSearch&&u.push(x))}if(this._calcTooltip&&a&&b.distance>v&&(p||0===p)&&(b.distance=v,b.time=this.chartData[p][this.timeData]),this._calcCrosshair)for(var q,x=0;x<u.length;x++)q=this.chartData[u[x]],this.timeData&&!w.timeStampsTracker[q[this.timeData]]?(w.rawData.push(q),w.timeStamps.push(q[this.timeData]),w.timeStampsTracker[q[this.timeData]]=!0):!this.timeData&&w.rawData.push(q);return w},_getOrdinalValue:function(a,b,c){var d,e,f=Number.MAX_VALUE;a?(d=this.x.domain(),e=this.x.range()):this.isMultiY?(d=this.y[c].domain(),e=this.y[c].range()):(d=this.y.domain(),e=this.y.range()),rangeInterval=(e[1]-e[0])/d.length;for(var g=0,h=f,j=f,k=-1,l=0;l<d.length;l++)g=(l+0.5)*rangeInterval,h=Math.abs(g-b),h<j&&(j=h,k=l);return d[k]},_getOrdinalRange:function(a,b,c){for(var d=!0===a?this.x.domain():this.y.domain(),e=this._getOrdinalValue(a,b),f=this._getOrdinalValue(a,c),g=d.indexOf(e),h=d.indexOf(f),j=[],k=g;k<h+1;k++)j.push(d[k]);return j},_getClosestValue:function(a,b,c,d,e,f){var g,h,i,j=a?d:e,k=a?e:d,l=Number.MAX_VALUE;return c.forEach(function(a){a[k]===f&&(g=a[j],h=Math.abs(b-g),h<l&&(l=h,i=g))}),i},_mouseUpOutsideSvg:function(){this._finishActionBox()},_startPanning:function(){if(0===Px.d3.event.button){this.set('extentsAction','pan'),this.mouseDown=!0,this._resetTooltipData(),Px.d3.select(document).on('mouseup.action',this._stopPanning.bind(this)),Px.d3.select(document).on('mousemove.action',this._updatePanning.bind(this));var a=Px.d3.mouse(this._rect.node());this.radial?this._initializePanningRadial(a):this._initializePanning(a),this.fire('px-vis-interaction-space-start-panning')}},_initializePanningRadial:function(a){this._panningStartVal[0]=a[0],this._panningStartVal[1]=a[1]},_initializePanning:function(a){this._panningStartVal[0]='ordinal'===this.xAxisType||'scaleBand'===this.xAxisType?a[0]:this.x.invert(a[0]),this._panningStartVal[1]='ordinal'===this.yAxisType||'scaleBand'===this.yAxisType?a[1]:this._processYValues(function(b){return b.invert(a[1])})},_updatePanning:function(){var a,b=Px.d3.mouse(this._rect.node());a=this.radial?this._updatePanningCoordsRadial(b):this._updatePanningCoords(b),this.set('extentsData',a)},_updatePanningCoordsRadial:function(a){return{x1:this._panningStartVal[0],y1:this._panningStartVal[1],x2:a[0],y2:a[1]}},_updatePanningCoords:function(a){var b,c,d,e={},f=this.x.domain();return'ordinal'!==this.xAxisType&&'scaleBand'!==this.xAxisType?(b=this.x.invert(a[0]),c=b-this._panningStartVal[0],e.eX=[f[0]-c,f[1]-c]):(e.eX=f,this._adjustOrdinalAlign(this.x,a[0],this._panningStartVal[0]),this._panningStartVal[0]=a[0]),e.eY='ordinal'!==this.yAxisType&&'scaleBand'!==this.yAxisType?this._processYValues(function(e,f){return b=e.invert(a[1]),c=f||0===f?b-this._panningStartVal[1][f]:b-this._panningStartVal[1],d=e.domain(),[d[0]-c,d[1]-c]}):this._processYValues(function(b,c){return c||0===c?(this._adjustOrdinalAlign(b,a[1],this._panningStartVal[1][c]),this._panningStartVal[1][c]=a[1]):(this._adjustOrdinalAlign(b,a[1],this._panningStartVal[1]),this._panningStartVal[1]=a[1]),b.domain()}),e},_adjustOrdinalAlign:function(a,b,c){var d,e=Math.min,f=Math.max,g=a.step(),h=a.range(),i=a.step()*a.padding(),j=i*a.align();j=e(f(0,j+(b-c)/2),g),d=f(0,e(j/i,1)),a.align(d)},_stopPanning:function(){this._updatePanning(),Px.d3.select(document).on('mouseup.action',null),Px.d3.select(document).on('mousemove.action',null),this.mouseDown=!1,this.fire('px-vis-interaction-space-stop-panning')},_drawActionBox:function(){if(0===Px.d3.event.button){this.mouseDown=!0,Px.d3.select(document).on('mouseup.action',this._mouseUpOutsideSvg.bind(this)),Px.d3.select(document).on('mousemove.action',this._updateActionBox.bind(this));var a=Px.d3.mouse(this._rect.node()),b=a[0],c=a[1];'xAxis'===this.selectionType?c=0:'yAxis'===this.selectionType&&(b=0),this._originalBoxCoords={x:b,y:c,ox:b,oy:c,width:0,height:0},this._actionArea=this.svg.append('rect').attr('class','action-area').attr('x',b).attr('y',c).attr('rx',2).attr('ry',2).attr('width',0).attr('height',0).attr('fill',this._checkThemeVariable('--px-vis-zoom-brush-fill-color','rgb(0,0,0)')).attr('fill-opacity',this._checkThemeVariable('--px-vis-zoom-brush-fill-opacity',0.5)).attr('stroke',this._checkThemeVariable('--px-vis-zoom-brush-outline-color','rgb(0,0,0)'))}},_updateActionBox:function(){if(this._doesObjHaveValues(this._actionArea)){var a,b,c=Px.d3.mouse(this._rect.node()),d=this._originalBoxCoords.ox,e=this._originalBoxCoords.oy,f=this._originalBoxCoords.width,g=this._originalBoxCoords.height,h=c[0],i=c[1];d>h&&(h=d,d=c[0]),e>i&&(i=e,e=c[1]),'xAxis'===this.selectionType?i=this._height:'yAxis'===this.selectionType&&(h=this._width),h>=d?(a=h-d,this._actionArea.attr('x',d),this._actionArea.attr('width',a),this._originalBoxCoords.x=d,this._originalBoxCoords.width=a):(a=d-i,this._actionArea.attr('x',h),this._actionArea.attr('width',a),this._originalBoxCoords.x=h,this._originalBoxCoords.width=a),i>=e?(b=i-e,this._actionArea.attr('y',e),this._actionArea.attr('height',b),this._originalBoxCoords.y=e,this._originalBoxCoords.height=b):(b=e-i,this._actionArea.attr('y',i),this._actionArea.attr('height',b),this._originalBoxCoords.y=i,this._originalBoxCoords.height=b),Px.d3.event.preventDefault()}},_finishActionBox:function(){if(Px.d3.select(document).on('mouseup.action',null),Px.d3.select(document).on('mousemove.action',null),this.mouseDown){this.mouseDown=!1;var a={};this._doesD3HaveValues(this._actionArea)&&0<this._originalBoxCoords.width&&0<this._originalBoxCoords.height&&(a.x1=this._originalBoxCoords.x,a.y1=this._originalBoxCoords.y,a.w=this._originalBoxCoords.width,a.h=this._originalBoxCoords.height,a.x2=a.x1+a.w,a.y2=a.y1+a.h,a.eX='ordinal'===this.xAxisType||'scaleBand'===this.xAxisType?this._getOrdinalRange(!0,a.x1,a.x2):'time'===this.xAxisType||'timeLocal'===this.xAxisType?[this.x.invert(a.x1).getTime(),this.x.invert(a.x2).getTime()]:[this.x.invert(a.x1),this.x.invert(a.x2)],a.eY='ordinal'===this.yAxisType||'scaleBand'===this.yAxisType?this._getOrdinalRange(!1,a.y2,a.y1):this._processYValues(function(b){return[b.invert(a.y2),b.invert(a.y1)]}),this.set('extentsData',a),this.fire('px-vis-extents-data-updated',{data:a,dataVar:'extentsData',method:'set'})),this._actionArea&&this._actionArea.remove&&this._actionArea.remove(),this._originalBoxCoords={x:null,y:null,width:null,height:null}}},_reportMouseCoords:function(){var a=Px.d3.mouse(this._rect.node());this.fire('px-vis-interaction-space-mouse-coords',{mouse:a,type:Px.d3.event.type})},_callCreateQuadtreeData:function(){this.hardMute&&this._createQuadtreeData()},_createQuadtreeData:function(){this.hasUndefinedArguments(arguments)||null!==this.domainChanged&&this.useQuadtree&&!this.preventWebWorkerSynchronization&&'ordinal'!==this.xAxisType&&'scaleBand'!==this.xAxisType&&this.debounce('buildQuadtree',function(){var a=this.width-this.margin.right-this.margin.left,b=this.height-this.margin.top-this.margin.bottom,c=this._createBaseDataObjForWebWorker(),d=window.performance.now();c.width=a,c.height=b,c.extents=[[0,0],[a,b]],c.searchType=this.searchType,c.hardMute=this.hardMute,c.mutedSeries=this.mutedSeries,Px.vis.scheduler.process({action:'createQuadtree',originatorName:this.nodeName,data:c,chartId:this.chartId})}.bind(this),50)},_createBaseDataObjForWebWorker:function(){var a={},b=this.isMultiY?Object.keys(this.y):'defaultAxis';if(a.completeSeriesConfig=this.completeSeriesConfig,a.keys=this.seriesKeys&&this.seriesKeys.length?this.seriesKeys:Object.keys(this.completeSeriesConfig),a.timeData=this.timeData,a.radial=this.radial,a.counterClockwise=this.counterClockwise,a.useDegrees=this.useDegrees,a.isMultiY=this.isMultiY,a.logBase=this.logBase,a.x={},a.x.range=this.x.range(),a.x.domain=this.x.domain(),a.x.type=this.x._scaleType,a.y={},this.isMultiY)for(var c=0;c<b.length;c++)a.y[b[c]]={range:this.y[b[c]].range(),domain:this.y[b[c]].domain(),type:this.y[b[c]]._scaleType};else a.y[b]={range:this.y.range(),domain:this.y.domain(),type:this.y._scaleType};return a}});</script></body></html>