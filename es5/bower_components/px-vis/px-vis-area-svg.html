<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-area-svg"><template><style include="px-vis-styles"></style></template></dom-module><script>Polymer({is:'px-vis-area-svg',behaviors:[PxVisBehavior.observerCheck,PxVisBehaviorD3.svg,PxVisBehaviorD3.axes,PxVisBehavior.dataset,PxVisBehavior.commonMethods,PxVisBehaviorD3.clipPath,PxVisBehavior.completeSeriesConfig,PxVisBehavior.dynamicConfigProperties,PxVisBehaviorD3.domainUpdate,PxVisBehavior.preventInitialDrawing],properties:{areaPath:{type:Object},areaBuilder:{type:Object},areaGroup:{type:Object},drawDebounceTime:{type:Number,value:10},_xKey:{type:String},_keySeriesDict:{type:Object,computed:'_computekeySeriesDict(completeSeriesConfig.*)'}},observers:['drawElement(svg, y, domainChanged, chartData.*, completeSeriesConfig.*, _keySeriesDict,  preventInitialDrawing)','_addClipPath(clipPath)'],detached:function(){this._doesD3HaveValues(this.areaPath)&&this.areaPath.remove(),this._doesD3HaveValues(this.areaGroup)&&this.areaGroup.remove()},drawElement:function(){this.hasUndefinedArguments(arguments)||!this.preventInitialDrawing&&(0<this.drawDebounceTime?this.debounce('draw',function(){null!==this.domainChanged&&this._doesD3HaveValues(this.svg)&&this.y&&0<this.chartData.length&&this._doesObjHaveValues(this.completeSeriesConfig)&&this._drawElementDebounced()}.bind(this),this.drawDebounceTime):this._drawElementDebounced())},_drawElementDebounced:function(){this._defineArea(),this._isObjEmpty(this.areaGroup)&&(this.areaGroup=this.svg.append('g').attr('series-id','areas').attr('class','series-area'));var a=this.areaGroup.selectAll('path.series-area').data(this.chartData);a.exit().remove(),a.enter().append('path').attr('class','series-area').merge(a).attr('series-id',function(a){var b=this._keySeriesDict[a.key];return'area_'+b}.bind(this)).attr('series-keys',function(a){return this._keySeriesDict[a.key]}.bind(this)).attr('d',function(a){return this.area(a)}.bind(this)).attr('fill',function(a){var b=this._keySeriesDict[a.key];return this.completeSeriesConfig[b].color}.bind(this)),this.areaPath=this.areaGroup.selectAll('path.series-area'),this._addClipPath(),this.fire('px-vis-area-svg-rendering-ended')},_defineArea:function(){this.area=Px.d3.area().x(function(a){return this.x(a.data[this._xKey])}.bind(this)).y0(function(a){return~~this.y(a[0])}.bind(this)).y1(function(a){return~~this.y(a[1])}.bind(this))},_addClipPath:function(){this.hasUndefinedArguments(arguments)||this.addClipPath(this.areaGroup)},_computekeySeriesDict:function(){if(!(this.hasUndefinedArguments(arguments)||this._isObjEmpty(this.completeSeriesConfig))){for(var a=Object.keys(this.completeSeriesConfig),b={},c=0;c<a.length;c++){var d=a[c],e=this.completeSeriesConfig[d].y;b[e]=d}return this._xKey=this.completeSeriesConfig[a[0]].x,b}}});</script></body></html>