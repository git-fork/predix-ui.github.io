<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-chart.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="px-vis-axis.html"><link rel="import" href="px-vis-axis-interaction-space.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-interactive-axis"><template><style include="px-vis-styles"></style><px-vis-axis id="axis_[[dimension]]" class="interactiveAxis" svg="[[_axisGroup]]" axis="[[y]]" series-id="[[dimension]]" height="[[height]]" width="[[width]]" margin="[[margin]]" orientation="[[orientation]]" title="[[title]]" title-location="[[titleLocation]]" title-type-size="[[titleTypeSize]]" label-type-size="[[labelTypeSize]]" stroke-width="[[strokeWidth]]" outer-tick-size="0" tick-values="[[tickValues]]" truncation-length="[[truncationLength]]" complete-series-config="[[completeSeriesConfig]]" append-unit-in-title="[[appendUnitInTitle]]" unit="[[unit]]" prevent-series-bar="[[preventSeriesBar]]" domain-changed="[[domainChanged]]" selected-domain="[[selectedDomain]]" title-truncation="[[titleTruncation]]" disable-ticks="[[disableTicks]]" label-position="[[labelPosition]]" axis-color="[[axisColor]]" ticks="[[ticks]]" label-rotation="[[labelRotation]]" label-translation="[[labelTranslation]]" series-on-axis="[[seriesOnAxis]]" muted-series="[[mutedSeries]]" drawn-tick-values="{{drawnTickValues}}" rebuild-on-draw="[[_rebuildOnDraw]]" prevent-initial-drawing="[[preventInitialDrawing]]"></px-vis-axis><px-vis-axis-interaction-space id="axisIS" svg="[[_interactiveGroup]]" width="[[width]]" height="[[height]]" margin="[[margin]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" complete-series-config="[[completeSeriesConfig]]" dimension="[[dimension]]" dimensions="[[dimensions]]" series-key="[[seriesKey]]" category-key="[[categoryKey]]" chart-data="[[chartData]]" muted-series="{{mutedSeries}}" combined-muted-series="[[combinedMutedSeries]]" hard-mute="[[hardMute]]" radial="[[radial]]" center-offset="[[centerOffset]]" smaller-side="[[smallerSide]]" brush-to-remove="[[brushToRemove]]" brush-domains="[[brushDomains]]" drag-container-elem="[[_returnDragContainer(svg)]]" cartesian-drag-behavior="[[cartesianDragBehavior]]" redraw-series="[[redrawSeries]]" dynamic-redraw="[[dynamicRedraw]]" action-config="[[actionConfig]]" orientation="[[orientation]]" time-domain="[[timeDomain]]" title-truncation="[[titleTruncation]]"></px-vis-axis-interaction-space></template></dom-module><script>Polymer({is:'px-vis-interactive-axis',behaviors:[PxVisBehavior.observerCheck,PxVisBehaviorD3.svg,PxVisBehavior.sizing,PxVisBehavior.completeSeriesConfig,PxVisBehavior.commonMethods,PxVisBehaviorD3.axisConfig,PxVisBehavior.dataset,PxVisBehavior.dimensions,PxVisBehavior.mutedSeries,PxVisBehavior.combinedMutedSeries,PxVisBehaviorD3.dynamicRedraw,PxVisBehaviorD3.domainUpdate,PxVisBehaviorD3.selectedDomain,PxVisBehavior.radial,PxVisBehaviorD3.radialAxisConfig,PxVisBehavior.seriesToAxes,PxVisBehaviorChart.subConfiguration,PxVisBehavior.preventInitialDrawing,PxVisBehavior.categories,PxVisBehavior.actionConfigGeneric,PxVisBehavior.interactionSpaceConfigGeneric,PxVisBehavior.brushDomains,PxVisBehavior.timeDomain,PxVisBehavior.titleTruncation],properties:{_interactiveGroup:{type:Object},dimension:{type:String},appendUnitInTitle:{type:Boolean,value:!1},displayedValues:{type:Object,notify:!0,value:function(){return{}}},showTicksOnHover:{type:Boolean,value:!1},disableTicks:{type:Boolean,value:!1},length:{type:Number,value:null},brushToRemove:{type:Boolean,value:!1},_pokeTitleLocation:{type:Boolean,value:!1},recalcTicks:{type:Boolean,value:!1},orientationFromDimensions:{type:Boolean,value:!1},leftAxisSize:{type:Number},rightAxisSize:{type:Number},disableBrush:{type:Boolean,value:!1},preventSeriesBar:{type:Boolean,value:!1},cartesianDragBehavior:{type:Boolean,value:!1},_pokeOrientation:{type:Boolean,value:!1},axisConfig:{type:Object,value:function(){return{}}},allowEmptyTitle:{type:Boolean,value:!1},_commonAxisRanAtLeastOnce:{type:Boolean},_axisDoneCounter:{type:Number,value:0},_rebuildOnDraw:{type:Boolean,value:!0},hideAndShowOnHover:{type:Boolean,value:!1},_axisGroup:{type:Object},smallerSide:{type:Number,value:0},_isDirty:{type:Boolean,value:!1}},observers:['_axisConfigChanged(axisConfig.*)','_createGroup(domainChanged, x, svg)','_interactionSpaceConfigChanged(interactionSpaceConfig.*)'],listeners:{"px-axis-done":'_setAxisStyles',"dom-change":'_axisConfigChanged'},attached:function(){this._isDirty&&(this._createGroup(),this._isDirty=!1)},detached:function(){this._doesD3HaveValues(this._interactiveGroup)&&(this._interactiveGroup.remove(),this._interactiveGroup=null),this._isDirty=!0},_returnDragContainer:function(){return this.hasUndefinedArguments(arguments)?void 0:this.svg.node()},_setDragBehavior:function(){this.cartesianDragBehavior?this.createCartesianDrag():this.createParallelAxisDrag()},_axisConfigChanged:function(){this.hasUndefinedArguments(arguments)||this.axisConfig&&this.dimension&&this._applyConfigToElement(this.axisConfig,this.$$('#axis_'+this.dimension))},_interactionSpaceConfigChanged:function(){this.hasUndefinedArguments(arguments)||this.interactionSpaceConfig&&this.dimension&&this._applyConfigToElement(this.interactionSpaceConfig,this.$$('#axisIS'))},_createGroup:function(){if(!this.hasUndefinedArguments(arguments)&&this._doesD3HaveValues(this.svg)){this;if(this._isD3Empty(this._interactiveGroup)){var a=this.svg.append('g').attr('class','dimension').attr('dimension',this.dimension);this._interactiveGroup=a,this._axisGroup=this._interactiveGroup.append('g').attr('class','axis-g')}else this._interactiveGroup.attr('dimension',this.dimension);this._interactiveGroup.attr('transform',this._calcTransformation.bind(this))}},_calcTransformation:function(){var a=this.dimension;return this.radial?this.x(a)||0===this.x(a)?'rotate('+(180*this.x(a)/Math.PI+180)+')':'':this.x(a)||0===this.x(a)?'translate('+this.x(a)+',0)':''},_setAxisStyles:function(){if(this._interactiveGroup){var a=this;this.hideAndShowOnHover?(this._commonAxisRanAtLeastOnce=!0,this._interactiveGroup.selectAll('g.tick text').classed('hideCommon',!0),this._interactiveGroup.selectAll('.hideCommon').style('display','none'),this._interactiveGroup.on('mouseover',function(){a._interactiveGroup.selectAll('.hideCommon').style('display',null),a._interactiveGroup.selectAll('.hideCommon').style('fill',a._checkThemeVariable('--px-vis-axis-common-tick-color',a.axisColor))}).on('mouseout',function(){a._interactiveGroup.selectAll('.hideCommon').style('display','none'),a._interactiveGroup.selectAll('.hideCommon').style('fill',a._checkThemeVariable('--px-vis-axis-color',a.axisColor))})):this._commonAxisRanAtLeastOnce&&(this._interactiveGroup.selectAll('.hideCommon').style('display',null),this._interactiveGroup.selectAll('.hideCommon').classed('hideCommon',!1))}},recalcTranform:function(){this._interactiveGroup.attr('transform',this._calcTransformation.bind(this))}});</script></body></html>