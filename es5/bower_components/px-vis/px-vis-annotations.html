<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="../px-icon-set/px-icon-set-communication.html"><link rel="import" href="css/px-vis-annotations-styles.html"></head><body><dom-module id="px-vis-annotations"><template><style include="px-vis-annotations-styles"></style><template id="template" is="dom-repeat" items="[[annotationData]]" as="item"><px-icon icon="px-com:comment" data="[[item]]" class$="annotation--icon [[strongClass]]" style$="[[_getTransform(item, x, y, domainChanged, completeSeriesConfig, forceRecalc, hide)]]" on-mouseover="_mouseOver" on-mouseleave="_mouseLeave" on-click="_mouseClick" on-mouseenter="_mouseEnter" on-mouseout="_mouseOut"></px-icon></template></template></dom-module><script>Polymer({is:'px-vis-annotations',behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.sizing,PxVisBehaviorD3.svg,PxVisBehavior.annotationData],properties:{_iconWidth:{type:Number,value:12},_iconHeight:{type:Number,value:12},forceRecalc:{type:Boolean,value:!1},hide:{type:Boolean,value:!1},strongClass:{type:String,value:'',computed:'_computeStrongClass(showStrongIcon)'}},_computeStrongClass:function(a){return a?'strong':''},_getTransform:function(a){var b=Math.floor;if(!this.hasUndefinedArguments(arguments)){var c,d;return this.hide?'display:none':(this.fire('px-vis-request-pixel-for-data',{callback:function(a){c=a.pixel,d=a.outOfBounds}.bind(this),data:[a.x,a.y],series:a.series,margin:this.margin}),d||isNaN(c[0])||isNaN(c[1])?'display: none':(c[0]-=this._iconWidth/2,c[1]-=this._iconHeight,'transform: translate('+b(c[0])+'px,'+b(c[1])+'px)'))}},_mouseOver:function(a){this._requestAnnotation(a,'over')},_mouseLeave:function(a){this._requestAnnotation(a,'leave')},_mouseClick:function(a){this._requestAnnotation(a,'click')},_mouseEnter:function(a){this._requestAnnotation(a,'enter')},_mouseOut:function(a){this._requestAnnotation(a,'out')},_requestAnnotation:function(a,b){var c=Polymer.dom(a).localTarget;this.fire('px-vis-event-request',{eventName:'px-vis-annotation-'+b,data:{annotationData:this.$.template.itemForElement(c),icon:c}})}});</script></body></html>