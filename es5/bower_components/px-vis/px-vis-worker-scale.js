var extentCalc={};extentCalc._defaultScaleValue={x:[Infinity,-Infinity],y:[Infinity,-Infinity]},extentCalc.determineExtents=function(a){var b="ordinal"===this.xAxisType||"scaleBand"===this.xAxisType,c="ordinal"===this.yAxisType||"scaleBand"===this.yAxisType,d="time"===this.xAxisType||"timeLocal"===this.xAxisType,e=!d,f=!0,g=Object.keys(this.completeSeriesConfig),h={x:[],y:[]};if(h.x=this._checkForExtents(b,this.chartExtents,this.dataExtents,"x"),h.y=this.axes&&this.axes.length?this._calcMultiAxisExtents(a):this._checkForExtents(c,this.chartExtents,this.dataExtents,"y"),0<h.x.length&&h.x[0]!==Infinity&&h.x[1]!==-Infinity&&(d=!1,e=!1),(!Array.isArray(h.y)||0<h.y.length&&h.y[0]!==Infinity&&h.y[1]!==-Infinity)&&(f=!1),0===a.length&&(d=!1,e=!1,f=!1),(e||f||d)&&this._findMinMax(a,e,f,b,c,d,h,g),h.x[0]===Infinity&&(h.x[0]=0),h.x[1]===-Infinity&&(h.x[1]=1),Array.isArray(h.y)&&h.y[0]===Infinity&&(h.y[0]=0),Array.isArray(h.y)&&h.y[1]===-Infinity&&(h.y[1]=1),h.x[1]===h.x[0]&&(h.x[0]-=0.5,h.x[1]+=0.5),Array.isArray(h.y))h.y[1]===h.y[0]&&(h.y[0]-=0.5,h.y[1]+=0.5);else for(var j=Object.keys(h.y),k=0;k<j.length;k++)h.y[j[k]][0]===h.y[j[k]][1]&&(h.y[j[k]][0]-=0.5,h.y[j[k]][1]+=0.5);return h}.bind(extentCalc),extentCalc._checkForExtents=function(a,b,c,d){var e=[];if(a)c&&c[d]&&(e=JSON.parse(JSON.stringify(c[d]))),b&&b[d]&&(e=JSON.parse(JSON.stringify(b[d])));else{var f=!1;e=this._checkChartExtents(b,d),f=!(2!==e.length),e=this._checkDataExtents(c,b,d,f,e),2>e.length&&(e=[this._defaultScaleValue[d][0],this._defaultScaleValue[d][1]])}return e}.bind(extentCalc),extentCalc._checkChartExtents=function(a,b){var c=[];return a&&a[b]&&2===a[b].length&&(c[0]="dynamic"===a[b][0]?Infinity:a[b][0],c[1]="dynamic"===a[b][1]?-Infinity:a[b][1]),c}.bind(extentCalc),extentCalc._checkDataExtents=function(a,b,c,d,e){var f=e||[];return a&&a[c]&&2===a[c].length&&(d?(f[0]="dynamic"===b[c][0]?a[c][0]:b[c][0],f[1]="dynamic"===b[c][1]?a[c][1]:b[c][1]):(f[0]=Math.min(a[c][0],this._defaultScaleValue[c][0]),f[1]=Math.max(a[c][1],this._defaultScaleValue[c][1]))),f}.bind(extentCalc),extentCalc._findMinMax=function(a,b,c,d,e,f,g,h){var j,k,l=a.length,m=this.completeSeriesConfig[h[0]].x,n=this.completeSeriesConfig[h[0]].y,o=d||g.x[0]!==Infinity?!1:!0,p=d||g.x[1]!==-Infinity?!1:!0,q=e||g.y[0]!==Infinity?!1:!0,r=e||g.y[1]!==-Infinity?!1:!0;if(f&&this._findTimeMM(g,a,l,m,o,p),b||c)for(var s=0;s<l;s++)j=this._getDataExtents(a[s],h,"x"),k=this._getDataExtents(a[s],h,"y"),b&&this._processDataValues(d,g,a,"x",m,s,o,p,j[0],j[1]),c&&this._processDataValues(e,g,a,"y",n,s,q,r,k[0],k[1])}.bind(extentCalc),extentCalc._getDataExtents=function(b,c,d){for(var e=[],a=0;a<c.length;a++){var f,g=c[a];this.mutedSeries[c[a]]||(f=b[this.completeSeriesConfig[g][d]],(f||0===f)&&e.push(f))}return[Math.min.apply(null,e),Math.max.apply(null,e)]}.bind(extentCalc),extentCalc._findTimeMM=function(a,b,c,d,e,f){e&&this._setMin(a.x,b[0][d]),f&&this._setMax(a.x,b[c-1][d])}.bind(extentCalc),extentCalc._setMin=function(a,b){null===b||(isNaN(a[0])||a[0]>b)&&(a[0]=b)}.bind(extentCalc),extentCalc._setMax=function(a,b){null===b||(isNaN(a[1])||a[1]<b)&&(a[1]=b)}.bind(extentCalc),extentCalc._processDataValues=function(a,b,c,d,e,f,g,h,i,j){a?-1===b[d].indexOf(c[f][e])&&b[d].push(c[f][e]):(g&&this._setMin(b[d],i),h&&this._setMax(b[d],j))}.bind(extentCalc),extentCalc._checkInSeriesConfig=function(b,c){for(var a,d=0;d<this.seriesToAxes[c].length;d++)a=this.seriesToAxes[c][d],this.hardMute&&this.mutedSeries[a]||(b[c][0]=this.completeSeriesConfig[a].yMin||0===this.completeSeriesConfig[a].yMin?Math.min(this.completeSeriesConfig[a].yMin,b[c][0]):b[c][0],b[c][1]=this.completeSeriesConfig[a].yMax||0===this.completeSeriesConfig[a].yMax?Math.max(this.completeSeriesConfig[a].yMax,b[c][1]):b[c][1])}.bind(extentCalc),extentCalc._applyChartExtents=function(b,c){var a=this.chartExtents[c]?c:"y";this.chartExtents[a]&&(b[c][0]="dynamic"===this.chartExtents[a][0]?b[c][0]||0===b[c][0]?b[c][0]:Infinity:this.chartExtents[a][0],b[c][1]="dynamic"===this.chartExtents[a][1]?b[c][1]||0===b[c][1]?b[c][1]:-Infinity:this.chartExtents[a][1])}.bind(extentCalc),extentCalc._searchForExtents=function(a,b,c){for(var d=Object.keys(b),e=0;e<c.length;e++)for(var f=0;f<d.length;f++){var g=d[f],h=this.completeSeriesConfig[g].y,i=b[g],j=i.axis;i.min&&(c[e][h]||0===c[e][h])&&(a[j][0]=Math.min(c[e][h],a[j][0])),i.max&&(c[e][h]||0===c[e][h])&&(a[j][1]=Math.max(c[e][h],a[j][1]))}}.bind(extentCalc),extentCalc._calcSeriesToSearch=function(b,c,d){for(var e,f=0;f<this.seriesToAxes[c].length;f++)e=this.seriesToAxes[c][f],this.hardMute&&this.mutedSeries[e]||(d[e]={axis:c,min:b[c][0]===Infinity,max:b[c][1]===-Infinity})}.bind(extentCalc),extentCalc._calcMultiAxisExtents=function(b){for(var c,a,d=!1,e={},f={},g=0;g<this.axes.length;g++)c=this.axes[g],e[c]=[],e[c][0]=this._defaultScaleValue.y[0],e[c][1]=this._defaultScaleValue.y[1],this._checkInSeriesConfig(e,c),this.chartExtents&&this._applyChartExtents(e,c),(e[c][0]===Infinity||e[c][1]===-Infinity)&&(d=!0,this._calcSeriesToSearch(e,c,f));d&&this._searchForExtents(e,f,b),a=Object.keys(e);for(var g=0;g<a.length;g++)(e[a[g]][0]===Infinity||e[a[g]][1]===-Infinity)&&(e[a[g]]=[0,1]);return e}.bind(extentCalc);