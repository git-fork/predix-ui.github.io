<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="px-vis-behavior-common.html"><link rel="import" href="px-vis-behavior-d3.html"><link rel="import" href="px-vis-behavior-datetime.html"><link rel="import" href="px-vis-behavior-chart.html"><link rel="import" href="px-vis-behavior-scale.html"><link rel="import" href="px-vis-behavior-renderer.html"><link rel="import" href="px-vis-svg-canvas.html"><link rel="import" href="px-vis-line-svg.html"><link rel="import" href="px-vis-axis.html"><link rel="import" href="px-vis-brush.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="px-vis-behavior-colors.html"><link rel="import" href="css/px-vis-styles.html"></head><body><dom-module id="px-vis-chart-navigator"><template><style include="px-vis-styles"></style><div id="wrapper" class="inline--flex" style="height:100%;width:100%"><px-vis-svg-canvas class="inline--flex flex__item--msfix" width="[[width]]" height="[[height]]" margin="[[margin]]" svg="{{svg}}" px-svg-elem="{{pxSvgElem}}" canvas-context="{{canvasContext}}"></px-vis-svg-canvas><template is="dom-if" if="[[!renderToCanvas]]"><px-vis-clip-path svg="[[layer.1]]" width="[[width]]" height="[[height]]" margin="[[margin]]" series-clip-path="{{seriesClipPath}}"></px-vis-clip-path></template><template is="dom-repeat" items="[[_seriesKeys]]"><template is="dom-if" if="[[_limitSeries(index,navSeriesLimit)]]"><template is="dom-if" if="[[_chartTypeLine(item,completeSeriesConfig)]]" restamp=""><template is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-line-canvas id="lineCanvas" canvas-context="[[canvasContext]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" show-gaps="[[showGaps]]" width="[[width]]" height="[[height]]" margin="[[margin]]" clip-path=""></px-vis-line-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-line-svg svg="[[layer.1]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" x="[[x]]" y="[[y]]" clip-path="[[seriesClipPath]]" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]"></px-vis-line-svg></template></template><template is="dom-if" if="[[_chartTypeScatter(item,completeSeriesConfig)]]" restamp=""><template is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-scatter-canvas canvas-context="[[canvasContext]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" width="[[width]]" height="[[height]]" margin="[[margin]]" x="[[x]]" y="[[y]]" clip-path="" domain-changed="[[domainChanged]]" marker-size="2"></px-vis-scatter-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-scatter svg="[[layer.1]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" marker-size="2" x="[[x]]" y="[[y]]" clip-path="[[seriesClipPath]]" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]"></px-vis-scatter></template></template></template></template><px-vis-axis id="xAxis" svg="[[layer.0]]" axis="[[x]]" axis-id="x" axis-type="[[xAxisType]]" height="[[height]]" width="[[width]]" margin="[[margin]]" orientation="bottom" prevent-series-bar="" complete-series-config="[[completeSeriesConfig]]" domain-changed="[[domainChanged]]"></px-vis-axis><px-vis-brush svg="[[layer.2]]" axis="[[x]]" height="[[height]]" width="[[width]]" margin="[[margin]]" domain-changed="[[domainChanged]]" chart-domain="[[chartDomainX]]" selected-domain="{{selectedDomain}}" gradient-overlay="[[gradientOverlay]]"></px-vis-brush></div></template></dom-module><script>Polymer({is:'px-vis-chart-navigator',behaviors:[PxVisBehavior.observerCheck,PxVisBehaviorScale.scale,PxVisBehavior.sizing,PxVisBehavior.formatting,PxVisBehaviorTime.datetime,PxVisBehaviorD3.svg,PxVisBehaviorD3.axes,PxVisBehaviorD3.axis,PxVisBehaviorD3.selectedDomain,PxVisBehavior.dataset,PxVisBehavior.completeSeriesConfig,PxVisBehavior.commonMethods,PxVisBehavior.dataExtents,PxVisBehavior.axisTypes,PxVisBehaviorD3.canvasContext,PxVisBehaviorD3.renderToCanvas,PxVisBehaviorChart.chartCommon,Polymer.IronResizableBehavior,PxVisBehaviorChart.saveImage,PxVisBehaviorChart.chartAutoResize,PxVisBehaviorD3.domainUpdate,PxVisBehaviorChart.registerConfigs,PxVisBehaviorChart.axisConfigs,PxVisBehaviorChart.subConfiguration,PxVisBehaviorChart.layers,PxColorsBehavior.dataVisColorTheming,PxVisBehaviorChart.webWorkerSynchronization,PxVisBehaviorD3.clipPath,PxVisBehaviorRenderer.base,PxVisBehavior.mutedSeries],properties:{navSeriesLimit:{type:Number,value:Infinity,notify:!0},chartDomainX:{type:Array,notify:!0},chartDomainY:{type:Array,notify:!0},gradientOverlay:{type:Boolean,value:!1},range:{type:Object,observer:'_rangeChanged'},disableEmptyRender:{type:Boolean,value:!1},chartExtents:{type:Object,notify:!0,value:function(){return{x:[Infinity,-Infinity],y:[Infinity,-Infinity]}}}},observers:['_xAxisConfigChanged(xAxisConfig.*)','_setXScale(width, margin, xAxisType)','_setYScale(height, margin, yAxisType)','_setDomain(wwDataSyncCounter, x, y, completeSeriesConfig, dataExtents)','_setDomain(chartExtents, dataExtents)','_keepDataInSync(chartData.*, chartId)','_renderChartData(domainChanged, canvasContext, chartData.*, mutedSeries.*, completeSeriesConfig.*, preventInitialDrawing, renderToCanvas)'],listeners:{"iron-resize":'_onIronResize'},attached:function(){this.set('numberOfLayers',3),this._onIronResize()},_xAxisConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.xAxisConfig,this.$.xAxis)},_limitSeries:function(a){return this.hasUndefinedArguments(arguments)?void 0:a<this.navSeriesLimit},resizeChart:function(){this._onIronResize()},_onIronResize:function(){this.debounce('ironresize',function(){if(!this.preventResize){var a=this.$.wrapper.getBoundingClientRect();this.set('width',a.width),this.set('height',a.height)}},100)},_rangeChanged:function(){if(!this.hasUndefinedArguments(arguments)){var a=[+Px.moment(this.range.from,Px.moment.ISO_8601).format('x'),+Px.moment(this.range.to,Px.moment.ISO_8601).format('x')];if(!this.disableEmptyRender&&(!this.chartData||0===this.chartData.length))this.seriesConfig&&this._doesObjHaveValues(this.seriesConfig)||this.set('seriesConfig',{dummy:{type:'line',name:'dummy',x:'x',y:'y'}}),this._updateDummyData(a),this.set('dataExtents',{x:a,y:[Infinity,-Infinity]});else if(this._doesObjHaveValues(this.dataExtents)&&this._doesObjHaveValues(this.dataExtents.x)&&this._doesObjHaveValues(this.dataExtents.y)){if(!this.disableEmptyRender){var b=this.seriesConfig[Object.keys(this.seriesConfig)[0]];2===this.chartData.length&&0===this.chartData[0][b.y]&&0===this.chartData[1][b.y]&&this._updateDummyData(a)}this.set('dataExtents',{x:a,y:[this.dataExtents.y[0],this.dataExtents.y[1]]});var c={x:[a[0],a[1]],y:this.selectedDomain.y};this.set('selectedDomain',c)}}},_updateDummyData:function(a){var b=this.seriesConfig[Object.keys(this.seriesConfig)[0]],c={},d={};c[b.x]=a[0],c[b.y]=0,d[b.x]=a[1],d[b.y]=0,this.set('chartData',[c,d])}});</script></body></html>