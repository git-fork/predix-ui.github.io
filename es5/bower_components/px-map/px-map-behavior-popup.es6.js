(function(){'use strict';window.PxMapBehavior=window.PxMapBehavior||{},PxMapBehavior.PopupImpl={properties:{closeOnControlInteract:{type:Boolean,value:!1}},addInst:function(a){if(a&&a.getPopup&&a.getPopup()!==this.elementInst){a.bindPopup(this.elementInst);var b=this._handleControlClick.bind(this,a);this.bindEvents({controlclick:b},a._mapToAdd)}},removeInst:function(a){a&&a.getPopup&&a.getPopup()===this.elementInst&&a.unbindPopup(this.elementInst)},_handleControlClick:function(a){this.closeOnControlInteract&&a&&a.closePopup&&a.closePopup()}},PxMapBehavior.Popup=[PxMapBehavior.Layer,PxMapBehavior.PopupImpl],PxMapBehavior.InfoPopupImpl={properties:{title:{type:String,observer:'shouldUpdateInst'},description:{type:String,observer:'shouldUpdateInst'},imgSrc:{type:String,observer:'shouldUpdateInst'}},createInst:function(a){return new PxMap.InfoPopup(a)},updateInst:function(a,b){var c={};a.title!==b.title&&(c.title=b.title),a.description!==b.description&&(c.description=b.description),a.imgSrc!==b.imgSrc&&(c.imgSrc=b.imgSrc),Object.keys(c).length&&this.elementInst.updateSettings(c)},getInstOptions:function(){return{title:this.title,description:this.description,imgSrc:this.imgSrc,styleScope:this.isShadyScoped()?this.getShadyScope():void 0}}},PxMapBehavior.InfoPopup=[PxMapBehavior.Popup,PxMapBehavior.InfoPopupImpl],PxMapBehavior.DataPopupImpl={properties:{title:{type:String,observer:'shouldUpdateInst'},data:{type:Object,value:function(){return{}},observer:'shouldUpdateInst'}},canAddInst:function(){return this.data&&'object'===babelHelpers.typeof(this.data)&&Object.keys(this.data).length},createInst:function(a){return new PxMap.DataPopup(a)},updateInst:function(a,b){var c={};a.title!==b.title&&(c.title=b.title),a.dataHash!==b.dataHash&&(c.data=b.data),Object.keys(c).length&&this.elementInst.updateSettings(c)},getInstOptions:function(){var a=this._getValidData();return{title:this.title,data:a,dataHash:JSON.stringify(a),styleScope:this.isShadyScoped()?this.getShadyScope():void 0}},_getValidData:function(){return'object'===babelHelpers.typeof(this.data)?this.data:(console.log('PX-MAP CONFIGURATION ERROR:\n          You entered an invalid `data` attribute for '+this.is+'. You must pass a valid object.\n          An attribute of type `'+babelHelpers.typeof(this.data)+'` was passed.'),{})}},PxMapBehavior.DataPopup=[PxMapBehavior.Popup,PxMapBehavior.DataPopupImpl],window.PxMap=window.PxMap||{};var a=function(a){function b(){var a,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,b);var d=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._createPopup(c),a=d,babelHelpers.possibleConstructorReturn(d,a)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'onAdd',value:function(a){if(a.__addShadyScope&&!Polymer.Element){var b=this.getPane(),c=b.appendChild;b.appendChild=function(c){a.__addShadyScope(c,!1);var e=Polymer.dom(b);e.appendChild(c)}}L.Popup.prototype.onAdd.call(this,a),a.__addShadyScope&&!Polymer.Element&&(b.appendChild=c)}},{key:'_updateContent',value:function(){if(this._map&&this._map.__addShadyScope&&this._content.length){var a=this._contentNode,b={innerHTML:null};this._contentNode=b}L.DivOverlay.prototype._updateContent.call(this),this._map&&this._map.__addShadyScope&&this._content.length&&('string'===typeof b.innerHTML&&(Polymer.dom(a).innerHTML=b.innerHTML),this._contentNode=a)}},{key:'_createPopup',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.settings=a;var b=a.title,c=a.description,d=a.imgSrc,e=a.styleScope,f=this._generatePopupContent(b,c,d);this.initialize({className:'map-popup-info '+(e||''),maxWidth:400,minWidth:300}),this.setContent(f)}},{key:'_generatePopupContent',value:function(a,b,c){var d=this,e=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];return c.length&&void 0!==c[0]?a.call.apply(a,[d].concat(c)):''};return'\n        <section class="map-box-info">\n          '+e(function(a){return'\n        <div class="map-box-info__image">\n          <img src="'+a+'" />\n        </div>\n      '},c)+'\n          <div class="map-box-info__content">\n            '+e(function(a){return'\n        <p class="map-box-info__title">'+a+'</p>\n      '},a)+'\n            '+e(function(a){return'\n        <p class="map-box-info__description">'+a+'</p>\n      '},b)+'\n          </div>\n        </section>\n      '}},{key:'updateSettings',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.settings,a);var b=this.settings,c=b.title,d=b.description,e=b.imgSrc,f=b.styleScope,g=this._generatePopupContent(c,d,e);this.setContent(g),this.update()}}]),b}(L.Popup);PxMap.InfoPopup=a;var b=function(a){function b(){var a,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,b);var d=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._createPopup(c),a=d,babelHelpers.possibleConstructorReturn(d,a)}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'onAdd',value:function(a){if('object'===babelHelpers.typeof(this.settings.data)&&0!==Object.keys(this.settings.data).length){if(a.__addShadyScope&&!Polymer.Element){var b=this.getPane(),c=b.appendChild;b.appendChild=function(c){a.__addShadyScope(c,!1),Polymer.dom(b).appendChild(c)}}L.Popup.prototype.onAdd.call(this,a),a.__addShadyScope&&!Polymer.Element&&(b.appendChild=c)}}},{key:'_updateContent',value:function(){if(this._map&&this._map.__addShadyScope&&this._content.length){var a=this._contentNode,b={innerHTML:null};this._contentNode=b}L.DivOverlay.prototype._updateContent.call(this),this._map&&this._map.__addShadyScope&&this._content.length&&('string'===typeof b.innerHTML&&(Polymer.dom(a).innerHTML=b.innerHTML),this._contentNode=a)}},{key:'_createPopup',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.settings=a;var c=a.title,d=a.data,e=a.styleScope,f=this._generatePopupContent(c,d);this.initialize({className:'map-popup-data '+(e||''),maxWidth:400,minWidth:300}),this.setContent(f)}},{key:'_generatePopupContent',value:function(a,b){var c=this,d=function(a){for(var b=arguments.length,d=Array(1<b?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];return d.length&&void 0!==d[0]?a.call.apply(a,[c].concat(d)):''},e=function(a,b){return'\n        <div class="map-data-box__table__cell"><p>'+a+'</p></div>\n        <div class="map-data-box__table__cell"><p>'+b+'</p></div>\n      '};return'\n        <section class="map-box-data">\n          '+d(function(a){return'\n        <div class="map-data-box__header">\n          <h3 class="map-data-box__header__text">'+a+'</h3>\n        </div>\n      '},a)+'\n          '+d(function(a){var b=Object.keys(a).reduce(function(b,c){return b.concat([e(c,a[c])])},[]).join('');return'\n          <div class="map-data-box__table">\n            '+b+'\n          </div>\n        '},b)+'\n        </section>\n      '}},{key:'updateSettings',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.settings,a);var b=this.settings,c=b.title,d=b.data,e=this._generatePopupContent(c,d);this.isOpen()&&0===Object.keys(d).length&&this._close(),this.setContent(e),this.update()}}]),b}(L.Popup);PxMap.DataPopup=b})();