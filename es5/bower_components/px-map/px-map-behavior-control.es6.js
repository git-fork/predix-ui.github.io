(function(){'use strict';window.PxMapBehavior=window.PxMapBehavior||{},PxMapBehavior.ControlImpl={properties:{position:{type:String,value:'bottomright',observer:'shouldUpdateInst'}},addInst:function(a){this.elementInst.addTo(a)},removeInst:function(){this.elementInst.remove()},getInstOptions:function(){return{position:this._getValidPosition()}},_getValidPosition:function(){var a=/^(topright|topleft|bottomright|bottomleft)$/.test(this.position);return a?this.position:(console.log('PX-MAP CONFIGURATION ERROR:\n          You entered an invalid `position` attribute \''+this.position+'\' for '+this.is+'.\n          Position must be a string with one of the following values:\n          - \'topright\'\n          - \'topleft\'\n          - \'bottomright\'\n          - \'bottomleft\'\n          Defaulting to \'bottomright\'.'),'bottomright')}},PxMapBehavior.Control=[PxMapBehavior.Layer,PxMapBehavior.ControlImpl],PxMapBehavior.ZoomControlImpl={properties:{language:{type:String,value:'en'},resources:{type:Object,value:function(){return{en:{"Zoom in":'Zoom in',"Zoom out":'Zoom out'}}}}},createInst:function(a){return new PxMap.ZoomControl(a)},updateInst:function(a,b){a.position!==b.position&&this.elementInst.setPosition(b.position)},getInstOptions:function(){var a=PxMapBehavior.ControlImpl.getInstOptions.call(this);return a.position=this.position,a.zoomInText='<px-icon icon="px-utl:add"></px-icon>',a.zoomOutText='<px-icon icon="px-utl:remove"></px-icon>','function'===typeof this.localize&&(a.zoomInTitle=this.localize('Zoom in'),a.zoomOutTitle=this.localize('Zoom out')),a}},PxMapBehavior.ZoomControl=[Polymer.AppLocalizeBehavior,PxMapBehavior.Control,PxMapBehavior.ZoomControlImpl],PxMapBehavior.ScaleControlImpl={properties:{imperialUnits:{type:Boolean,value:!1,observer:'shouldUpdateInst'},metricUnits:{type:Boolean,value:!1,observer:'shouldUpdateInst'},reverseColors:{type:Boolean,value:!1,observer:'shouldUpdateInst'}},createInst:function(a){return new PxMap.ScaleControl(a)},updateInst:function(a,b){a.position!==b.position&&this.elementInst.setPosition(b.position),a.reverseColors!==b.reverseColors&&this.elementInst.setReverseColors(b.reverseColors),a.metric!==b.metric&&this.elementInst.showMetric(b.metric),a.imperial!==b.imperial&&this.elementInst.showImperial(b.imperial)},getInstOptions:function(){var a=PxMapBehavior.ControlImpl.getInstOptions.call(this);return a.imperial=this.imperialUnits,a.metric=this.metricUnits,a.reverseColors=this.reverseColors,a}},PxMapBehavior.ScaleControl=[PxMapBehavior.Control,PxMapBehavior.ScaleControlImpl],PxMapBehavior.LocateControlImpl={properties:{locateTitle:{type:String,value:'Zoom to your location',observer:'shouldUpdateInst'},moveToLocation:{type:Boolean,value:!1},moveMaxZoom:{type:Number,observer:'shouldUpdateInst'},lastFoundLocation:{type:Object,value:function(){return{}},notify:!0}},addInst:function(a){PxMapBehavior.ControlImpl.addInst.call(this,a);var b=this._handleLocationFound.bind(this),c=this._handleLocationError.bind(this),d=this._handleLocationTap.bind(this);this.bindEvents({locationfound:b,locationerror:c,controlclick:d})},removeInst:function(a){PxMapBehavior.ControlImpl.removeInst.call(this,a)},createInst:function(a){return new PxMap.LocateControl(a)},updateInst:function(a,b){a.position!==b.position&&this.elementInst.setPosition(b.position),a.moveMaxZoom!==b.moveMaxZoom&&this.elementInst.setMoveMaxZoom(b.moveMaxZoom)},getInstOptions:function(){return{position:this.position,locateIcon:'<px-icon icon="px-vis:crosshair"></px-icon>',locateTitle:this.locateTitle,moveToLocation:this.moveToLocation,moveMaxZoom:this.moveMaxZoom}},_handleLocationFound:function(a){if(a){var b={lat:a.latitude||null,lng:a.longitude||null,timestamp:a.timestamp||null,bounds:a.bounds||null};b.accuracy=a.bounds.getCenter()&&a.bounds.getNorthWest()?a.bounds.getCenter().distanceTo(a.bounds.getNorthEast()):null,this.fire('px-map-control-locate-succeeded',b),this.set('lastFoundLocation',b),this.notifyPath('lastFoundLocation.*')}},_handleLocationError:function(a){if(a){var b={message:a.message||null};this.fire('px-map-control-locate-failed',b)}},_handleLocationTap:function(a){a&&'locate'===a.action&&this.fire('px-map-locate-button-tapped')}},PxMapBehavior.LocateControl=[PxMapBehavior.Control,PxMapBehavior.LocateControlImpl],window.PxMap=window.PxMap||{};var a=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'initialize',value:function(a){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'initialize',this).call(this,a)}},{key:'onAdd',value:function(a){return this.__scaleContainer=babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'onAdd',this).call(this,a),!0===this.options.reverseColors&&L.DomUtil.addClass(this.__scaleContainer,'leaflet-control-scale--reverse'),this.__scaleContainer}},{key:'onRemove',value:function(a){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'onRemove',this).call(this,a),this.__scaleContainer=null}},{key:'setReverseColors',value:function(a){this.__scaleContainer&&(a&&!this.options.reverseColors&&(this.options.reverseColors=!0,L.DomUtil.addClass(this.__scaleContainer,'leaflet-control-scale--reverse')),!a&&this.options.reverseColors&&(this.options.reverseColors=!1,L.DomUtil.removeClass(this.__scaleContainer,'leaflet-control-scale--reverse')))}},{key:'showImperial',value:function(a){this.__scaleContainer&&(a&&!this.options.imperial&&!this._iScale&&(this._iScale=L.DomUtil.create('div','leaflet-control-scale-line',this.__scaleContainer),this.options.imperial=!0),!a&&this.options.imperial&&this._iScale&&(this.options.imperial=!1,L.DomUtil.remove(this._iScale),this._iScale=null),this._update())}},{key:'showMetric',value:function(a){this.__scaleContainer&&(a&&!this.options.metric&&!this._mScale&&(this._mScale=L.DomUtil.create('div','leaflet-control-scale-line',this.__scaleContainer),this.options.metric=!0),!a&&this.options.metric&&this._mScale&&(this.options.metric=!1,L.DomUtil.remove(this._mScale),this._mScale=null),this._update())}}]),b}(L.Control.Scale);PxMap.ScaleControl=a;var b=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_zoomIn',value:function(a){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_zoomIn',this).call(this,a),this._map&&this._map.fire&&this._map.fire('controlclick',{src:this,action:'zoomin'})}},{key:'_zoomOut',value:function(a){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_zoomOut',this).call(this,a),this._map&&this._map.fire&&this._map.fire('controlclick',{src:this,action:'zoomout'})}},{key:'_fireZoomClickEvt',value:function(){}}]),b}(L.Control.Zoom);PxMap.ZoomControl=b;var c=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'initialize',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=Object.assign({position:'bottomright',className:'',locateIcon:'<px-icon icon="px-utl:location"></px-icon>',locateTitle:'Zoom to your location',locateTimeout:1e4,moveToLocation:!0,moveMaxZoom:null},a);L.Util.setOptions(this,b)}},{key:'onAdd',value:function(a){return this.__container=L.DomUtil.create('div','leaflet-control-locate'+' leaflet-bar '+this.options.className),this.__locateButton=this._createButton(this.options.locateIcon,this.options.locateTitle,'leaflet-control-locate-button',this.__container),L.DomEvent.on(a,'locationfound',this._locationFound,this),L.DomEvent.on(a,'locationerror',this._locationError,this),L.DomEvent.disableClickPropagation(this.__locateButton),L.DomEvent.on(this.__locateButton,'click',L.DomEvent.stop),L.DomEvent.on(this.__locateButton,'click',this._locate,this),L.DomEvent.on(this.__locateButton,'click',this._refocusOnMap,this),this.__container}},{key:'onRemove',value:function(a){L.DomEvent.off(a,'locationfound',this._locationFound,this),L.DomEvent.off(a,'locationerror',this._locationError,this),L.DomEvent.off(this.__locateButton,'click',L.DomEvent.stop),L.DomEvent.off(this.__locateButton,'click',this._locate,this),L.DomEvent.off(this.__locateButton,'click',this._refocusOnMap,this)}},{key:'setMoveMaxZoom',value:function(a){'string'===typeof a&&a.length&&!isNaN(a)&&(a=parseInt(a)),'number'===typeof a&&this.options.moveMaxZoom!==a&&(this.options.moveMaxZoom=a)}},{key:'on',value:function(){var a;return this._map?(a=this._map).on.apply(a,arguments):void 0}},{key:'off',value:function(){var a;return this._map?(a=this._map).off.apply(a,arguments):void 0}},{key:'_locate',value:function(a){this._map.fire('controlclick',{src:this,action:'locate'}),this.locate(a)}},{key:'locate',value:function(){this.__locating=!0,this._map.locate({setView:this.options.moveToLocation,maxZoom:this.options.moveMaxZoom,timeout:this.options.locateTimeout}),this._setLocatingState()}},{key:'reset',value:function(){this._setReadyState()}},{key:'isDisabled',value:function(){return this.__disabled||!1}},{key:'_createButton',value:function(a,b,c,d){var e=L.DomUtil.create('a',c,d);return e.innerHTML=a,e.href='#',e.title=b,e.setAttribute('role','button'),e.setAttribute('aria-label',b),e}},{key:'_locationFound',value:function(){this.__locating&&(this.__locating=!1,this._setReadyState())}},{key:'_locationError',value:function(){this.__locating&&(this.__locating=!1,this._setReadyState())}},{key:'_setLocatingState',value:function(){this.__locateButton&&this.__locating&&(L.DomUtil.addClass(this.__locateButton,'leaflet-control-locate-button--locating'),this.__disabled=!0,this._updateDisabled())}},{key:'_setReadyState',value:function(){!this.__locateButton||this.__locating||(this.__locateButton.innerHTML=this.options.locateIcon,L.DomUtil.removeClass(this.__locateButton,'leaflet-control-locate-button--locating'),L.DomUtil.removeClass(this.__locateButton,'leaflet-control-locate-button--error'),this.__disabled=!1,this._updateDisabled())}},{key:'_updateDisabled',value:function(){this.__locateButton&&(this.__disabled&&L.DomUtil.addClass(this.__locateButton,'leaflet-control-locate-button--disabled'),!this.__disabled&&L.DomUtil.removeClass(this.__locateButton,'leaflet-control-locate-button--disabled'))}}]),b}(L.Control);PxMap.LocateControl=c})();