<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-clipboard/px-clipboard.html"><link rel="import" href="../prism-element/prism-highlighter.html"><link rel="import" href="../px-icon-set/px-icon-set.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="../prism-element/prism-theme-default.html"><link rel="import" href="../iron-media-query/iron-media-query.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="css/px-demo-snippet-styles.html"></head><body><dom-module id="px-demo-snippet"><template><style include="px-demo-snippet-styles"></style><style include="prism-theme-default"></style><prism-highlighter></prism-highlighter><iron-media-query query="(max-width: 716px)" query-matches="{{_isMobile}}"></iron-media-query><div class="clipboard flex"><div class="clipboard__buttons"><template is="dom-if" if="{{!hideCodepen}}"><px-icon title="codepen" class="actionable actionable--secondary" icon="px-utl:edit" on-tap="_openCodePenRequest"></px-icon></template></div><div class="clipboard__buttons"><px-clipboard data-clipboard-text="[[_output]]"></px-clipboard></div><template is="dom-if" if="{{_shouldShowButton(_isMobile, _codeHeight)}}"><div class="clipboard__buttons clipboard__buttons--expand"><button class="actionable actionable--secondary" on-tap="handleShowMore">{{expandText}}</button></div></template></div><div class="flex demoCode" expand-code$="[[expandCode]]"><div class="editor"><div id="jeditor" class=""></div></div></div></template></dom-module><script>Polymer({is:'px-demo-snippet',properties:{elementName:{type:String,value:''},parentName:{type:String,value:''},elementProperties:{type:Object},_output:{type:String,notify:!0,observer:'_render'},polygitIncludes:{type:Array,value:function(){return[]}},linksIncludes:{type:Array,value:function(){return[]}},scriptsIncludes:{type:Array,value:function(){return[]}},codeLink:{type:String,value:''},suppressPropertyValues:{type:Array,value:function(){return[]}},noIndentation:{type:Boolean,value:!1},expandCode:{type:Boolean,notify:!0,value:!1},expandText:{type:String,value:'Expand Code'},hideCodepen:{type:Boolean,value:!1},_codeHeight:{type:Number,value:0}},observers:['_elementPropertyChanged(elementProperties.*)'],behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":'_onIronResize'},attached:function(){this.__highlightCache={},this._callRender()},detached:function(){this.__highlightCache=null},handleShowMore:function(){var b=this.expandCode,c=b?'Expand Code':'Collapse Code';this.set('expandCode',!b),this.set('expandText',c)},_shouldShowButton:function(a,b){if(a)return!0;if(0!==b&&145<b)return!0;return!1},_onIronResize:function(){this._isMobile||(this._codeHeight=this.$.jeditor.getBoundingClientRect().height)},render:function(){var a=this._formatComponentString();return this.set('_output',a),a},_callRender:function(){this.debounce('render-element-changes',this.render,1)},_render:function(){if(this._output&&'string'===typeof this._output&&this._output.length){var a;if(this.__highlightCache&&this.__highlightCache.hasOwnProperty(this._output))return a=this.__highlightCache[this._output],this.$.jeditor.innerHTML=a,void this.scopeSubtree(this.$.jeditor,!0);if(a=this._fireOutputEvent(this._output,'html'),'string'!==typeof a||'<span'!==a.trim().substr(0,5))return void this.async(this._render,50);var b=this.noIndentation?a:this._applyGroups(a);this.__highlightCache[this._output]=b,window.requestAnimationFrame(function(){this.$.jeditor.innerHTML=b,this.scopeSubtree(this.$.jeditor,!0),this._codeHeight=this.$.jeditor.getBoundingClientRect().height}.bind(this))}},_applyGroups:function(a){var b=/(<span class="token attr-name">)/g,c=/(<span class="token punctuation">><\/span><\/span>)\s*(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;<\/span>)/g,d=/(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;\/)/g,e=/(<span class="token comment" spellcheck="true">)/g,f=/(--><\/span>)/g,g=/<\/div>/,h=a.replace(b,'</div><div class="keyVal">$1').replace(c,'$1<div class="openTag"><div>$2').replace(d,'</div></div>$1').replace(e,'<div class="comment">$1').replace(f,'$1</div>').replace(g,'')+'</div>',i=/((<span class="token style-attr language-css">)(<\/div><div class="keyVal"><span class="token attr-name"><\/div><div class="keyVal">))/g,j=h.replace(i,'');return j},_fireOutputEvent:function(a,b){return this.fire('syntax-highlight',{code:a,lang:b}).detail.code},_elementPropertyChanged:function(){this._callRender()},_formatComponentString:function(){if(this.elementProperties){var a=Object.keys(this.elementProperties).filter(function(a){return'lightDomContent'!==a&&'parentComponent'!==a&&'siblingElement'!==a}),b=this._printProperties(a,this.elementProperties),c='',d=this.elementName;return c+=' <'+d,c+=' '+b.join(' '),c+='>',this.elementProperties.lightDomContent&&(c+=''+this.elementProperties.lightDomContent+''),c+='</'+d+'>',this.elementProperties.siblingElement&&(c+=''+this.elementProperties.siblingElement),this.elementProperties.parentComponent&&(c=this.elementProperties.parentComponent[0]+c+this.elementProperties.parentComponent[1]),c}},_printProperties:function(a,b){var c=a.reduce(function(a,c){var d=Polymer.CaseMap.camelToDashCase(c),e=-1<this.suppressPropertyValues.indexOf(c)?'[['+c+']]':b[c];return'boolean'===typeof e||'true'===e||'false'===e?a=!0===e||'true'===e?a.concat([''+d]):a:'string'===typeof e&&''!==e||'number'===typeof e?a=a.concat([''+d+'="'+e+'"']):'object'===('undefined'===typeof e?'undefined':babelHelpers.typeof(e))&&(e=this._tryToStringify(e),a=a.concat([''+d+'=\''+e+'\''])),a}.bind(this),[]);return c},_tryToStringify:function(a){var b;try{b=JSON.stringify(a)}catch(a){console.log('stringify failed'),console.dir(b),b='[object Object]'}return b},_openCodePenRequest:function(){var a=document.createElement('form');if(this.codeLink){var b=this.codeLink;a.setAttribute('action',b),a.setAttribute('target','_blank'),this.appendChild(a),a.submit()}else{var c,d,e,f,g=document.createElement('input'),h={},i=this.parentName?this.parentName:this.elementName,j='',k='',l='';if(this.polygitIncludes.length)for(d=0,e=this.polygitIncludes,f=e.length;d<f;d++)j+=e[d],'/'!==e[d].charAt(e[d].length-1)&&(j+='/');if(this.scriptsIncludes.length)for(d=0,e=this.scriptsIncludes,f=e.length;d<f;d++)k+='<script src="'+e[d]+'"></script>\n';if(this.linksIncludes.length)for(d=0,e=this.linksIncludes,f=e.length;d<f;d++)l+='<link href="'+e[d]+'" rel="import">\n';h.html='<base href="https://polygit.org/px-*+PredixDev+*/webcomponentsjs+v1.0.22/polymer+v2.3.1/'+j+'components/">\n
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="webcomponentsjs/webcomponents-lite.js"></script>\n'+k+'<link href="polymer/polymer.html" rel="import">\n'+l+'<link rel="import" href="px-theme/px-theme-styles.html">\n<link href="'+i+'/',h.html+=i,h.html+='.html" rel="import">\n<custom-style>\n\t<style include="px-theme-styles" is="custom-style"></style>\n</custom-style>\n\n'+this._output+'\n\n',h.editors='1001',h.title=this.elementName,h.description='We\'ve set up everything for you to work with '+this.elementName+', feel free to play around!',c=JSON.stringify(h).replace(/"/g,'&amp;\u200Bquot;').replace(/'/g,'''),a.setAttribute('action','https://codepen.io/pen/define'),a.setAttribute('method','POST'),a.setAttribute('target','_blank'),g.setAttribute('type','hidden'),g.setAttribute('name','data'),g.setAttribute('value',c),a.appendChild(g),Polymer.Element?this.shadowRoot.appendChild(a):this.appendChild(a),a.submit()}}});</f;d++)l+='<link></body></html>