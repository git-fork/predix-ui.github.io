<html><head><link rel="import" href="css/px-datetime-picker-styles.html"><link rel="import" href="../px-datetime-field/px-datetime-field.html"><link rel="import" href="../px-calendar-picker/px-calendar-picker.html"><link rel="import" href="../px-datetime-common/px-datetime-behavior.html"><link rel="import" href="../px-datetime-common/px-datetime-buttons.html"><link rel="import" href="../px-datetime-common/px-datetime-button-behavior.html"><link rel="import" href="../app-localize-behavior/app-localize-behavior.html"><link rel="import" href="../iron-dropdown/iron-dropdown.html"></head><body><dom-module id="px-datetime-picker"><template><style include="px-datetime-picker-styles"></style><px-datetime-field id="field" slot="dropdown-trigger" time-zone="{{timeZone}}" moment-obj="{{_tempMomentObj}}" hide-time="{{hideTime}}" show-time-zone="{{showTimeZone}}" date-format="{{dateFormat}}" time-format="{{timeFormat}}" is-selected="[[opened]]" prevent-notification-on-change="" block-future-dates="{{blockFutureDates}}" block-past-dates="{{blockPastDates}}" resources="[[resources]]" language="[[language]]" formats="[[formats]]" date-min="[[minDate]]" date-max="[[maxDate]]"></px-datetime-field><iron-dropdown id="dropdown" class="dt-iron-dropdown" opened="{{opened}}" vertical-align="top" horizontal-align="left" no-overlap="[[!fillContainer]]" dynamic-align="[[!fillContainer]]" vertical-offset="[[_getVerticalOffset(fillContainer)]]" position-target="[[_getPositionTarget(fillContainer, fitIntoElement)]]" fit-into="[[fitIntoElement]]"><div slot="dropdown-content" class="dt-container__box shadow-temporary"><div class="dt-p-calendar"><px-calendar-picker id="calendar" block-future-dates="{{blockFutureDates}}" block-past-dates="{{blockPastDates}}" prevent-range-selection="" from-moment="{{_tempMomentObj}}" base-date="[[_tempMomentObj]]" time-zone="[[timeZone]]" day-week-start-index="[[dayWeekStartIndex]]" resources="[[resources]]" language="[[language]]" formats="[[formats]]" min-date="[[minDate]]" max-date="[[maxDate]]"></px-calendar-picker><button class="actionable caps dt-p-today" on-tap="_todayClicked">[[localize('Today')]]</button></div><div class="dt-p-time-buttons--wrapper"><template id="timeTemplate" is="dom-if" if="{{_handleField(hideTime, fillContainer)}}"><div><px-datetime-field id="time" class="dt-p-time" moment-obj="{{_tempMomentObj}}" hide-icon="" hide-date="" is-valid="{{_toTimeIsValid}}" time-format="{{timeFormat}}" time-zone="[[timeZone]]" resources="[[resources]]" language="[[language]]" formats="[[formats]]" min-date="[[minDate]]" max-date="[[maxDate]]"></px-datetime-field></div></template><template is="dom-if" if="{{showButtons}}"><px-datetime-buttons class="dt-p-buttons" is-submit-button-valid="" resources="[[resources]]" language="[[language]]" formats="[[formats]]"></px-datetime-buttons></template></div></div></iron-dropdown></template></dom-module><script>Polymer({is:'px-datetime-picker',behaviors:[PxDatetimeBehavior.TempMoment,PxDatetimeBehavior.Buttons,Polymer.AppLocalizeBehavior],properties:{showTimeZone:{type:String,value:''},hideTime:{type:Boolean,value:!1},dateFormat:{type:String,value:'MM/DD/YYYY'},timeFormat:{type:String,value:'HH:mm A'},opened:{type:Boolean,value:!1,reflectToAttribute:!0},fillContainer:{type:Boolean,value:!1,reflectToAttribute:!0},fitIntoElement:{type:Object,value:window},resources:{type:Object,value:function(){return{en:{Today:'Today'}}}},language:{type:String,value:'en'},useKeyIfMissing:{type:Boolean,value:!0}},listeners:{"px-datetime-entry-icon-clicked":'_iconClicked',"px-datetime-button-clicked":'_buttonClicked',tap:'_handleTap'},keyBindings:{esc:'_onEsc',enter:'_onEnter'},attached:function(){this._isAttached=!0,this.$.calendar.addEventListener('from-moment-changed',this._calendarMomentChanged.bind(this)),this.$.field.addEventListener('moment-obj-changed',this._fieldMomentChanged.bind(this))},_todayClicked:function(){var a=this._preserveTime(this._tempMomentObj,Px.moment.tz(Px.moment(),this.timeZone));this.set('_tempMomentObj',a),this._tempMomentChanged('calendar')},_onEsc:function(){this._rollbackTempMoment(),this._close()},_onEnter:function(){this._validateCalendarMoment()},_open:function(){this.$.dropdown.open()},_close:function(){this.$.dropdown.close()},_handleTap:function(a){if(!0===this.opened)for(var b=Polymer.dom(a).path,c=0;c<b.length;c++)if('PX-DROPDOWN'===b[c].nodeName)return void this._close()},_tempMomentChanged:function(a){this.debounce('_tempMomentChanged',function(){'field'===a?this._applyTempMoment():'calendar'===a&&!this.showButtons&&this._validateCalendarMoment()}.bind(this))},_calendarMomentChanged:function(){this._tempMomentChanged('calendar')},_fieldMomentChanged:function(){this._tempMomentChanged('field')},_validateCalendarMoment:function(){this.opened&&this.$.field.isValid&&(this._applyTempMoment(),this._close())},_buttonClicked:function(a){a.detail.action?this._validateCalendarMoment():(this._rollbackTempMoment(),this._close())},_iconClicked:function(a){'Date'===a.detail.dateOrTime&&this.$.dropdown.toggle()},_handleField:function(a,b){return!a&&b},_getVerticalOffset:function(a){return a?0:20},_getPositionTarget:function(a,b){return a?b:this.$.field},getElement:function(a){return this.shadowRoot.querySelector(a)}});</script></body></html>