<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-icon-set/px-icon-set.html"><link rel="import" href="../px-icon-set/px-icon.html"><link rel="import" href="css/px-clipboard-styles.html"><link rel="import" href="clipboard.js.html"></head><body><dom-module id="px-clipboard"><template><style include="px-clipboard-styles"></style><div class="flex flex--left"><div class="flex__item flex__item--msfix"><slot></slot></div><div class="iron"><px-icon title="copy" icon="px-utl:copy" id="copy"></px-icon></div></div></template></dom-module><script>Polymer({is:'px-clipboard',properties:{dataClipboardAction:{type:String,value:''},copyFrom:{type:String,value:''},_copyFromElem:{type:Object,observer:'_initializeClipboard'},dataClipboardText:{type:String,value:'',observer:'_updateText'},_clipboard:{type:Object},_showCopiedText:{type:Boolean,value:!1}},attached:function(){var a=this.$$('slot'),b=this.$$('#copy');this.copyFrom&&Polymer.dom(a).observeNodes(this._setCopyFrom.bind(this)),this.dataClipboardText&&(this._clipboard=this._initializeTextOnly(b),this._setEventFire())},detached:function(){this._destroy()},_destroy:function(){this._clipboard&&this._clipboard.destroy()},_updateText:function(){var a=this.$$('#copy');this.dataClipboardText&&(this._destroy(),this._clipboard=this._initializeTextOnly(a),this._setEventFire())},_initializeClipboard:function(){var a=this.$$('#copy');this.dataClipboardText||(this._clipboard=this._initializeCopy(a),this.dataClipboardAction&&(this._clipboard.action=function(){return this.dataClipboardAction}.bind(this)),this._setEventFire())},_setEventFire:function(){this._clipboard.on('success',function(a){this._success(a),this.set('_showCopiedText',!0),this._changeIcon()}.bind(this)).on('error',function(a){this._error(a)}.bind(this))},_changeIcon:function(){var a=Polymer.dom(this.root).querySelector('px-icon'),b=Polymer.dom(this.root).querySelector('.iron');a.icon='px-utl:confirmed',b.classList.add('copiedIconGreen','fadeOutCopied'),this._showCopiedText&&(b.classList.remove('fadeIn'),this.distributeContent()),setTimeout(function(){a.icon='px-utl:copy',b.classList.remove('copiedIconGreen','fadeOutCopied'),b.classList.add('fadeIn'),this.distributeContent()}.bind(this),2e3)},_setCopyFrom:function(){var a=Polymer.dom(this).querySelector(this.copyFrom);this.set('_copyFromElem',a)},_initializeCopy:function(a){if(this.copyFrom)return this._setCopyFrom(),new Clipboard(a,{target:function(){return this._copyFromElem}.bind(this)});throw'You must specify where you\'d like the value copied/cut from using the copy-from attribute'},_initializeTextOnly:function(a){return new Clipboard(a,{text:function(){return this.dataClipboardText}.bind(this)})},_success:function(a){this.fire('pxClipboardSuccess',a)},_error:function(a){this.fire('pxClipboardError',a)}});</script></body></html>