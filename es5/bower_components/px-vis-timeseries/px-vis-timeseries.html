<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../px-vis/px-vis-behavior-common.html"><link rel="import" href="../px-vis/px-vis-behavior-d3.html"><link rel="import" href="../px-vis/px-vis-behavior-chart.html"><link rel="import" href="../px-vis/px-vis-behavior-datetime.html"><link rel="import" href="../px-vis/px-vis-behavior-scale.html"><link rel="import" href="../px-vis/px-vis-behavior-renderer.html"><link rel="import" href="../px-vis/px-vis-svg-canvas.html"><link rel="import" href="../px-vis/px-vis-line-canvas.html"><link rel="import" href="../px-vis/px-vis-line-svg.html"><link rel="import" href="../px-vis/px-vis-scatter.html"><link rel="import" href="../px-vis/px-vis-scatter-canvas.html"><link rel="import" href="../px-vis/px-vis-event.html"><link rel="import" href="../px-vis/px-vis-axis.html"><link rel="import" href="../px-vis/px-vis-gridlines.html"><link rel="import" href="../px-vis/px-vis-chart-navigator.html"><link rel="import" href="../px-vis/px-vis-interaction-space.html"><link rel="import" href="../px-vis/px-vis-cursor.html"><link rel="import" href="../px-vis/px-vis-tooltip.html"><link rel="import" href="../px-vis/px-vis-register.html"><link rel="import" href="../px-vis/px-vis-threshold.html"><link rel="import" href="../px-vis/px-vis-clip-path.html"><link rel="import" href="../px-vis/px-vis-toolbar.html"><link rel="import" href="../px-vis/px-vis-multi-axis.html"><link rel="import" href="../px-vis/px-vis-highlight-point.html"><link rel="import" href="../px-vis/px-vis-highlight-point-canvas.html"><link rel="import" href="../px-vis/px-vis-striping.html"><link rel="import" href="../px-vis/px-vis-markers.html"><link rel="import" href="../px-vis/px-vis-annotations.html"><link rel="import" href="css/px-vis-timeseries-styles.html"></head><body><dom-module id="px-vis-timeseries"><template><style include="px-vis-timeseries-styles"></style><div id="wrapper" class$="{{_chartWrapperClass}}"><div class$="{{_registerWrapperClass}} safari-flex-fix"><px-vis-register id="register" dynamic-menu-config="[[dynamicMenuConfig]]" chart-width="[[width]]" height="[[_verticalRegisterHeight]]" margin="[[_chartOrNavMargin(disableNavigator, _internalMargin.*, _internalMarginNav.*)]]" class$="{{_getHideClass(hideRegister)}}" units="[[units]]" tooltip-data="[[tooltipData]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" muted-series="{{mutedSeries}}" type="{{_registerType}}" x-axis-type="time" y-axis-type="[[yAxisType]]" inert-register="[[hideRegister]]"></px-vis-register><div id="drawingWrapper" class="flex--col flex__item--no-grow inline--flex"><px-vis-toolbar id="toolbar" current-sub-config="[[toolbarSubConfig]]" action-config="{{actionConfig}}" within-chart="" chart-margin="[[_internalMargin]]" config="{&quot;zoom&quot;: true, &quot;pan&quot;: true, &quot;tooltip&quot;: true}"></px-vis-toolbar><px-vis-svg-canvas id="svgCanvas" class="flex__item--no-grow" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" canvas-context="{{canvasContext}}" canvas-layers="{{canvasLayers}}" canvas-layers-config="[[canvasLayersConfig]]" svg="{{svg}}" px-svg-elem="{{pxSvgElem}}" svg-lower="{{svgLower}}" px-svg-elem-lower="{{pxSvgElemLower}}"><px-vis-annotations slot="4" svg="[[svg]]" x="[[x]]" y="[[y]]" margin="[[_internalMargin]]" domain-changed="[[domainChanged]]" complete-series-config="[[completeSeriesConfig]]" annotation-data="[[annotationData]]" show-strong-icon="[[showStrongIcon]]"></px-vis-annotations></px-vis-svg-canvas><template id="navTemplate" is="dom-if" if="[[!disableNavigator]]"><px-vis-chart-navigator id="navigator" prevent-ww-synchronization="" prevent-complete-series-config-calc="" chart-id="[[chartId]]" class="inline--flex" x-axis-type="[[xAxisType]]" y-axis-type="linear" width="[[width]]" height="100" margin="[[_internalMarginNav]]" complete-series-config="[[completeSeriesConfig]]" _series-keys="[[_seriesKeys]]" data-extents="[[dataExtents]]" chart-data="[[chartData]]" chart-extents="[[_navChartExtents]]" nav-series-limit="[[navSeriesLimit]]" chart-domain-x="[[_returnXDomain(domainChanged, disableDynamicUpdate)]]" range="[[range]]" disable-empty-render="" selected-domain="{{_navSelectedDomain}}" prevent-resize="" render-to-canvas="[[renderToCanvas]]" debounce-resize-timing="[[debounceResizeTiming]]"></px-vis-chart-navigator></template></div></div></div><px-vis-tooltip id="tooltip" hover-target="[[mouseRect]]" mouse-position="[[mousePosition]]" width="250" margin="[[_internalMargin]]" chart-data="[[chartData]]" tooltip-data="[[tooltipData]]" complete-series-config="[[completeSeriesConfig]]" x-axis-type="time" y-axis-type="linear" tooltip-style="light" muted-series="[[mutedSeries]]" hide="[[!_computedShowTooltip]]" series-keys="[[_seriesKeys]]"></px-vis-tooltip><px-vis-clip-path svg="[[layer.1]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" clip-path="{{clipPath}}" series-clip-path="{{seriesClipPath}}"></px-vis-clip-path><template id="lineTemplate" is="dom-repeat" items="[[_seriesKeys]]"><template is="dom-if" if="[[_chartTypeLine(item,completeSeriesConfig)]]" restamp=""><template id="lineCanvasTemplate" is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-line-canvas id="lineCanvas" canvas-context="[[canvasContext]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" domain-changed="[[domainChanged]]" show-gaps="[[showGaps]]" muted-series="[[mutedSeries]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" clip-path="" stroke-width="[[_returnStrokeWidth(item, completeSeriesConfig)]]" interpolation-function="[[interpolationFunction]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-line-canvas></template><template id="lineSVGTemplate" is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-line-svg id="lineSVG" svg="[[layer.1]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" domain-changed="[[domainChanged]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" show-gaps="[[showGaps]]" clip-path="[[seriesClipPath]]" muted-series="[[mutedSeries]]" stroke-width="[[_returnStrokeWidth(item, completeSeriesConfig)]]" interpolation-function="[[interpolationFunction]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-line-svg></template></template><template is="dom-if" if="[[_chartTypeScatter(item,completeSeriesConfig)]]" restamp=""><template is="dom-if" if="[[renderToCanvas]]" restamp=""><px-vis-scatter-canvas canvas-context="[[canvasContext]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" clip-path="" domain-changed="[[domainChanged]]" muted-series="[[mutedSeries]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-scatter-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp=""><px-vis-scatter svg="[[layer.1]]" series-id="[[item]]" chart-data="[[chartData]]" complete-series-config="[[completeSeriesConfig]]" x="[[x]]" y="[[_returnYScale(item, completeSeriesConfig, domainChanged)]]" domain-changed="[[domainChanged]]" clip-path="[[seriesClipPath]]" muted-series="[[mutedSeries]]" serie-to-redraw-on-top="[[serieToRedrawOnTop]]"></px-vis-scatter></template></template></template><px-vis-markers canvas-context="[[canvasLayers.markers]]" canvas-layers-config="{{canvasLayersConfig}}" width="[[width]]" height="[[height]]" x="[[x]]" domain-changed="[[domainChanged]]" marker-data="[[markerData]]" marker-config="[[markerConfig]]" margin="[[_internalMarginMarkers]]" resources="[[resources]]" language="[[language]]" formats="[[formats]]"></px-vis-markers><template is="dom-repeat" items="[[eventData]]"><px-vis-event svg="[[layer.0]]" x-axis-type="[[xAxisType]]" x-key="time" event-id="[[item.id]]" event-data="[[item]]" height="[[height]]" margin="[[_internalMargin]]" x="[[x]]" event-config="[[eventConfig]]" domain-changed="[[domainChanged]]" clip-path="[[clipPath]]" resources="[[resources]]" language="[[language]]" formats="[[formats]]"></px-vis-event></template><px-vis-threshold svg="[[layer.2]]" complete-series-config="[[completeSeriesConfig]]" threshold-data="[[thresholdData]]" threshold-config="[[thresholdConfig]]" width="[[width]]" margin="[[_internalMargin]]" y="[[y]]" domain-changed="[[domainChanged]]" clip-path="[[seriesClipPath]]" show-threshold-box="[[showThresholdBox]]" language="[[language]]"></px-vis-threshold><px-vis-axis id="xAxis" svg="[[layer.0]]" domain-changed="[[domainChanged]]" axis="[[x]]" axis-type="[[xAxisType]]" margin="[[_internalMargin]]" width="[[width]]" height="[[height]]" orientation="[[xAxisLocation]]" label-position="after" complete-series-config="[[completeSeriesConfig]]" prevent-series-bar=""></px-vis-axis><px-vis-multi-axis id="yAxes" svg="[[layer.0]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" left-axis-size="[[leftAxisSize]]" right-axis-size="[[rightAxisSize]]" x="[[_axisX]]" y="[[y]]" domain-changed="[[_bothDomainsSet(_axisDomainChanged, domainChanged)]]" complete-series-config="[[_multiAxisSeriesConfig]]" chart-data="[[chartData]]" dimensions="[[dimensions]]" axes="[[axes]]" axis-config="[[yAxisConfig]]" append-unit-in-title="" orientation-from-dimensions="" disable-brush="" cartesian-drag-behavior="" allow-empty-title="" series-to-axes="[[seriesToAxes]]" muted-series="[[mutedSeries]]" match-ticks="[[matchTicks]]" action-config="[[_axisActionConfig]]"></px-vis-multi-axis><template is="dom-if" if="[[!hideGridlinesX]]" restamp=""><px-vis-gridlines svg="[[svgLower]]" axis="[[x]]" margin="[[_internalMargin]]" length="[[height]]" orientation="bottom" domain-changed="[[domainChanged]]"></px-vis-gridlines></template><template is="dom-if" if="[[_showHorizontalGrid(hideGridlinesY, axes, y, matchTicks)]]" restamp=""><px-vis-gridlines svg="[[svgLower]]" axis="[[_returnGridAxis(domainChanged)]]" margin="[[_internalMargin]]" length="[[width]]" orientation="left" domain-changed="[[domainChanged]]"></px-vis-gridlines></template><px-vis-interaction-space id="interactionSpace" svg="[[layer.4]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" x-axis-type="[[xAxisType]]" series-keys="[[_seriesKeys]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" chart-id="[[chartId]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" mouse-rect="{{mouseRect}}" tooltip-data="{{tooltipData}}" crosshair-data="{{crosshairData}}" default-empty-data="[[defaultEmptyData]]" generating-crosshair-data="{{generatingCrosshairData}}" interaction-svg="{{interactionSvg}}" extents-data="{{extentsData}}" action-config="[[actionConfig]]" selection-type="[[selectionType]]" extents-action="{{extentsAction}}" muted-series="[[mutedSeries]]" hard-mute="[[hardMute]]" use-quadtree="" time-data="[[_getXKey(completeSeriesConfig)]]" prevent-web-worker-synchronization="[[preventWebWorkerSynchronization]]" ww-data-sync-counter="[[wwDataSyncCounter]]" log-base="[[logBase]]"></px-vis-interaction-space><px-vis-cursor id="cursor" svg="[[layer.2]]" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" tooltip-data="[[tooltipData]]" clip-path="[[seriesClipPath]]" muted-series="[[mutedSeries]]" hard-mute="[[hardMute]]" series-keys="[[_seriesKeys]]"></px-vis-cursor><template id="highlighterDomIf" is="dom-if" if="[[renderToCanvas]]" restamp="" on-dom-change="_highlighterConfigChanged"><px-vis-highlight-point-canvas id="highlighterCanvas" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" canvas-context="[[canvasLayers.highlighter]]" canvas-layers-config="{{canvasLayersConfig}}" layers-to-mask="[[canvasContext]]" x="[[x]]" y="[[y]]" clip-path="" domain-changed="[[domainChanged]]" time-data="[[_getXKey(completeSeriesConfig)]]" complete-series-config="[[completeSeriesConfig]]" series-keys="[[_seriesKeys]]" chart-data="[[chartData]]" generating-crosshair-data="[[generatingCrosshairData]]" crosshair-data="[[crosshairData]]" default-empty-data="{{defaultEmptyData}}" tooltip-data="{{tooltipData}}" hard-mute="[[hardMute]]" muted-series="[[mutedSeries]]"></px-vis-highlight-point-canvas></template><template is="dom-if" if="[[!renderToCanvas]]" restamp="" on-dom-change="_highlighterConfigChanged"><px-vis-highlight-point id="highlighter" svg="[[layer.3]]" layers-to-mask="[[layer.1]]" x="[[x]]" y="[[y]]" domain-changed="[[domainChanged]]" time-data="[[_getXKey(completeSeriesConfig)]]" complete-series-config="[[completeSeriesConfig]]" chart-data="[[chartData]]" generating-crosshair-data="[[generatingCrosshairData]]" crosshair-data="[[crosshairData]]" default-empty-data="{{defaultEmptyData}}" tooltip-data="{{tooltipData}}" clip-path="[[seriesClipPath]]" hard-mute="[[hardMute]]" muted-series="[[mutedSeries]]" series-keys="[[_seriesKeys]]"></px-vis-highlight-point></template><px-vis-striping id="starsAndStripes" width="[[width]]" height="[[height]]" margin="[[_internalMargin]]" canvas-context="[[canvasLayers.striping]]" canvas-layers-config="{{canvasLayersConfig}}" x="[[x]]" domain-changed="[[domainChanged]]" clip-path="" stripe-config="[[stripeConfig]]" stripe-data="[[stripeData]]"></px-vis-striping></template></dom-module><script>Polymer({is:'px-vis-timeseries',behaviors:[PxVisBehavior.observerCheck,PxVisBehavior.baseSize,PxVisBehavior.margins,PxVisBehavior.dataset,PxVisBehavior.completeSeriesConfig,PxVisBehavior.muteUnmuteSeries,PxVisBehavior.tooltipData,PxVisBehavior.extentsData,PxVisBehavior.commonMethods,PxVisBehavior.zoomSelection,PxVisBehavior.chartExtents,PxVisBehavior.dataExtents,PxVisBehavior.events,PxVisBehaviorD3.svg,PxVisBehaviorD3.svgLower,PxVisBehaviorD3.canvasContext,PxVisBehaviorD3.renderToCanvas,PxVisBehaviorD3.axes,PxVisBehaviorD3.selectedTimeDomain,PxVisBehaviorD3.clipPath,PxVisBehaviorChart.chartCommon,PxVisBehaviorChart.saveImage,PxVisBehaviorD3.domainUpdate,PxVisBehaviorChart.subConfiguration,PxVisBehaviorChart.registerConfigs,PxVisBehaviorChart.axisConfigs,PxVisBehaviorChart.registerPositioning,PxVisBehaviorChart.chartAutoResize,PxVisBehavior.thresholds,PxVisBehaviorChart.layers,PxVisBehaviorChart.navigatorConfig,PxVisBehavior.serieToRedrawOnTop,PxVisBehavior.dynamicMenuConfig,PxColorsBehavior.dataVisColorTheming,PxVisBehaviorD3.lineGaps,PxVisBehaviorChart.multiAxis,PxVisBehavior.axisTypes,PxVisBehaviorScale.scale,PxVisBehavior.actionConfig,PxVisBehaviorChart.zooming,PxVisBehaviorChart.actionRequest,PxVisBehaviorChart.toolbarSubConfig,PxVisBehaviorChart.noDebounceOnPanning,PxVisBehaviorChart.chartToolbarConfig,PxVisBehaviorChart.showTooltip,PxVisBehaviorD3.interpolationFunction,PxVisBehaviorChart.sizeVerticalRegister,PxVisBehaviorChart.tooltipFollowMouseCalculation,PxVisBehaviorChart.thresholdConfig,PxVisBehavior.selectionType,PxVisBehaviorChart.highlighterConfigs,PxVisBehavior.crosshairData,PxVisBehaviorChart.webWorkerSynchronization,Polymer.AppLocalizeBehavior,PxVisBehavior.stripProperties,PxVisBehaviorRenderer.base,PxVisBehavior.markers,PxVisBehavior.updateStylesOverride,PxVisBehavior.annotationData,PxVisBehaviorChart.cursorConfig],properties:{xAxisLocation:{type:String,value:'bottom'},yAxisLocation:{type:String,value:'left'},marginNav:{type:Object,value:{top:5,right:5,bottom:5,left:5}},marginMarkersAdjustment:{type:Object,value:{}},_internalMargin:{type:Object},_internalMarginNav:{type:Object},_internalMarginMarkers:{type:Object},options:{type:Object,notify:!0,observer:'_setConfig'},eventData:{type:Array,notify:!0},pxSvgElem:{type:Object,value:function(){return{}}},disableNavigator:{type:Boolean,value:!1,observer:'_disableNavigatorChanged'},hideGridlinesX:{type:Boolean,value:!1},hideGridlinesY:{type:Boolean,value:!1},_isReady:{type:Boolean,value:!1},matchTicks:{type:Boolean,value:!1},_navSelectedDomain:{type:Object},_axisActionConfig:{type:Object,notify:!0,computed:'_computeAxisActionConfig(dimensions.*, _isAttached)'},_navChartExtents:{type:Object,computed:'_computeNavChartExtents(chartExtents)'},resources:{type:Object},language:{type:String,value:'en'},useKeyIfMissing:{type:Boolean,value:!0},_stripeHighlight:{type:Object},_stripeController:{type:Object},_stripeBrush:{type:Object},_stripeDataIndex:{type:Number,value:null}},observers:['_navigatorConfigChanged(navigatorConfig.*)','_xAxisConfigChanged(xAxisConfig.*)','_cursorConfigChanged(cursorConfig.*)','_tooltipConfigChanged(tooltipConfig.*, showTooltip)','_registerConfigChanged(registerConfig.*)','_toolbarConfigChanged(toolbarConfig.*)','_interactionSpaceConfigChanged(interactionSpaceConfig.*)','_highlighterConfigChanged(highlighterConfig.*)','_calcAxes(completeSeriesConfig.*)','_calcAxes(leftAxisSize, rightAxisSize)','_calcMargins(margin.*, marginNav.*, numRightAxes, numLeftAxes)','_calcMarkerMargins(_internalMargin, marginMarkersAdjustment)','_setXScale(width, _internalMargin, xAxisType)','_setMultiYScale(height, _internalMargin, axes.*)','_setDomainCaller(wwDataSyncCounter, x, y, dataExtents, seriesToAxes.*)','_setDomainCaller(x, y, chartExtents, dataExtents)','_updateDomain(selectedDomain)','_navSelectedDomainChanged(_navSelectedDomain)','_langChanged(language)','_keepDataInSync(chartData.*, chartId)','_mutedChanged(mutedSeries.*, hardMute)','_renderChartData(domainChanged, canvasContext, chartData.*, mutedSeries.*, completeSeriesConfig.*, preventInitialDrawing, renderToCanvas)','_renderHighlight(domainChanged, canvasLayers.highlighter, completeSeriesConfig.*, preventInitialDrawing)','_renderSeriesOnTop(serieToRedrawOnTop)','_renderMarkers(canvasLayers.markers, domainChanged, markerData, markerConfig, preventInitialDrawing)'],listeners:{"px-vis-interaction-space-mouse-coords":'_stripeCoords',"iron-resize":'_onIronResize'},created:function(){this._tooltipCalcHoverTargetId='drawingWrapper'},ready:function(){this.set('numberOfLayers',5),this.set('_verticalRegisterDrawingCanvasId','svgCanvas'),this.set('_verticalRegisterHeightDeductions',['toolbar','navigator']),'time'!==this.xAxisType&&'timeLocal'!==this.xAxisType&&this.set('xAxisType','time'),this.yAxisType||this.set('yAxisType','linear'),this._isReady=!0,this._extentsDataRoutes.stripe='_createStripe'},_getWrapperClass:function(a){return a+' flex__item wrapper'},_setConfig:function(){if(!this.hasUndefinedArguments(arguments)){if('object'!==babelHelpers.typeof(this.options))return void console.error('Configuration options must be valid JSON');for(var a,b=Object.keys(this.options),c=0;c<b.length;c++)a=b[c],this.set(a,this.options[a])}},_navigatorConfigChanged:function(a){this.hasUndefinedArguments(arguments)||(!this._isReady&&setTimeout(function(){this._navigatorConfigChanged(a)}.bind(this),10),this.$$('#navigator')&&this._applyConfigToElement(this.navigatorConfig,this.$$('#navigator')))},_xAxisConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.xAxisConfig,this.$.xAxis)},_tooltipConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.tooltipConfig,this.$.tooltip)},_registerConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.registerConfig,this.$.register)},_cursorConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.cursorConfig,this.$.cursor)},_toolbarConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.toolbarConfig,this.$.toolbar)},_interactionSpaceConfigChanged:function(){this.hasUndefinedArguments(arguments)||this._applyConfigToElement(this.interactionSpaceConfig,this.$.interactionSpace)},_highlighterConfigChanged:function(){var a=this.renderToCanvas?this.$$('#highlighterCanvas'):this.$$('#highlighter');a&&this._doesObjHaveValues(this.highlighterConfig)&&this._applyConfigToElement(this.highlighterConfig,a)},_calcMargins:function(){this.hasUndefinedArguments(arguments)||this.debounce('_calcMargin',function(){var a,b,c=25,d=10,e=10,f=10;JSON.stringify(this._defaultMargin)===JSON.stringify(this.margin)?('bottom'===this.xAxisLocation?e=40:'top'===this.xAxisLocation&&(c=40),'left'===this.yAxisLocation?f=50:'right'===this.yAxisLocation&&(d=50),a={top:c,right:d,bottom:e,left:f},this._calcMultiMargins(a,50,50)):(a={top:+this.margin.top||0===+this.margin.top?+this.margin.top:c,right:+this.margin.right||0===+this.margin.right?+this.margin.right:d,bottom:+this.margin.bottom||0===+this.margin.bottom?+this.margin.bottom:e,left:+this.margin.left||0===+this.margin.left?+this.margin.left:f},this._calcMultiMargins(a,a.left,a.right)),b=JSON.stringify(this.properties.marginNav.value)===JSON.stringify(this.marginNav)?{top:5,right:a.right,bottom:20,left:a.left}:{top:+this.marginNav.top,right:+this.marginNav.right,bottom:+this.marginNav.bottom,left:+this.marginNav.left},this.set('_internalMargin',a),this.set('_internalMarginNav',b)},5)},_calcMarkerMargins:function(){if(!this.hasUndefinedArguments(arguments)){var a;a={top:this._internalMargin.top,left:this._internalMargin.left,right:this._internalMargin.right,bottom:this._internalMargin.bottom},'bottom'===this.xAxisLocation?a.bottom-=40:'top'===this.xAxisLocation&&(a.top-=40),a.top+=this.marginMarkersAdjustment.top?+this.marginMarkersAdjustment.top:0,a.bottom+=this.marginMarkersAdjustment.bottom?+this.marginMarkersAdjustment.bottom:0,a.left+=this.marginMarkersAdjustment.left?+this.marginMarkersAdjustment.left:0,a.right+=this.marginMarkersAdjustment.right?+this.marginMarkersAdjustment.right:0,this.set('_internalMarginMarkers',a)}},_chartOrNavMargin:function(a){return void 0===this.disableNavigator||void 0===this._internalMargin||void 0===this._internalMarginNav?void 0:a?this._internalMargin:this._internalMarginNav},_onIronResize:function(){var a=Math.max;this.preventResize||this.debounce('ironresize',function(){var b=this.$.wrapper.getBoundingClientRect(),c=this.disableNavigator?0:this.$$('#navigator').height,d=this.$.register.getBoundingClientRect(),e=this.$.toolbar.getBoundingClientRect(),f=0,g=0;'horizontal'===this.$.register.type?g+=d.height:f+=d.width,g+=e.height,g+=c,this.set('width',a(b.width-f,0)),this.set('height',a(b.height-g,0)),this._computeVerticalRegisterHeight([c,e.height])},this.debounceResizeTiming)},getCombinedImage:function(a,b){this.getImage(function(b){this.disableNavigator?a({canvas:b.canvas,image:b.canvas.toDataURL('image/png')}):this.$$('#navigator').getImage(function(c){var d,e=document.createElement('canvas');e.width=Math.max(b.canvas.width,c.canvas.width),e.height+=c.canvas.height,d=e.getContext('2d'),d.drawImage(b.canvas,0,0),d.drawImage(c.canvas,0,b.canvas.height),a({canvas:e,image:e.toDataURL('image/png')})}.bind(this))}.bind(this),b)},_disableNavigatorChanged:function(){this.hasUndefinedArguments(arguments)||!this._disableNavigator&&this.navigatorConfig&&(this.$.navTemplate.render(),this._navigatorConfigChanged())},_showHorizontalGrid:function(a,b,c,d){return this.hasUndefinedArguments(arguments)?void 0:!a&&(1<this.axes.length&&!d?!1:!0)},_returnGridAxis:function(){return this.hasUndefinedArguments(arguments)?void 0:this.y[this.axes[0]]},_returnXDomain:function(){return this.hasUndefinedArguments(arguments)?void 0:null!==this.domainChanged&&!this.disableDynamicUpdate&&this.x?this.x.domain():void 0},_mutedChanged:function(){this.hasUndefinedArguments(arguments)||!0===this.hardMute&&this._setDomainCaller()},_setDomainCaller:function(){this.hasUndefinedArguments(arguments)||this._doesObjHaveValues(this.seriesToAxes)&&this._setDomain()},_bothDomainsSet:function(){return this.hasUndefinedArguments(arguments)?void 0:null!==this.domainChanged&null!==this._axisDomainChanged?!this.$.yAxes.domainChanged:void 0},_navSelectedDomainChanged:function(){this.hasUndefinedArguments(arguments)||this.set('selectedDomain',this._navSelectedDomain)},_getXKey:function(){if(!this.hasUndefinedArguments(arguments)){var a=Object.keys(this.completeSeriesConfig);return a&&a.length?this.completeSeriesConfig[a[0]].x:''}},_computeAxisActionConfig:function(){if(!this.hasUndefinedArguments(arguments)){var a;return a=2<this.dimensions.length?{mouseout:null,mousemove:null,mousedown:'callAxisDrag',mouseup:'callAxisDrag'}:{mouseout:null,mousemove:null,mousedown:null,mouseup:null},a}},_computeNavChartExtents:function(){var a=Number.MIN_VALUE,b=Number.MAX_VALUE;if(!this.hasUndefinedArguments(arguments)){if(this.chartExtents.y)return{y:this.chartExtents.y};for(var c,d=Object.keys(this.chartExtents),e=b,f=a,g=0;g<d.length;g++)'x'!==d[g]&&(c=this.chartExtents[d[g]],'dynamic'!==c[0]&&c[0]<e&&(e=c[0]),'dynamic'!==c[1]&&c[1]>f&&(f=c[1]));return e!==b&&f!==a?{y:[e,f]}:{y:['dynamic','dynamic']}}},_langChanged:function(){this.hasUndefinedArguments(arguments)||this._recreateScales(this.width,this.height,this._internalMargin)},_createStripe:function(){return'stripe'===this.extentsAction?this.stripeType?void('undefined'===typeof this.stripeData[this.stripeType]&&(this.stripeData[this.stripeType]=[]),this._addStripeToData()):void console.warn('No stripe type specified. Aborting creation'):void 0},_addStripeToData:function(){var a=[],b=this._checkForOverlap(this.extentsData.eX,a);b&&(this._deleteRedundantStripes(a),this.push('stripeData.'+this.stripeType,b))},_checkForOverlap:function(a,b){for(var c=this.stripeData[this.stripeType],d=a[0],e=a[1],f=0;f<c.length;f++){if(d>=c[f][0]&&e<=c[f][1])return d=c[f][0],e=c[f][1],!1;d<c[f][0]&&e>c[f][1]?b.push(f):d<=c[f][0]&&e>=c[f][0]&&e<=c[f][1]?(e=c[f][1],b.push(f)):d>=c[f][0]&&d<=c[f][1]&&e>=c[f][1]&&(d=c[f][0],b.push(f))}return[d,e]},_deleteRedundantStripes:function(a){for(var b=a.length-1;-1<b;b--)this.stripeData[this.stripeType].splice(a[b],1)},_stripeCoords:function(a){this.debounce('stripeHover',function(){this._stripeCoordsDebounced(a)},10)},_stripeCoordsDebounced:function(a){if('stripe'===this.extentsAction&&this.stripeData[this.stripeType]&&0!==this.stripeData[this.stripeType].length){this._isObjEmpty(this._stripeController)&&this._buildStripeHandles();for(var b=a.detail.mouse,c=this.x.invert(b[0]),d=this.stripeData[this.stripeType],e=0;e<d.length;e++)if(!d[e][1]&&0!==d[e][1]){if(parseInt(this.x(d[e][0]))===b[0]){this._hoverStripe(e);break}}else if(d[e][0]<=c&&d[e][1]>=c){this._hoverStripe(e);break}}},_deleteStripe:function(){this.splice('stripeData.'+this.stripeType,this._stripeDataIndex,1),this._hideStripeHover()},_hoverStripe:function(a){var b=this.x(this.stripeData[this.stripeType][a][0]),c=this.stripeData[this.stripeType][a][1]||0===this.stripeData[this.stripeType][a][1]?this.x(this.stripeData[this.stripeType][a][1]):this.x(this.stripeData[this.stripeType][a][0]+1);this._stripeHighlight.attr('stroke',this.stripeConfig[this.stripeType].fillColor).on('click',this._deleteStripe.bind(this)).attr('pointer-events','all').style('visibility',null),this._stripeController.select('rect.overlay').attr('pointer-events','all'),this._stripeController.on('click',this._deleteStripe.bind(this)).on('mouseleave',this._hideStripeHover.bind(this)).on('mousemove',function(){Polymer.dom(Px.d3.event).path[0].classList.contains('overlay')&&this._hideStripeHover()}.bind(this)).call(this._stripeBrush.move,[b,c]),this._stripeBrush.on('start',this._stripeEditStart.bind(this)).on('end',this._stripeEditEnd.bind(this)),this._stripeDataIndex=a},_buildStripeHandles:function(){var a=Math.max(this.height-this._internalMargin.bottom-this._internalMargin.top,1),b=this.x.range(),c=[[b[0],0],[b[1],a]];this._stripeBrush=Px.d3.brushX().extent(c).handleSize(6),this._stripeController=this.layer[4].append('g').attr('class','brush').call(this._stripeBrush).call(this._stripeBrush.move,null),this._stripeController.select('rect.overlay').attr('pointer-events','none'),this._stripeHighlight=this._stripeController.select('rect.selection').attr('fill','transparent').attr('stroke-width',4).attr('shape-rendering','crispEdges')},_hideStripeHover:function(){this._stripeBrush.on('start',null).on('brush',null).on('end',null),this._stripeHighlight.style('visibility','hidden'),this._stripeController.on('click',null).on('mouseout',null).call(this._stripeBrush.move,null),this._stripeController.select('rect.overlay').attr('pointer-events','none')},_stripeEditStart:function(){this._stripeController.on('mouseout',null)},_stripeEditEnd:function(){this.debounce('stripeBrushed',function(){var a=Px.d3.brushSelection(this._stripeController.node());a&&(this._deleteStripe(),!this.extentsData&&(this.extentsData={}),this.extentsData.eX=[this.x.invert(a[0]).getTime(),this.x.invert(a[1]).getTime()],this._createStripe())},10)}});</script></body></html>