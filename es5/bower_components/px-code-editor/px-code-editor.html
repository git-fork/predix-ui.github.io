<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="codemirror/import.html"><link rel="import" href="css/px-code-editor-styles.html"></head><body><dom-module id="px-code-editor"><template><style include="px-code-editor-styles"></style><div id="editorContainer"></div></template></dom-module><script>Polymer({is:'px-code-editor',properties:{mode:{type:String,observer:'_modeChanged'},value:{type:String,observer:'_valueChanged',notify:!0},editor:{type:Object,readOnly:!0,notify:!0}},_valueChanged:function(a){if('string'===typeof a){if(!this.editor)return void this._initializeEditor();this.editor.getValue()!==a&&this.editor.setValue(a)}},_modeChanged:function(a){'string'===typeof a&&(this.editor?this.editor.setOption('mode',a):this._initializeEditor())},_initializeEditor:function(){if(!this.editor&&'string'===typeof this.value&&'string'===typeof this.mode){this.scopeSubtree(this.$.editorContainer,!0);var a=CodeMirror(this.$.editorContainer,{mode:this.mode,value:this.value,theme:'predix',lineWrapping:!1,lineNumbers:!1});this._setEditor(a),a.on('changes',this._onEditorChanges.bind(this))}},_onEditorChanges:function(){var a=this;this.debounce('handle-editor-changes',function(){var b=a.editor.getValue();a.fire('px-code-editor-updated',{value:b}),a.value=b},20)}});</script></body></html>